!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.flux=e()}}(function(){var e;return function t(e,r,n){function i(s,a){if(!r[s]){if(!e[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var l=r[s]={exports:{}};e[s][0].call(l.exports,function(t){var r=e[s][1][t];return i(r?r:t)},l,l.exports,t,e,r,n)}return r[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(e){(function(t){"use strict";var r=t.angular||e("angular")&&t.angular,n=e("immutable-store"),i=e("./safeDeepClone.js"),o=e("dispatchr")(),s=e("eventemitter2").EventEmitter2,a=r.module,c=[],u=function(e,t,r,n){t=t||{};var i=function(t){this.dispatcher=t,this.waitFor=function(e,t){if(e=Array.isArray(e)?e:[e],!n.isStoresRegistered(e))throw new Error("Waiting for stores that are not injected into Angular yet, "+e.join(", ")+". Be sure to inject stores before waiting for them");this.dispatcher.waitFor(e,t.bind(this))},s.call(this,{wildcard:!0}),"number"==typeof r?this.setMaxListeners(r):r&&"number"==typeof r[e]&&this.setMaxListeners(r[e]),this.initialize&&this.initialize()};return i.handlers=t.handlers,i.storeName=e,i.prototype=Object.create(s.prototype),i.prototype.emitChange=function(){this.emit("change")},Object.keys(t).forEach(function(e){i.prototype[e]=t[e]}),i},l=function(e,t){this.stores=[],this.dispatcher=new o,this.dispatch=function(){c.length&&console.warn("There are still stores not injected: "+c.join(",")+". Make sure to inject all stores before running any dispatches."),this.dispatcher.dispatch.apply(this.dispatcher,arguments)},this.createStore=function(r,n){var s,a=u(r,n,t,this);if(a.exports={},o.registerStore(a),this.stores.push(a),!n.exports)throw new Error("You have to add an exports object to your store: "+r);return s=this.dispatcher.getStore(a),Object.keys(n.exports).forEach(function(t){var r=Object.getOwnPropertyDescriptor(n.exports,t);r.get?Object.defineProperty(a.exports,t,{enumerable:r.enumerable,configurable:r.configurable,get:function(){var t=r.get.apply(s,arguments);return e?i("[Circular]",[],t):t}}):(a.exports[t]=function(){var r=n.exports[t].apply(s,arguments);return e?i("[Circular]",[],r):r},n.exports[t]=n.exports[t].bind(s))}),a.exports},this.getStore=function(e){var t=this.stores.filter(function(t){return t.exports===e})[0];return this.dispatcher.getStore(t)},this.isStoresRegistered=function(e){var t=!0,r=this.stores.map(function(e){return e.storeName});return e.forEach(function(e){-1===r.indexOf(e)&&(t=!1)}),t},this.reset=function(){o.stores={},o.handlers={},this.stores=[]},this.immutable=function(e){return new n(e)}};r.module=function(){var e=a.apply(r,arguments);return e.store=function(e,t){return c.push(e),this.factory(e,["$injector","flux",function(r,n){var i=r.invoke(t);return c.splice(c.indexOf(e),1),n.createStore(e,i)}]),this},e},r.module("flux",[]).provider("flux",function(){var e=!0,t=null;this.useCloning=function(t){e=t},this.setMaxListeners=function(e){t=e},this.$get=[function(){return new l(e,t)}]}).run(["$rootScope","$injector","flux",function(e,t,n){r.mock&&n.reset(),e.constructor.prototype.$listenTo=function(e,t,r){r||(r=t,t="*"),r=r.bind(this);var i=n.getStore(e),o="*"===t?"onAny":"on",s="*"===t?"offAny":"off",a="*"===t?[r]:[t,r];i[o].apply(i,a),this.$on("$destroy",function(){i[s].apply(i,a)})}}])}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./safeDeepClone.js":14,angular:"angular",dispatchr:2,eventemitter2:8,"immutable-store":10}],2:[function(e,t){t.exports=e("./lib/Dispatcher")},{"./lib/Dispatcher":4}],3:[function(e,t){"use strict";function r(e,t){this.name=e,this.payload=t,this._handlers=null,this._isExecuting=!1,this._isCompleted=null}var n=e("debug")("Dispatchr:Action");r.prototype.getStoreName=function(e){return"string"==typeof e?e:e.storeName},r.prototype.execute=function(e){if(this._isExecuting)throw new Error("Action is already dispatched");var t=this;this._handlers=e,this._isExecuting=!0,this._isCompleted={},Object.keys(e).forEach(function(e){t._callHandler(e)})},r.prototype._callHandler=function(e){var t=this,r=t._handlers[e];if(!r)throw new Error(e+" does not have a handler for action "+t.name);t._isCompleted[e]||(t._isCompleted[e]=!1,n("executing handler for "+e),r(t.payload,t.name),t._isCompleted[e]=!0)},r.prototype.waitFor=function(e,t){var r=this;if(!r._isExecuting)throw new Error("waitFor called even though there is no action being executed!");Array.isArray(e)||(e=[e]),n("waiting on "+e.join(", ")),e.forEach(function(e){e=r.getStoreName(e),r._handlers[e]&&r._callHandler(e)}),t()},t.exports=r},{debug:5}],4:[function(e,t){"use strict";var r=e("./Action"),n="default";t.exports=function(){function t(e){this.storeInstances={},this.currentAction=null,this.dispatcherInterface={getContext:function(){return e},getStore:this.getStore.bind(this),waitFor:this.waitFor.bind(this)}}var i=e("debug")("Dispatchr:dispatcher");return t.stores={},t.handlers={"default":[]},t.registerStore=function(e){if("function"!=typeof e)throw new Error("registerStore requires a constructor as first parameter");var r=t.getStoreName(e);if(!r)throw new Error("Store is required to have a `storeName` property.");if(t.stores[r]){if(t.stores[r]===e)return;throw new Error("Store with name `"+r+"` has already been registered.")}t.stores[r]=e,e.handlers&&Object.keys(e.handlers).forEach(function(n){var i=e.handlers[n];t._registerHandler(n,r,i)})},t.isRegistered=function(e){var r=t.getStoreName(e),n=t.stores[r];return n?"function"==typeof e&&e!==n?!1:!0:!1},t.getStoreName=function(e){return"string"==typeof e?e:e.storeName},t._registerHandler=function(e,r,n){return t.handlers[e]=t.handlers[e]||[],t.handlers[e].push({name:t.getStoreName(r),handler:n}),t.handlers.length-1},t.prototype.getStore=function(e){var r=t.getStoreName(e);if(!this.storeInstances[r]){var n=t.stores[r];if(!n)throw new Error("Store "+r+" was not registered.");this.storeInstances[r]=new t.stores[r](this.dispatcherInterface)}return this.storeInstances[r]},t.prototype.dispatch=function(e,o){if(!e)throw new Error("actionName parameter `"+e+"` is invalid.");if(this.currentAction)throw new Error("Cannot call dispatch while another dispatch is executing. Attempted to execute '"+e+"' but '"+this.currentAction.name+"' is already executing.");var s=t.handlers[e]||[],a=t.handlers[n]||[];if(!s.length&&!a.length)return void i(e+" does not have any registered handlers");i("dispatching "+e,o),this.currentAction=new r(e,o);var c=this,u=s.concat(a),l={};try{u.forEach(function(e){if(!l[e.name]){var t=c.getStore(e.name);if("function"==typeof e.handler)l[e.name]=e.handler.bind(t);else{if(!t[e.handler])throw new Error(e.name+" does not have a method called "+e.handler);l[e.name]=t[e.handler].bind(t)}}}),this.currentAction.execute(l)}catch(f){throw f}finally{i("finished "+e),this.currentAction=null}},t.prototype.dehydrate=function(){var e=this,t={};return Object.keys(e.storeInstances).forEach(function(r){var n=e.storeInstances[r];!n.dehydrate||n.shouldDehydrate&&!n.shouldDehydrate()||(t[r]=n.dehydrate())}),{stores:t}},t.prototype.rehydrate=function(e){var t=this;e.stores&&Object.keys(e.stores).forEach(function(r){var n=e.stores[r],i=t.getStore(r);i.rehydrate&&i.rehydrate(n)})},t.prototype.waitFor=function(e,t){if(!this.currentAction)throw new Error("waitFor called even though there is no action dispatching");this.currentAction.waitFor(e,t)},t}},{"./Action":3,debug:5}],5:[function(e,t,r){function n(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function i(){var e=arguments,t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+r.humanize(this.diff),!t)return e;var n="color: "+this.color;e=[e[0],n,"color: inherit"].concat(Array.prototype.slice.call(e,1));var i=0,o=0;return e[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(i++,"%c"===e&&(o=i))}),e.splice(o,0,n),e}function o(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function s(e){try{null==e?r.storage.removeItem("debug"):r.storage.debug=e}catch(t){}}function a(){var e;try{e=r.storage.debug}catch(t){}return e}function c(){try{return window.localStorage}catch(e){}}r=t.exports=e("./debug"),r.log=o,r.formatArgs=i,r.save=s,r.load=a,r.useColors=n,r.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:c(),r.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],r.formatters.j=function(e){return JSON.stringify(e)},r.enable(a())},{"./debug":6}],6:[function(e,t,r){function n(){return r.colors[l++%r.colors.length]}function i(e){function t(){}function i(){var e=i,t=+new Date,o=t-(u||t);e.diff=o,e.prev=u,e.curr=t,u=t,null==e.useColors&&(e.useColors=r.useColors()),null==e.color&&e.useColors&&(e.color=n());var s=Array.prototype.slice.call(arguments);s[0]=r.coerce(s[0]),"string"!=typeof s[0]&&(s=["%o"].concat(s));var a=0;s[0]=s[0].replace(/%([a-z%])/g,function(t,n){if("%%"===t)return t;a++;var i=r.formatters[n];if("function"==typeof i){var o=s[a];t=i.call(e,o),s.splice(a,1),a--}return t}),"function"==typeof r.formatArgs&&(s=r.formatArgs.apply(e,s));var c=i.log||r.log||console.log.bind(console);c.apply(e,s)}t.enabled=!1,i.enabled=!0;var o=r.enabled(e)?i:t;return o.namespace=e,o}function o(e){r.save(e);for(var t=(e||"").split(/[\s,]+/),n=t.length,i=0;n>i;i++)t[i]&&(e=t[i].replace(/\*/g,".*?"),"-"===e[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")))}function s(){r.enable("")}function a(e){var t,n;for(t=0,n=r.skips.length;n>t;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;n>t;t++)if(r.names[t].test(e))return!0;return!1}function c(e){return e instanceof Error?e.stack||e.message:e}r=t.exports=i,r.coerce=c,r.disable=s,r.enable=o,r.enabled=a,r.humanize=e("ms"),r.names=[],r.skips=[],r.formatters={};var u,l=0},{ms:7}],7:[function(e,t){function r(e){if(e=""+e,!(e.length>1e4)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*l;case"days":case"day":case"d":return r*u;case"hours":case"hour":case"hrs":case"hr":case"h":return r*c;case"minutes":case"minute":case"mins":case"min":case"m":return r*a;case"seconds":case"second":case"secs":case"sec":case"s":return r*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r}}}}function n(e){return e>=u?Math.round(e/u)+"d":e>=c?Math.round(e/c)+"h":e>=a?Math.round(e/a)+"m":e>=s?Math.round(e/s)+"s":e+"ms"}function i(e){return o(e,u,"day")||o(e,c,"hour")||o(e,a,"minute")||o(e,s,"second")||e+" ms"}function o(e,t,r){return t>e?void 0:1.5*t>e?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}var s=1e3,a=60*s,c=60*a,u=24*c,l=365.25*u;t.exports=function(e,t){return t=t||{},"string"==typeof e?r(e):t["long"]?i(e):n(e)}},{}],8:[function(t,r,n){!function(){function t(){this._events={},this._conf&&r.call(this,this._conf)}function r(e){e&&(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),e.maxListeners&&(this._events.maxListeners=e.maxListeners),e.wildcard&&(this.wildcard=e.wildcard),e.newListener&&(this.newListener=e.newListener),this.wildcard&&(this.listenerTree={}))}function i(e){this._events={},this.newListener=!1,r.call(this,e)}function o(e,t,r,n){if(!r)return[];var i,s,a,c,u,l,f,h=[],p=t.length,d=t[n],y=t[n+1];if(n===p&&r._listeners){if("function"==typeof r._listeners)return e&&e.push(r._listeners),[r];for(i=0,s=r._listeners.length;s>i;i++)e&&e.push(r._listeners[i]);return[r]}if("*"===d||"**"===d||r[d]){if("*"===d){for(a in r)"_listeners"!==a&&r.hasOwnProperty(a)&&(h=h.concat(o(e,t,r[a],n+1)));return h}if("**"===d){f=n+1===p||n+2===p&&"*"===y,f&&r._listeners&&(h=h.concat(o(e,t,r,p)));for(a in r)"_listeners"!==a&&r.hasOwnProperty(a)&&("*"===a||"**"===a?(r[a]._listeners&&!f&&(h=h.concat(o(e,t,r[a],p))),h=h.concat(o(e,t,r[a],n))):h=h.concat(a===y?o(e,t,r[a],n+2):o(e,t,r[a],n)));return h}h=h.concat(o(e,t,r[d],n+1))}if(c=r["*"],c&&o(e,t,c,n+1),u=r["**"])if(p>n){u._listeners&&o(e,t,u,p);for(a in u)"_listeners"!==a&&u.hasOwnProperty(a)&&(a===y?o(e,t,u[a],n+2):a===d?o(e,t,u[a],n+1):(l={},l[a]=u[a],o(e,t,{"**":l},n+1)))}else u._listeners?o(e,t,u,p):u["*"]&&u["*"]._listeners&&o(e,t,u["*"],p);return h}function s(e,t){e="string"==typeof e?e.split(this.delimiter):e.slice();for(var r=0,n=e.length;n>r+1;r++)if("**"===e[r]&&"**"===e[r+1])return;for(var i=this.listenerTree,o=e.shift();o;){if(i[o]||(i[o]={}),i=i[o],0===e.length){if(i._listeners){if("function"==typeof i._listeners)i._listeners=[i._listeners,t];else if(a(i._listeners)&&(i._listeners.push(t),!i._listeners.warned)){var s=c;"undefined"!=typeof this._events.maxListeners&&(s=this._events.maxListeners),s>0&&i._listeners.length>s&&(i._listeners.warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",i._listeners.length),console.trace())}}else i._listeners=t;return!0}o=e.shift()}return!0}var a=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},c=10;i.prototype.delimiter=".",i.prototype.setMaxListeners=function(e){this._events||t.call(this),this._events.maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e},i.prototype.event="",i.prototype.once=function(e,t){return this.many(e,1,t),this},i.prototype.many=function(e,t,r){function n(){0===--t&&i.off(e,n),r.apply(this,arguments)}var i=this;if("function"!=typeof r)throw new Error("many only accepts instances of Function");return n._origin=r,this.on(e,n),i},i.prototype.emit=function(){this._events||t.call(this);var e=arguments[0];if("newListener"===e&&!this.newListener&&!this._events.newListener)return!1;if(this._all){for(var r=arguments.length,n=new Array(r-1),i=1;r>i;i++)n[i-1]=arguments[i];for(i=0,r=this._all.length;r>i;i++)this.event=e,this._all[i].apply(this,n)}if("error"===e&&!(this._all||this._events.error||this.wildcard&&this.listenerTree.error))throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");var s;if(this.wildcard){s=[];var a="string"==typeof e?e.split(this.delimiter):e.slice();o.call(this,s,a,this.listenerTree,0)}else s=this._events[e];if("function"==typeof s){if(this.event=e,1===arguments.length)s.call(this);else if(arguments.length>1)switch(arguments.length){case 2:s.call(this,arguments[1]);break;case 3:s.call(this,arguments[1],arguments[2]);break;default:for(var r=arguments.length,n=new Array(r-1),i=1;r>i;i++)n[i-1]=arguments[i];s.apply(this,n)}return!0}if(s){for(var r=arguments.length,n=new Array(r-1),i=1;r>i;i++)n[i-1]=arguments[i];for(var c=s.slice(),i=0,r=c.length;r>i;i++)this.event=e,c[i].apply(this,n);return c.length>0||!!this._all}return!!this._all},i.prototype.on=function(e,r){if("function"==typeof e)return this.onAny(e),this;if("function"!=typeof r)throw new Error("on only accepts instances of Function");if(this._events||t.call(this),this.emit("newListener",e,r),this.wildcard)return s.call(this,e,r),this;if(this._events[e]){if("function"==typeof this._events[e])this._events[e]=[this._events[e],r];else if(a(this._events[e])&&(this._events[e].push(r),!this._events[e].warned)){var n=c;"undefined"!=typeof this._events.maxListeners&&(n=this._events.maxListeners),n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),console.trace())}}else this._events[e]=r;return this},i.prototype.onAny=function(e){if("function"!=typeof e)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),this._all.push(e),this},i.prototype.addListener=i.prototype.on,i.prototype.off=function(e,t){if("function"!=typeof t)throw new Error("removeListener only takes instances of Function");var r,n=[];if(this.wildcard){var i="string"==typeof e?e.split(this.delimiter):e.slice();n=o.call(this,null,i,this.listenerTree,0)}else{if(!this._events[e])return this;r=this._events[e],n.push({_listeners:r})}for(var s=0;s<n.length;s++){var c=n[s];if(r=c._listeners,a(r)){for(var u=-1,l=0,f=r.length;f>l;l++)if(r[l]===t||r[l].listener&&r[l].listener===t||r[l]._origin&&r[l]._origin===t){u=l;break}if(0>u)continue;return this.wildcard?c._listeners.splice(u,1):this._events[e].splice(u,1),0===r.length&&(this.wildcard?delete c._listeners:delete this._events[e]),this}(r===t||r.listener&&r.listener===t||r._origin&&r._origin===t)&&(this.wildcard?delete c._listeners:delete this._events[e])}return this},i.prototype.offAny=function(e){var t,r=0,n=0;if(e&&this._all&&this._all.length>0){for(t=this._all,r=0,n=t.length;n>r;r++)if(e===t[r])return t.splice(r,1),this}else this._all=[];return this},i.prototype.removeListener=i.prototype.off,i.prototype.removeAllListeners=function(e){if(0===arguments.length)return!this._events||t.call(this),this;if(this.wildcard)for(var r="string"==typeof e?e.split(this.delimiter):e.slice(),n=o.call(this,null,r,this.listenerTree,0),i=0;i<n.length;i++){var s=n[i];s._listeners=null}else{if(!this._events[e])return this;this._events[e]=null}return this},i.prototype.listeners=function(e){if(this.wildcard){var r=[],n="string"==typeof e?e.split(this.delimiter):e.slice();return o.call(this,r,n,this.listenerTree,0),r}return this._events||t.call(this),this._events[e]||(this._events[e]=[]),a(this._events[e])||(this._events[e]=[this._events[e]]),this._events[e]},i.prototype.listenersAny=function(){return this._all?this._all:[]},"function"==typeof e&&e.amd?e(function(){return i}):"object"==typeof n?n.EventEmitter2=i:window.EventEmitter2=i}()},{}],9:[function(e,t){var r=e("./utils.js");t.exports=function(e){return{set:function(t,n,i,o){t.__.currentMapping[t.__.path.slice().concat(n).join("")]=r.copyObject(i),Object.keys(i.deps).forEach(function(r){var n=i.deps[r].join("");e.depsOverview[n]=e.depsOverview[n]||[],e.depsOverview[n].push(t)});var s=i.value,a=void 0,c=null,u=e.currentStore,l=function(){return Object.keys(i.deps).reduce(function(t,n){return t[n]=r.getByPath(e.currentStore,i.deps[n]),t},{})},f=function(){var e=l();return!r.isSame(e,c)};Object.defineProperty(t,n,{get:function(){return o&&(e.currentStore=o),u!==e.currentStore&&c&&f()?(c=l(),a=r.makeImmutable(i.get(s,c))):c&&f()?a=r.makeImmutable(i.get(s,c)):c&&void 0!==a?a:(c=l(),a=r.makeImmutable(i.get(s,c)))},set:function(e){s=e,i.value=e},enumerable:!0,configurable:!0})},get:function(t,r){return e.currentStore.__.currentMapping[t.__.path.slice().concat(r).join("")]}}}},{"./utils.js":13}],10:[function(e,t){"use strict";function r(e){if(!e||"object"!=typeof e||Array.isArray(e)||null===e)throw new Error("You have to pass an object to the store");var t={currentPath:[],currentStore:null,mapper:null,currentMapping:{},depsOverview:{},update:function(e,r){t.currentMapping=s.copyObject(t.currentMapping);var n=e.__.path.join("");return t.depsOverview[n]&&t.depsOverview[n].forEach(function(e){t.currentStore=u(t,e)}),t.currentStore=u(t,e,r),t.currentStore},updateMapping:function(e,r,n){return t.currentStore=u(t,e,function(e,t){t.mapper.set(e,r,t.mapper.get(e,r)),t.currentPath.push(r),e[r]=n,t.currentPath.pop()}),t.currentStore}};return t.mapper=o(t),t.currentStore=l(t,e),t.currentStore}var n=e("./StoreArray.js"),i=e("./StoreObject.js"),o=e("./Mapper.js"),s=e("./utils.js"),a=function(e,t){return Array.isArray(e)?n(e,t):"object"==typeof e&&null!==e?i(e,t):e},c=function(e,t){if(Array.isArray(t)&&!t.__){var r=t.map(function(t,r){e.currentPath.push(r);var n=c(e,t);return e.currentPath.pop(),n}),o=n(r,e);return Object.freeze(o),o}if("object"!=typeof t||null===t||t.__)return t;var s=Object.keys(t).reduce(function(r,n){return e.currentPath.push(n),r[n]=c(e,t[n]),e.currentPath.pop(),r},{}),a=i(s,e);return Object.freeze(a),a},u=function(e,t,r){e.currentPath=[];var n=t.__.path;n.length||(e.currentStore=t);var o=a(e.currentStore,e),u=o;n.forEach(function(t){e.currentPath.push(t),u[t]=a(u[t],e),u=u[t]}),r&&r(u,e,c),u=o,n.forEach(function(t){u=u[t],Object.freeze(u),e.currentPath.pop()});var l=i(o,e);return Object.keys(o).forEach(function(t){var r=Object.getOwnPropertyDescriptor(o,t);r&&r.get&&r.set?Object.defineProperty(l,t,{get:function(){return e.currentStore=this,r.get()}}):Object.defineProperty(l,t,{enumerable:!0,get:function(){return e.currentStore=this,o[t]}})}),Object.defineProperty(l,"export",{enumerable:!1,value:function(){return s["export"](l,e.mapper)}}),Object.defineProperty(l,"import",{enumerable:!1,value:function(t){return s["import"](t,e,[])}}),Object.freeze(l),l},l=function(e,t){var r=i({},e);return Object.keys(t).forEach(function(n){e.currentPath.push(n);var i=c(e,t[n]);e.currentPath.pop(n),"function"==typeof t[n]?e.mapper.set(r,n,t[n](),r):Object.defineProperty(r,n,{enumerable:!0,get:function(){return e.currentStore=this,i}})}),Object.defineProperty(r,"export",{enumerable:!1,value:function(){return s["export"](r,e.mapper)}}),Object.defineProperty(r,"import",{enumerable:!1,value:function(t){return s["import"](t,e,[])}}),Object.freeze(r),r};t.exports=r},{"./Mapper.js":9,"./StoreArray.js":11,"./StoreObject.js":12,"./utils.js":13}],11:[function(e,t){"use strict";var r=e("./utils.js"),n=function(){function e(t){var r=Array.apply(Array);return r=r.concat(t),r.__proto__=e.prototype,r}return e.prototype=Object.create(Array.prototype),e.prototype.push=function(e){return this.__.update(this,function(t,r,n){r.currentPath.push(t.length),Array.prototype.push.call(t,n(r,e)),r.currentPath.pop()})},e.prototype.splice=function(){var e=[].slice.call(arguments,0),t=e.shift(),r=e.shift();return this.__.update(this,function(n,i,o){var s=e.map(function(e,r){i.currentPath.push(t+r);var n=o(i,e);return i.currentPath.pop(),n});Array.prototype.splice.apply(n,[t,r].concat(s));for(var a=t;a<n.length;a++)if(n[a].__){var c=n[a].__.path;c[c.length-1]=a}})},e.prototype.concat=function(){var e=[].slice.call(arguments,0);return this.__.update(this,function(t,r,n){e.map(function(e){Array.isArray(e)?e.map(function(e){r.currentPath.push(t.length),Array.prototype.push.call(t,n(r,e)),r.currentPath.pop()}):(r.currentPath.push(t.length),Array.prototype.push.call(t,n(r,e)),r.currentPath.pop())})})},e.prototype.unshift=function(e){return this.__.update(this,function(t,r,n){Array.prototype.unshift.call(t,n(r,e));for(var i=0;i<t.length;i++)if(t[i].__){var o=t[i].__.path;o[o.length-1]=i}})},e.prototype.shift=function(){return this.__.update(this,function(e){Array.prototype.shift.call(e);for(var t=0;t<e.length;t++)if(e[t].__){var r=e[t].__.path;r[r.length-1]=t}})},e.prototype.pop=function(){return this.__.update(this,function(e){Array.prototype.pop.call(e)})},e.prototype.toJS=function(){return r.toJS(this)},function(t,r){var n=new e(t);return Object.defineProperty(n,"__",{value:{path:r.currentPath.slice(0),update:r.update}}),n}};t.exports=n()},{"./utils.js":13}],12:[function(e,t){"use strict";var r=e("./utils.js"),n=(e("./Mapper.js"),function(){var e={set:function(e,t){return this.__.update(this,function(r,n,i){Array.isArray(t)&&t.forEach(function(e,t){e.__&&(e.__.path[e.__.path.length-1]=t)}),n.currentPath.push(e),r[e]=i(n,t),n.currentPath.pop()})},toJS:function(){return r.toJS(this)},merge:function(e){if(Array.isArray(e)||"object"!=typeof e||null===e)throw new Error("You have to pass an object to the merge method");return this.__.update(this,function(t,r,n){Object.keys(e).forEach(function(i){r.currentPath.push(i),t[i]=n(r,e[i]),r.currentPath.pop()})})},unset:function(e){return this.__.update(this,function(t){delete t[e]})}};return function(t,r){var n=Object.create(e);return Object.defineProperty(n,"__",{value:{path:r.currentPath.slice(0),update:r.update,updateMapping:r.updateMapping,currentMapping:r.currentMapping}}),Object.keys(t).forEach(function(e){var i=Object.getOwnPropertyDescriptor(t,e);i&&i.get&&i.set?r.mapper.set(n,e,r.mapper.get(n,e)):"function"==typeof t[e]?r.mapper.set(n,e,t[e]()):n[e]=t[e]}),n}});t.exports=n()},{"./Mapper.js":9,"./utils.js":13}],13:[function(e,t){"use strict";var r={toJS:function(e){return e instanceof Array?e.map(function(e){return r.toJS(e)}):"object"==typeof e&&null!==e?Object.keys(e).reduce(function(t,n){return t[n]=r.toJS(e[n]),t},{}):e},makeImmutable:function(e){if(e instanceof Array){var t=e.map(function(e){return r.makeImmutable(e)});return Object.defineProperty(t,"toJS",{value:r.toJS.bind(null,t)}),Object.freeze(t),t}if("object"==typeof e&&null!==e){var t=Object.keys(e).reduce(function(t,n){return t[n]=r.makeImmutable(e[n]),t},{});return Object.defineProperty(t,"toJS",{value:r.toJS.bind(null,t)}),Object.freeze(t),t}return e},"export":function(e,t){return e instanceof Array?e.map(function(e){return r["export"](e,t)}):"object"==typeof e&&null!==e?Object.keys(e).reduce(function(n,i){return n[i]=e.__&&t.get(e,i)?t.get(e,i).value:r["export"](e[i],t),n},{}):e},"import":function(e,t,n){return Object.keys(e).reduce(function(i,o){if(e[o]instanceof Array||"object"!=typeof e[o]||null===e[o]||!r.getByPath(i,n))return r.getByPath(i,n).set(o,e[o]);n.push(o);var s=r["import"](e[o],t,n);return n.pop(),s},t.currentStore)},getByPath:function(e,t){return t.reduce(function(e,t){return e[t]},e)},isSame:function(e,t){return Object.keys(e).reduce(function(r,n){return r?e[n]===t[n]:!1},!0)},copyObject:function(e){return Object.keys(e).reduce(function(t,r){return t[r]=e[r],t},{})}};t.exports=r},{}],14:[function(e,t){(function(r){function n(e,t,r){var o;if(!r||"object"!=typeof r||r instanceof Error||r instanceof ArrayBuffer||r instanceof Blob||r instanceof File)return r;if(r instanceof Date)return o=new Date,o.setTime(r.getTime()),o;if(i.isArray(r)){t.push(r),o=[];for(var s=0,a=r.length;a>s;s++)o[s]=t.indexOf(r[s])>=0?e:n(e,t,r[s]);return t.pop(),o}t.push(r),o=r.constructor&&r.constructor!==Object?Object.create(r.constructor.prototype):{};for(var c in r)r.hasOwnProperty(c)&&"$$hashKey"!==c&&(o[c]=t.indexOf(r[c])>=0?e:n(e,t,r[c]));return t.pop(),o}var i=r.angular||e("angular")&&r.angular;t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{angular:"angular"}]},{},[1])(1)});
