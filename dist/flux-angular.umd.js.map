{"version":3,"file":"flux-angular.umd.js","sources":["../node_modules/core-js/internals/classof-raw.js","../node_modules/core-js/internals/is-object.js","../node_modules/core-js/internals/require-object-coercible.js","../node_modules/core-js/internals/to-object.js","../node_modules/core-js/internals/to-integer.js","../node_modules/core-js/internals/to-length.js","../node_modules/core-js/internals/to-primitive.js","../node_modules/core-js/internals/fails.js","../node_modules/core-js/internals/document-create-element.js","../node_modules/core-js/internals/an-object.js","../node_modules/core-js/internals/create-property-descriptor.js","../node_modules/core-js/internals/create-property.js","../node_modules/core-js/internals/is-array.js","../node_modules/core-js/internals/descriptors.js","../node_modules/core-js/internals/global.js","../node_modules/core-js/internals/ie8-dom-define.js","../node_modules/core-js/internals/object-define-property.js","../node_modules/core-js/internals/set-global.js","../node_modules/core-js/internals/uid.js","../node_modules/core-js/internals/well-known-symbol.js","../node_modules/core-js/internals/array-species-create.js","../node_modules/core-js/internals/array-method-has-species-support.js","../node_modules/core-js/internals/to-indexed-object.js","../node_modules/core-js/internals/has.js","../node_modules/core-js/internals/shared-key.js","../node_modules/core-js/internals/hide.js","../node_modules/core-js/internals/internal-state.js","../node_modules/core-js/internals/shared.js","../node_modules/core-js/internals/native-symbol.js","../node_modules/core-js/internals/object-property-is-enumerable.js","../node_modules/core-js/internals/indexed-object.js","../node_modules/core-js/internals/object-get-own-property-descriptor.js","../node_modules/core-js/internals/function-to-string.js","../node_modules/core-js/internals/native-weak-map.js","../node_modules/core-js/internals/hidden-keys.js","../node_modules/core-js/internals/to-absolute-index.js","../node_modules/core-js/internals/array-includes.js","../node_modules/core-js/internals/object-keys-internal.js","../node_modules/core-js/internals/copy-constructor-properties.js","../node_modules/core-js/internals/is-forced.js","../node_modules/core-js/internals/export.js","../node_modules/core-js/modules/es.array.concat.js","../node_modules/core-js/internals/redefine.js","../node_modules/core-js/internals/enum-bug-keys.js","../node_modules/core-js/internals/object-get-own-property-names.js","../node_modules/core-js/internals/object-get-own-property-symbols.js","../node_modules/core-js/internals/own-keys.js","../node_modules/core-js/internals/a-function.js","../node_modules/core-js/internals/bind-context.js","../node_modules/core-js/internals/array-methods.js","../node_modules/core-js/internals/sloppy-array-method.js","../node_modules/core-js/modules/es.array.every.js","../node_modules/core-js/modules/es.array.filter.js","../node_modules/core-js/internals/array-for-each.js","../node_modules/core-js/modules/es.array.for-each.js","../node_modules/core-js/modules/es.array.index-of.js","../node_modules/core-js/modules/es.array.is-array.js","../node_modules/core-js/internals/object-create.js","../node_modules/core-js/internals/object-keys.js","../node_modules/core-js/internals/object-define-properties.js","../node_modules/core-js/internals/html.js","../node_modules/core-js/internals/add-to-unscopables.js","../node_modules/core-js/internals/iterators-core.js","../node_modules/core-js/internals/iterators.js","../node_modules/core-js/internals/correct-prototype-getter.js","../node_modules/core-js/internals/object-get-prototype-of.js","../node_modules/core-js/internals/set-to-string-tag.js","../node_modules/core-js/internals/create-iterator-constructor.js","../node_modules/core-js/internals/define-iterator.js","../node_modules/core-js/internals/object-set-prototype-of.js","../node_modules/core-js/internals/validate-set-prototype-of-arguments.js","../node_modules/core-js/modules/es.array.iterator.js","../node_modules/core-js/modules/es.array.join.js","../node_modules/core-js/modules/es.array.map.js","../node_modules/core-js/modules/es.array.splice.js","../node_modules/core-js/internals/function-bind.js","../node_modules/core-js/modules/es.function.bind.js","../node_modules/core-js/internals/classof.js","../node_modules/core-js/internals/call-with-safe-iteration-closing.js","../node_modules/core-js/internals/an-instance.js","../node_modules/core-js/internals/freezing.js","../node_modules/core-js/internals/internal-metadata.js","../node_modules/core-js/internals/is-array-iterator-method.js","../node_modules/core-js/internals/get-iterator-method.js","../node_modules/core-js/internals/iterate.js","../node_modules/core-js/internals/check-correctness-of-iteration.js","../node_modules/core-js/internals/redefine-all.js","../node_modules/core-js/internals/get-built-in.js","../node_modules/core-js/internals/set-species.js","../node_modules/core-js/internals/path.js","../node_modules/core-js/internals/collection-strong.js","../node_modules/core-js/internals/collection.js","../node_modules/core-js/internals/inherit-if-required.js","../node_modules/core-js/modules/es.map.js","../node_modules/core-js/modules/es.object.define-property.js","../node_modules/core-js/modules/es.object.get-own-property-descriptor.js","../node_modules/core-js/modules/es.object.keys.js","../node_modules/core-js/internals/object-to-string.js","../node_modules/core-js/modules/es.object.to-string.js","../node_modules/core-js/internals/string-at.js","../node_modules/core-js/modules/es.string.iterator.js","../node_modules/core-js/internals/dom-iterables.js","../node_modules/core-js/modules/web.dom-collections.for-each.js","../node_modules/core-js/modules/web.dom-collections.iterator.js","../node_modules/emmett/emmett.js","../node_modules/baobab/dist/type.js","../node_modules/baobab/dist/helpers.js","../node_modules/baobab/dist/update.js","../node_modules/baobab/dist/monkey.js","../node_modules/baobab/dist/cursor.js","../node_modules/baobab/dist/watcher.js","../node_modules/ms/index.js","../node_modules/baobab/dist/baobab.js","../node_modules/debug/src/debug.js","../node_modules/debug/src/browser.js","../node_modules/dispatchr/lib/Action.js","../node_modules/dispatchr/lib/DispatcherContext.js","../node_modules/dispatchr/lib/Dispatcher.js","../src/flux-angular.js"],"sourcesContent":["var toString = {}.toString;\n\nmodule.exports = function (it) {\n  return toString.call(it).slice(8, -1);\n};\n","module.exports = function (it) {\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n","// `RequireObjectCoercible` abstract operation\n// https://tc39.github.io/ecma262/#sec-requireobjectcoercible\nmodule.exports = function (it) {\n  if (it == undefined) throw TypeError(\"Can't call method on \" + it);\n  return it;\n};\n","var requireObjectCoercible = require('../internals/require-object-coercible');\n\n// `ToObject` abstract operation\n// https://tc39.github.io/ecma262/#sec-toobject\nmodule.exports = function (argument) {\n  return Object(requireObjectCoercible(argument));\n};\n","var ceil = Math.ceil;\nvar floor = Math.floor;\n\n// `ToInteger` abstract operation\n// https://tc39.github.io/ecma262/#sec-tointeger\nmodule.exports = function (argument) {\n  return isNaN(argument = +argument) ? 0 : (argument > 0 ? floor : ceil)(argument);\n};\n","var toInteger = require('../internals/to-integer');\nvar min = Math.min;\n\n// `ToLength` abstract operation\n// https://tc39.github.io/ecma262/#sec-tolength\nmodule.exports = function (argument) {\n  return argument > 0 ? min(toInteger(argument), 0x1FFFFFFFFFFFFF) : 0; // 2 ** 53 - 1 == 9007199254740991\n};\n","// 7.1.1 ToPrimitive(input [, PreferredType])\nvar isObject = require('../internals/is-object');\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function (it, S) {\n  if (!isObject(it)) return it;\n  var fn, val;\n  if (S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n","module.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (error) {\n    return true;\n  }\n};\n","var isObject = require('../internals/is-object');\nvar document = require('../internals/global').document;\n// typeof document.createElement is 'object' in old IE\nvar exist = isObject(document) && isObject(document.createElement);\n\nmodule.exports = function (it) {\n  return exist ? document.createElement(it) : {};\n};\n","var isObject = require('../internals/is-object');\n\nmodule.exports = function (it) {\n  if (!isObject(it)) {\n    throw TypeError(String(it) + ' is not an object');\n  } return it;\n};\n","module.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n","'use strict';\nvar toPrimitive = require('../internals/to-primitive');\nvar definePropertyModule = require('../internals/object-define-property');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = function (object, key, value) {\n  var propertyKey = toPrimitive(key);\n  if (propertyKey in object) definePropertyModule.f(object, propertyKey, createPropertyDescriptor(0, value));\n  else object[propertyKey] = value;\n};\n","var classof = require('../internals/classof-raw');\n\n// `IsArray` abstract operation\n// https://tc39.github.io/ecma262/#sec-isarray\nmodule.exports = Array.isArray || function isArray(arg) {\n  return classof(arg) == 'Array';\n};\n","// Thank's IE8 for his funny defineProperty\nmodule.exports = !require('../internals/fails')(function () {\n  return Object.defineProperty({}, 'a', { get: function () { return 7; } }).a != 7;\n});\n","// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nmodule.exports = typeof window == 'object' && window && window.Math == Math ? window\n  : typeof self == 'object' && self && self.Math == Math ? self\n  // eslint-disable-next-line no-new-func\n  : Function('return this')();\n","// Thank's IE8 for his funny defineProperty\nmodule.exports = !require('../internals/descriptors') && !require('../internals/fails')(function () {\n  return Object.defineProperty(require('../internals/document-create-element')('div'), 'a', {\n    get: function () { return 7; }\n  }).a != 7;\n});\n","var DESCRIPTORS = require('../internals/descriptors');\nvar IE8_DOM_DEFINE = require('../internals/ie8-dom-define');\nvar anObject = require('../internals/an-object');\nvar toPrimitive = require('../internals/to-primitive');\nvar nativeDefineProperty = Object.defineProperty;\n\nexports.f = DESCRIPTORS ? nativeDefineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return nativeDefineProperty(O, P, Attributes);\n  } catch (error) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n","var global = require('../internals/global');\nvar hide = require('../internals/hide');\n\nmodule.exports = function (key, value) {\n  try {\n    hide(global, key, value);\n  } catch (error) {\n    global[key] = value;\n  } return value;\n};\n","var id = 0;\nvar postfix = Math.random();\n\nmodule.exports = function (key) {\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + postfix).toString(36));\n};\n","var store = require('../internals/shared')('wks');\nvar uid = require('../internals/uid');\nvar Symbol = require('../internals/global').Symbol;\nvar NATIVE_SYMBOL = require('../internals/native-symbol');\n\nmodule.exports = function (name) {\n  return store[name] || (store[name] = NATIVE_SYMBOL && Symbol[name]\n    || (NATIVE_SYMBOL ? Symbol : uid)('Symbol.' + name));\n};\n","var isObject = require('../internals/is-object');\nvar isArray = require('../internals/is-array');\nvar SPECIES = require('../internals/well-known-symbol')('species');\n\n// `ArraySpeciesCreate` abstract operation\n// https://tc39.github.io/ecma262/#sec-arrayspeciescreate\nmodule.exports = function (originalArray, length) {\n  var C;\n  if (isArray(originalArray)) {\n    C = originalArray.constructor;\n    // cross-realm fallback\n    if (typeof C == 'function' && (C === Array || isArray(C.prototype))) C = undefined;\n    else if (isObject(C)) {\n      C = C[SPECIES];\n      if (C === null) C = undefined;\n    }\n  } return new (C === undefined ? Array : C)(length === 0 ? 0 : length);\n};\n","var fails = require('../internals/fails');\nvar SPECIES = require('../internals/well-known-symbol')('species');\n\nmodule.exports = function (METHOD_NAME) {\n  return !fails(function () {\n    var array = [];\n    var constructor = array.constructor = {};\n    constructor[SPECIES] = function () {\n      return { foo: 1 };\n    };\n    return array[METHOD_NAME](Boolean).foo !== 1;\n  });\n};\n","// toObject with fallback for non-array-like ES3 strings\nvar IndexedObject = require('../internals/indexed-object');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\nmodule.exports = function (it) {\n  return IndexedObject(requireObjectCoercible(it));\n};\n","var hasOwnProperty = {}.hasOwnProperty;\n\nmodule.exports = function (it, key) {\n  return hasOwnProperty.call(it, key);\n};\n","var shared = require('../internals/shared')('keys');\nvar uid = require('../internals/uid');\n\nmodule.exports = function (key) {\n  return shared[key] || (shared[key] = uid(key));\n};\n","var definePropertyModule = require('../internals/object-define-property');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = require('../internals/descriptors') ? function (object, key, value) {\n  return definePropertyModule.f(object, key, createPropertyDescriptor(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n","var NATIVE_WEAK_MAP = require('../internals/native-weak-map');\nvar isObject = require('../internals/is-object');\nvar hide = require('../internals/hide');\nvar objectHas = require('../internals/has');\nvar sharedKey = require('../internals/shared-key');\nvar hiddenKeys = require('../internals/hidden-keys');\nvar WeakMap = require('../internals/global').WeakMap;\nvar set, get, has;\n\nvar enforce = function (it) {\n  return has(it) ? get(it) : set(it, {});\n};\n\nvar getterFor = function (TYPE) {\n  return function (it) {\n    var state;\n    if (!isObject(it) || (state = get(it)).type !== TYPE) {\n      throw TypeError('Incompatible receiver, ' + TYPE + ' required');\n    } return state;\n  };\n};\n\nif (NATIVE_WEAK_MAP) {\n  var store = new WeakMap();\n  var wmget = store.get;\n  var wmhas = store.has;\n  var wmset = store.set;\n  set = function (it, metadata) {\n    wmset.call(store, it, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return wmget.call(store, it) || {};\n  };\n  has = function (it) {\n    return wmhas.call(store, it);\n  };\n} else {\n  var STATE = sharedKey('state');\n  hiddenKeys[STATE] = true;\n  set = function (it, metadata) {\n    hide(it, STATE, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return objectHas(it, STATE) ? it[STATE] : {};\n  };\n  has = function (it) {\n    return objectHas(it, STATE);\n  };\n}\n\nmodule.exports = {\n  set: set,\n  get: get,\n  has: has,\n  enforce: enforce,\n  getterFor: getterFor\n};\n","var global = require('../internals/global');\nvar setGlobal = require('../internals/set-global');\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || setGlobal(SHARED, {});\n\n(module.exports = function (key, value) {\n  return store[key] || (store[key] = value !== undefined ? value : {});\n})('versions', []).push({\n  version: '3.0.1',\n  mode: require('../internals/is-pure') ? 'pure' : 'global',\n  copyright: 'Â© 2019 Denis Pushkarev (zloirock.ru)'\n});\n","// Chrome 38 Symbol has incorrect toString conversion\nmodule.exports = !require('../internals/fails')(function () {\n  // eslint-disable-next-line no-undef\n  return !String(Symbol());\n});\n","'use strict';\nvar nativePropertyIsEnumerable = {}.propertyIsEnumerable;\nvar nativeGetOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// Nashorn ~ JDK8 bug\nvar NASHORN_BUG = nativeGetOwnPropertyDescriptor && !nativePropertyIsEnumerable.call({ 1: 2 }, 1);\n\nexports.f = NASHORN_BUG ? function propertyIsEnumerable(V) {\n  var descriptor = nativeGetOwnPropertyDescriptor(this, V);\n  return !!descriptor && descriptor.enumerable;\n} : nativePropertyIsEnumerable;\n","// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar fails = require('../internals/fails');\nvar classof = require('../internals/classof-raw');\nvar split = ''.split;\n\nmodule.exports = fails(function () {\n  // throws an error in rhino, see https://github.com/mozilla/rhino/issues/346\n  // eslint-disable-next-line no-prototype-builtins\n  return !Object('z').propertyIsEnumerable(0);\n}) ? function (it) {\n  return classof(it) == 'String' ? split.call(it, '') : Object(it);\n} : Object;\n","var DESCRIPTORS = require('../internals/descriptors');\nvar propertyIsEnumerableModule = require('../internals/object-property-is-enumerable');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar toPrimitive = require('../internals/to-primitive');\nvar has = require('../internals/has');\nvar IE8_DOM_DEFINE = require('../internals/ie8-dom-define');\nvar nativeGetOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\nexports.f = DESCRIPTORS ? nativeGetOwnPropertyDescriptor : function getOwnPropertyDescriptor(O, P) {\n  O = toIndexedObject(O);\n  P = toPrimitive(P, true);\n  if (IE8_DOM_DEFINE) try {\n    return nativeGetOwnPropertyDescriptor(O, P);\n  } catch (error) { /* empty */ }\n  if (has(O, P)) return createPropertyDescriptor(!propertyIsEnumerableModule.f.call(O, P), O[P]);\n};\n","module.exports = require('../internals/shared')('native-function-to-string', Function.toString);\n","var nativeFunctionToString = require('../internals/function-to-string');\nvar WeakMap = require('../internals/global').WeakMap;\n\nmodule.exports = typeof WeakMap === 'function' && /native code/.test(nativeFunctionToString.call(WeakMap));\n","module.exports = {};\n","var toInteger = require('../internals/to-integer');\nvar max = Math.max;\nvar min = Math.min;\n\n// Helper for a popular repeating case of the spec:\n// Let integer be ? ToInteger(index).\n// If integer < 0, let result be max((length + integer), 0); else let result be min(length, length).\nmodule.exports = function (index, length) {\n  var integer = toInteger(index);\n  return integer < 0 ? max(integer + length, 0) : min(integer, length);\n};\n","var toIndexedObject = require('../internals/to-indexed-object');\nvar toLength = require('../internals/to-length');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\n\n// `Array.prototype.{ indexOf, includes }` methods implementation\n// false -> Array#indexOf\n// https://tc39.github.io/ecma262/#sec-array.prototype.indexof\n// true  -> Array#includes\n// https://tc39.github.io/ecma262/#sec-array.prototype.includes\nmodule.exports = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIndexedObject($this);\n    var length = toLength(O.length);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) if (IS_INCLUDES || index in O) {\n      if (O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n","var has = require('../internals/has');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar arrayIndexOf = require('../internals/array-includes')(false);\nvar hiddenKeys = require('../internals/hidden-keys');\n\nmodule.exports = function (object, names) {\n  var O = toIndexedObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) !has(hiddenKeys, key) && has(O, key) && result.push(key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (has(O, key = names[i++])) {\n    ~arrayIndexOf(result, key) || result.push(key);\n  }\n  return result;\n};\n","var has = require('../internals/has');\nvar ownKeys = require('../internals/own-keys');\nvar getOwnPropertyDescriptorModule = require('../internals/object-get-own-property-descriptor');\nvar definePropertyModule = require('../internals/object-define-property');\n\nmodule.exports = function (target, source) {\n  var keys = ownKeys(source);\n  var defineProperty = definePropertyModule.f;\n  var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    if (!has(target, key)) defineProperty(target, key, getOwnPropertyDescriptor(source, key));\n  }\n};\n","var fails = require('../internals/fails');\nvar replacement = /#|\\.prototype\\./;\n\nvar isForced = function (feature, detection) {\n  var value = data[normalize(feature)];\n  return value == POLYFILL ? true\n    : value == NATIVE ? false\n    : typeof detection == 'function' ? fails(detection)\n    : !!detection;\n};\n\nvar normalize = isForced.normalize = function (string) {\n  return String(string).replace(replacement, '.').toLowerCase();\n};\n\nvar data = isForced.data = {};\nvar NATIVE = isForced.NATIVE = 'N';\nvar POLYFILL = isForced.POLYFILL = 'P';\n\nmodule.exports = isForced;\n","var global = require('../internals/global');\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar hide = require('../internals/hide');\nvar redefine = require('../internals/redefine');\nvar setGlobal = require('../internals/set-global');\nvar copyConstructorProperties = require('../internals/copy-constructor-properties');\nvar isForced = require('../internals/is-forced');\n\n/*\n  options.target      - name of the target object\n  options.global      - target is the global object\n  options.stat        - export as static methods of target\n  options.proto       - export as prototype methods of target\n  options.real        - real prototype method for the `pure` version\n  options.forced      - export even if the native feature is available\n  options.bind        - bind methods to the target, required for the `pure` version\n  options.wrap        - wrap constructors to preventing global pollution, required for the `pure` version\n  options.unsafe      - use the simple assignment of property instead of delete + defineProperty\n  options.sham        - add a flag to not completely full polyfills\n  options.enumerable  - export as enumerable property\n  options.noTargetGet - prevent calling a getter on target\n*/\nmodule.exports = function (options, source) {\n  var TARGET = options.target;\n  var GLOBAL = options.global;\n  var STATIC = options.stat;\n  var FORCED, target, key, targetProperty, sourceProperty, descriptor;\n  if (GLOBAL) {\n    target = global;\n  } else if (STATIC) {\n    target = global[TARGET] || setGlobal(TARGET, {});\n  } else {\n    target = (global[TARGET] || {}).prototype;\n  }\n  if (target) for (key in source) {\n    sourceProperty = source[key];\n    if (options.noTargetGet) {\n      descriptor = getOwnPropertyDescriptor(target, key);\n      targetProperty = descriptor && descriptor.value;\n    } else targetProperty = target[key];\n    FORCED = isForced(GLOBAL ? key : TARGET + (STATIC ? '.' : '#') + key, options.forced);\n    // contained in target\n    if (!FORCED && targetProperty !== undefined) {\n      if (typeof sourceProperty === typeof targetProperty) continue;\n      copyConstructorProperties(sourceProperty, targetProperty);\n    }\n    // add a flag to not completely full polyfills\n    if (options.sham || (targetProperty && targetProperty.sham)) {\n      hide(sourceProperty, 'sham', true);\n    }\n    // extend global\n    redefine(target, key, sourceProperty, options);\n  }\n};\n","'use strict';\nvar isArray = require('../internals/is-array');\nvar isObject = require('../internals/is-object');\nvar toObject = require('../internals/to-object');\nvar toLength = require('../internals/to-length');\nvar createProperty = require('../internals/create-property');\nvar arraySpeciesCreate = require('../internals/array-species-create');\nvar IS_CONCAT_SPREADABLE = require('../internals/well-known-symbol')('isConcatSpreadable');\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF;\nvar MAXIMUM_ALLOWED_INDEX_EXCEEDED = 'Maximum allowed index exceeded';\n\nvar IS_CONCAT_SPREADABLE_SUPPORT = !require('../internals/fails')(function () {\n  var array = [];\n  array[IS_CONCAT_SPREADABLE] = false;\n  return array.concat()[0] !== array;\n});\n\nvar SPECIES_SUPPORT = require('../internals/array-method-has-species-support')('concat');\n\nvar isConcatSpreadable = function (O) {\n  if (!isObject(O)) return false;\n  var spreadable = O[IS_CONCAT_SPREADABLE];\n  return spreadable !== undefined ? !!spreadable : isArray(O);\n};\n\nvar FORCED = !IS_CONCAT_SPREADABLE_SUPPORT || !SPECIES_SUPPORT;\n\n// `Array.prototype.concat` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.concat\n// with adding support of @@isConcatSpreadable and @@species\nrequire('../internals/export')({ target: 'Array', proto: true, forced: FORCED }, {\n  concat: function concat(arg) { // eslint-disable-line no-unused-vars\n    var O = toObject(this);\n    var A = arraySpeciesCreate(O, 0);\n    var n = 0;\n    var i, k, length, len, E;\n    for (i = -1, length = arguments.length; i < length; i++) {\n      E = i === -1 ? O : arguments[i];\n      if (isConcatSpreadable(E)) {\n        len = toLength(E.length);\n        if (n + len > MAX_SAFE_INTEGER) throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);\n        for (k = 0; k < len; k++, n++) if (k in E) createProperty(A, n, E[k]);\n      } else {\n        if (n >= MAX_SAFE_INTEGER) throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);\n        createProperty(A, n++, E);\n      }\n    }\n    A.length = n;\n    return A;\n  }\n});\n","var global = require('../internals/global');\nvar hide = require('../internals/hide');\nvar has = require('../internals/has');\nvar setGlobal = require('../internals/set-global');\nvar nativeFunctionToString = require('../internals/function-to-string');\nvar InternalStateModule = require('../internals/internal-state');\nvar getInternalState = InternalStateModule.get;\nvar enforceInternalState = InternalStateModule.enforce;\nvar TEMPLATE = String(nativeFunctionToString).split('toString');\n\nrequire('../internals/shared')('inspectSource', function (it) {\n  return nativeFunctionToString.call(it);\n});\n\n(module.exports = function (O, key, value, options) {\n  var unsafe = options ? !!options.unsafe : false;\n  var simple = options ? !!options.enumerable : false;\n  var noTargetGet = options ? !!options.noTargetGet : false;\n  if (typeof value == 'function') {\n    if (typeof key == 'string' && !has(value, 'name')) hide(value, 'name', key);\n    enforceInternalState(value).source = TEMPLATE.join(typeof key == 'string' ? key : '');\n  }\n  if (O === global) {\n    if (simple) O[key] = value;\n    else setGlobal(key, value);\n    return;\n  } else if (!unsafe) {\n    delete O[key];\n  } else if (!noTargetGet && O[key]) {\n    simple = true;\n  }\n  if (simple) O[key] = value;\n  else hide(O, key, value);\n// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative\n})(Function.prototype, 'toString', function toString() {\n  return typeof this == 'function' && getInternalState(this).source || nativeFunctionToString.call(this);\n});\n","// IE8- don't enum bug keys\nmodule.exports = [\n  'constructor',\n  'hasOwnProperty',\n  'isPrototypeOf',\n  'propertyIsEnumerable',\n  'toLocaleString',\n  'toString',\n  'valueOf'\n];\n","// 19.1.2.7 / 15.2.3.4 Object.getOwnPropertyNames(O)\nvar internalObjectKeys = require('../internals/object-keys-internal');\nvar hiddenKeys = require('../internals/enum-bug-keys').concat('length', 'prototype');\n\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n  return internalObjectKeys(O, hiddenKeys);\n};\n","exports.f = Object.getOwnPropertySymbols;\n","var getOwnPropertyNamesModule = require('../internals/object-get-own-property-names');\nvar getOwnPropertySymbolsModule = require('../internals/object-get-own-property-symbols');\nvar anObject = require('../internals/an-object');\nvar Reflect = require('../internals/global').Reflect;\n\n// all object keys, includes non-enumerable and symbols\nmodule.exports = Reflect && Reflect.ownKeys || function ownKeys(it) {\n  var keys = getOwnPropertyNamesModule.f(anObject(it));\n  var getOwnPropertySymbols = getOwnPropertySymbolsModule.f;\n  return getOwnPropertySymbols ? keys.concat(getOwnPropertySymbols(it)) : keys;\n};\n","module.exports = function (it) {\n  if (typeof it != 'function') {\n    throw TypeError(String(it) + ' is not a function');\n  } return it;\n};\n","var aFunction = require('../internals/a-function');\n\n// optional / simple context binding\nmodule.exports = function (fn, that, length) {\n  aFunction(fn);\n  if (that === undefined) return fn;\n  switch (length) {\n    case 0: return function () {\n      return fn.call(that);\n    };\n    case 1: return function (a) {\n      return fn.call(that, a);\n    };\n    case 2: return function (a, b) {\n      return fn.call(that, a, b);\n    };\n    case 3: return function (a, b, c) {\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n","var bind = require('../internals/bind-context');\nvar IndexedObject = require('../internals/indexed-object');\nvar toObject = require('../internals/to-object');\nvar toLength = require('../internals/to-length');\nvar arraySpeciesCreate = require('../internals/array-species-create');\n\n// `Array.prototype.{ forEach, map, filter, some, every, find, findIndex }` methods implementation\n// 0 -> Array#forEach\n// https://tc39.github.io/ecma262/#sec-array.prototype.foreach\n// 1 -> Array#map\n// https://tc39.github.io/ecma262/#sec-array.prototype.map\n// 2 -> Array#filter\n// https://tc39.github.io/ecma262/#sec-array.prototype.filter\n// 3 -> Array#some\n// https://tc39.github.io/ecma262/#sec-array.prototype.some\n// 4 -> Array#every\n// https://tc39.github.io/ecma262/#sec-array.prototype.every\n// 5 -> Array#find\n// https://tc39.github.io/ecma262/#sec-array.prototype.find\n// 6 -> Array#findIndex\n// https://tc39.github.io/ecma262/#sec-array.prototype.findIndex\nmodule.exports = function (TYPE, specificCreate) {\n  var IS_MAP = TYPE == 1;\n  var IS_FILTER = TYPE == 2;\n  var IS_SOME = TYPE == 3;\n  var IS_EVERY = TYPE == 4;\n  var IS_FIND_INDEX = TYPE == 6;\n  var NO_HOLES = TYPE == 5 || IS_FIND_INDEX;\n  var create = specificCreate || arraySpeciesCreate;\n  return function ($this, callbackfn, that) {\n    var O = toObject($this);\n    var self = IndexedObject(O);\n    var boundFunction = bind(callbackfn, that, 3);\n    var length = toLength(self.length);\n    var index = 0;\n    var target = IS_MAP ? create($this, length) : IS_FILTER ? create($this, 0) : undefined;\n    var value, result;\n    for (;length > index; index++) if (NO_HOLES || index in self) {\n      value = self[index];\n      result = boundFunction(value, index, O);\n      if (TYPE) {\n        if (IS_MAP) target[index] = result; // map\n        else if (result) switch (TYPE) {\n          case 3: return true;              // some\n          case 5: return value;             // find\n          case 6: return index;             // findIndex\n          case 2: target.push(value);       // filter\n        } else if (IS_EVERY) return false;  // every\n      }\n    }\n    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : target;\n  };\n};\n","'use strict';\nvar fails = require('../internals/fails');\n\nmodule.exports = function (METHOD_NAME, argument) {\n  var method = [][METHOD_NAME];\n  return !method || !fails(function () {\n    // eslint-disable-next-line no-useless-call,no-throw-literal\n    method.call(null, argument || function () { throw 1; }, 1);\n  });\n};\n","'use strict';\nvar internalEvery = require('../internals/array-methods')(4);\n\nvar SLOPPY_METHOD = require('../internals/sloppy-array-method')('every');\n\n// `Array.prototype.every` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.every\nrequire('../internals/export')({ target: 'Array', proto: true, forced: SLOPPY_METHOD }, {\n  every: function every(callbackfn /* , thisArg */) {\n    return internalEvery(this, callbackfn, arguments[1]);\n  }\n});\n","'use strict';\nvar internalFilter = require('../internals/array-methods')(2);\n\nvar SPECIES_SUPPORT = require('../internals/array-method-has-species-support')('filter');\n\n// `Array.prototype.filter` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.filter\n// with adding support of @@species\nrequire('../internals/export')({ target: 'Array', proto: true, forced: !SPECIES_SUPPORT }, {\n  filter: function filter(callbackfn /* , thisArg */) {\n    return internalFilter(this, callbackfn, arguments[1]);\n  }\n});\n","'use strict';\nvar nativeForEach = [].forEach;\nvar internalForEach = require('../internals/array-methods')(0);\n\nvar SLOPPY_METHOD = require('../internals/sloppy-array-method')('forEach');\n\n// `Array.prototype.forEach` method implementation\n// https://tc39.github.io/ecma262/#sec-array.prototype.foreach\nmodule.exports = SLOPPY_METHOD ? function forEach(callbackfn /* , thisArg */) {\n  return internalForEach(this, callbackfn, arguments[1]);\n} : nativeForEach;\n","'use strict';\nvar forEach = require('../internals/array-for-each');\n\n// `Array.prototype.forEach` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.foreach\nrequire('../internals/export')({ target: 'Array', proto: true, forced: [].forEach != forEach }, { forEach: forEach });\n","'use strict';\nvar internalIndexOf = require('../internals/array-includes')(false);\nvar nativeIndexOf = [].indexOf;\n\nvar NEGATIVE_ZERO = !!nativeIndexOf && 1 / [1].indexOf(1, -0) < 0;\nvar SLOPPY_METHOD = require('../internals/sloppy-array-method')('indexOf');\n\n// `Array.prototype.indexOf` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.indexof\nrequire('../internals/export')({ target: 'Array', proto: true, forced: NEGATIVE_ZERO || SLOPPY_METHOD }, {\n  indexOf: function indexOf(searchElement /* , fromIndex = 0 */) {\n    return NEGATIVE_ZERO\n      // convert -0 to +0\n      ? nativeIndexOf.apply(this, arguments) || 0\n      : internalIndexOf(this, searchElement, arguments[1]);\n  }\n});\n","// `Array.isArray` method\n// https://tc39.github.io/ecma262/#sec-array.isarray\nrequire('../internals/export')({ target: 'Array', stat: true }, { isArray: require('../internals/is-array') });\n","// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\nvar anObject = require('../internals/an-object');\nvar defineProperties = require('../internals/object-define-properties');\nvar enumBugKeys = require('../internals/enum-bug-keys');\nvar html = require('../internals/html');\nvar documentCreateElement = require('../internals/document-create-element');\nvar IE_PROTO = require('../internals/shared-key')('IE_PROTO');\nvar PROTOTYPE = 'prototype';\nvar Empty = function () { /* empty */ };\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar createDict = function () {\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = documentCreateElement('iframe');\n  var length = enumBugKeys.length;\n  var lt = '<';\n  var script = 'script';\n  var gt = '>';\n  var js = 'java' + script + ':';\n  var iframeDocument;\n  iframe.style.display = 'none';\n  html.appendChild(iframe);\n  iframe.src = String(js);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(lt + script + gt + 'document.F=Object' + lt + '/' + script + gt);\n  iframeDocument.close();\n  createDict = iframeDocument.F;\n  while (length--) delete createDict[PROTOTYPE][enumBugKeys[length]];\n  return createDict();\n};\n\nmodule.exports = Object.create || function create(O, Properties) {\n  var result;\n  if (O !== null) {\n    Empty[PROTOTYPE] = anObject(O);\n    result = new Empty();\n    Empty[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = createDict();\n  return Properties === undefined ? result : defineProperties(result, Properties);\n};\n\nrequire('../internals/hidden-keys')[IE_PROTO] = true;\n","// 19.1.2.14 / 15.2.3.14 Object.keys(O)\nvar internalObjectKeys = require('../internals/object-keys-internal');\nvar enumBugKeys = require('../internals/enum-bug-keys');\n\nmodule.exports = Object.keys || function keys(O) {\n  return internalObjectKeys(O, enumBugKeys);\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar definePropertyModule = require('../internals/object-define-property');\nvar anObject = require('../internals/an-object');\nvar objectKeys = require('../internals/object-keys');\n\nmodule.exports = DESCRIPTORS ? Object.defineProperties : function defineProperties(O, Properties) {\n  anObject(O);\n  var keys = objectKeys(Properties);\n  var length = keys.length;\n  var i = 0;\n  var key;\n  while (length > i) definePropertyModule.f(O, key = keys[i++], Properties[key]);\n  return O;\n};\n","var document = require('../internals/global').document;\n\nmodule.exports = document && document.documentElement;\n","var UNSCOPABLES = require('../internals/well-known-symbol')('unscopables');\nvar create = require('../internals/object-create');\nvar hide = require('../internals/hide');\nvar ArrayPrototype = Array.prototype;\n\n// Array.prototype[@@unscopables]\n// https://tc39.github.io/ecma262/#sec-array.prototype-@@unscopables\nif (ArrayPrototype[UNSCOPABLES] == undefined) {\n  hide(ArrayPrototype, UNSCOPABLES, create(null));\n}\n\n// add a key to Array.prototype[@@unscopables]\nmodule.exports = function (key) {\n  ArrayPrototype[UNSCOPABLES][key] = true;\n};\n","'use strict';\nvar getPrototypeOf = require('../internals/object-get-prototype-of');\nvar hide = require('../internals/hide');\nvar has = require('../internals/has');\nvar IS_PURE = require('../internals/is-pure');\nvar ITERATOR = require('../internals/well-known-symbol')('iterator');\nvar BUGGY_SAFARI_ITERATORS = false;\n\nvar returnThis = function () { return this; };\n\n// `%IteratorPrototype%` object\n// https://tc39.github.io/ecma262/#sec-%iteratorprototype%-object\nvar IteratorPrototype, PrototypeOfArrayIteratorPrototype, arrayIterator;\n\nif ([].keys) {\n  arrayIterator = [].keys();\n  // Safari 8 has buggy iterators w/o `next`\n  if (!('next' in arrayIterator)) BUGGY_SAFARI_ITERATORS = true;\n  else {\n    PrototypeOfArrayIteratorPrototype = getPrototypeOf(getPrototypeOf(arrayIterator));\n    if (PrototypeOfArrayIteratorPrototype !== Object.prototype) IteratorPrototype = PrototypeOfArrayIteratorPrototype;\n  }\n}\n\nif (IteratorPrototype == undefined) IteratorPrototype = {};\n\n// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()\nif (!IS_PURE && !has(IteratorPrototype, ITERATOR)) hide(IteratorPrototype, ITERATOR, returnThis);\n\nmodule.exports = {\n  IteratorPrototype: IteratorPrototype,\n  BUGGY_SAFARI_ITERATORS: BUGGY_SAFARI_ITERATORS\n};\n","module.exports = {};\n","module.exports = !require('../internals/fails')(function () {\n  function F() { /* empty */ }\n  F.prototype.constructor = null;\n  return Object.getPrototypeOf(new F()) !== F.prototype;\n});\n","// 19.1.2.9 / 15.2.3.2 Object.getPrototypeOf(O)\nvar has = require('../internals/has');\nvar toObject = require('../internals/to-object');\nvar IE_PROTO = require('../internals/shared-key')('IE_PROTO');\nvar CORRECT_PROTOTYPE_GETTER = require('../internals/correct-prototype-getter');\nvar ObjectPrototype = Object.prototype;\n\nmodule.exports = CORRECT_PROTOTYPE_GETTER ? Object.getPrototypeOf : function (O) {\n  O = toObject(O);\n  if (has(O, IE_PROTO)) return O[IE_PROTO];\n  if (typeof O.constructor == 'function' && O instanceof O.constructor) {\n    return O.constructor.prototype;\n  } return O instanceof Object ? ObjectPrototype : null;\n};\n","var defineProperty = require('../internals/object-define-property').f;\nvar has = require('../internals/has');\nvar TO_STRING_TAG = require('../internals/well-known-symbol')('toStringTag');\n\nmodule.exports = function (it, TAG, STATIC) {\n  if (it && !has(it = STATIC ? it : it.prototype, TO_STRING_TAG)) {\n    defineProperty(it, TO_STRING_TAG, { configurable: true, value: TAG });\n  }\n};\n","'use strict';\nvar IteratorPrototype = require('../internals/iterators-core').IteratorPrototype;\nvar create = require('../internals/object-create');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar setToStringTag = require('../internals/set-to-string-tag');\nvar Iterators = require('../internals/iterators');\n\nvar returnThis = function () { return this; };\n\nmodule.exports = function (IteratorConstructor, NAME, next) {\n  var TO_STRING_TAG = NAME + ' Iterator';\n  IteratorConstructor.prototype = create(IteratorPrototype, { next: createPropertyDescriptor(1, next) });\n  setToStringTag(IteratorConstructor, TO_STRING_TAG, false, true);\n  Iterators[TO_STRING_TAG] = returnThis;\n  return IteratorConstructor;\n};\n","'use strict';\nvar $export = require('../internals/export');\nvar createIteratorConstructor = require('../internals/create-iterator-constructor');\nvar getPrototypeOf = require('../internals/object-get-prototype-of');\nvar setPrototypeOf = require('../internals/object-set-prototype-of');\nvar setToStringTag = require('../internals/set-to-string-tag');\nvar hide = require('../internals/hide');\nvar redefine = require('../internals/redefine');\nvar IS_PURE = require('../internals/is-pure');\nvar ITERATOR = require('../internals/well-known-symbol')('iterator');\nvar Iterators = require('../internals/iterators');\nvar IteratorsCore = require('../internals/iterators-core');\nvar IteratorPrototype = IteratorsCore.IteratorPrototype;\nvar BUGGY_SAFARI_ITERATORS = IteratorsCore.BUGGY_SAFARI_ITERATORS;\nvar KEYS = 'keys';\nvar VALUES = 'values';\nvar ENTRIES = 'entries';\n\nvar returnThis = function () { return this; };\n\nmodule.exports = function (Iterable, NAME, IteratorConstructor, next, DEFAULT, IS_SET, FORCED) {\n  createIteratorConstructor(IteratorConstructor, NAME, next);\n\n  var getIterationMethod = function (KIND) {\n    if (KIND === DEFAULT && defaultIterator) return defaultIterator;\n    if (!BUGGY_SAFARI_ITERATORS && KIND in IterablePrototype) return IterablePrototype[KIND];\n    switch (KIND) {\n      case KEYS: return function keys() { return new IteratorConstructor(this, KIND); };\n      case VALUES: return function values() { return new IteratorConstructor(this, KIND); };\n      case ENTRIES: return function entries() { return new IteratorConstructor(this, KIND); };\n    } return function () { return new IteratorConstructor(this); };\n  };\n\n  var TO_STRING_TAG = NAME + ' Iterator';\n  var INCORRECT_VALUES_NAME = false;\n  var IterablePrototype = Iterable.prototype;\n  var nativeIterator = IterablePrototype[ITERATOR]\n    || IterablePrototype['@@iterator']\n    || DEFAULT && IterablePrototype[DEFAULT];\n  var defaultIterator = !BUGGY_SAFARI_ITERATORS && nativeIterator || getIterationMethod(DEFAULT);\n  var anyNativeIterator = NAME == 'Array' ? IterablePrototype.entries || nativeIterator : nativeIterator;\n  var CurrentIteratorPrototype, methods, KEY;\n\n  // fix native\n  if (anyNativeIterator) {\n    CurrentIteratorPrototype = getPrototypeOf(anyNativeIterator.call(new Iterable()));\n    if (IteratorPrototype !== Object.prototype && CurrentIteratorPrototype.next) {\n      if (!IS_PURE && getPrototypeOf(CurrentIteratorPrototype) !== IteratorPrototype) {\n        if (setPrototypeOf) {\n          setPrototypeOf(CurrentIteratorPrototype, IteratorPrototype);\n        } else if (typeof CurrentIteratorPrototype[ITERATOR] != 'function') {\n          hide(CurrentIteratorPrototype, ITERATOR, returnThis);\n        }\n      }\n      // Set @@toStringTag to native iterators\n      setToStringTag(CurrentIteratorPrototype, TO_STRING_TAG, true, true);\n      if (IS_PURE) Iterators[TO_STRING_TAG] = returnThis;\n    }\n  }\n\n  // fix Array#{values, @@iterator}.name in V8 / FF\n  if (DEFAULT == VALUES && nativeIterator && nativeIterator.name !== VALUES) {\n    INCORRECT_VALUES_NAME = true;\n    defaultIterator = function values() { return nativeIterator.call(this); };\n  }\n\n  // define iterator\n  if ((!IS_PURE || FORCED) && IterablePrototype[ITERATOR] !== defaultIterator) {\n    hide(IterablePrototype, ITERATOR, defaultIterator);\n  }\n  Iterators[NAME] = defaultIterator;\n\n  // export additional methods\n  if (DEFAULT) {\n    methods = {\n      values: getIterationMethod(VALUES),\n      keys: IS_SET ? defaultIterator : getIterationMethod(KEYS),\n      entries: getIterationMethod(ENTRIES)\n    };\n    if (FORCED) for (KEY in methods) {\n      if (BUGGY_SAFARI_ITERATORS || INCORRECT_VALUES_NAME || !(KEY in IterablePrototype)) {\n        redefine(IterablePrototype, KEY, methods[KEY]);\n      }\n    } else $export({ target: NAME, proto: true, forced: BUGGY_SAFARI_ITERATORS || INCORRECT_VALUES_NAME }, methods);\n  }\n\n  return methods;\n};\n","// Works with __proto__ only. Old v8 can't work with null proto objects.\n/* eslint-disable no-proto */\nvar validateSetPrototypeOfArguments = require('../internals/validate-set-prototype-of-arguments');\n\nmodule.exports = Object.setPrototypeOf || ('__proto__' in {} ? function () {\n  var correctSetter = false;\n  var test = {};\n  var setter;\n  try {\n    setter = Object.getOwnPropertyDescriptor(Object.prototype, '__proto__').set;\n    setter.call(test, []);\n    correctSetter = test instanceof Array;\n  } catch (error) { /* empty */ }\n  return function setPrototypeOf(O, proto) {\n    validateSetPrototypeOfArguments(O, proto);\n    if (correctSetter) setter.call(O, proto);\n    else O.__proto__ = proto;\n    return O;\n  };\n}() : undefined);\n","var isObject = require('../internals/is-object');\nvar anObject = require('../internals/an-object');\n\nmodule.exports = function (O, proto) {\n  anObject(O);\n  if (!isObject(proto) && proto !== null) {\n    throw TypeError(\"Can't set \" + String(proto) + ' as a prototype');\n  }\n};\n","'use strict';\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar addToUnscopables = require('../internals/add-to-unscopables');\nvar Iterators = require('../internals/iterators');\nvar InternalStateModule = require('../internals/internal-state');\nvar defineIterator = require('../internals/define-iterator');\nvar ARRAY_ITERATOR = 'Array Iterator';\nvar setInternalState = InternalStateModule.set;\nvar getInternalState = InternalStateModule.getterFor(ARRAY_ITERATOR);\n\n// `Array.prototype.entries` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.entries\n// `Array.prototype.keys` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.keys\n// `Array.prototype.values` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.values\n// `Array.prototype[@@iterator]` method\n// https://tc39.github.io/ecma262/#sec-array.prototype-@@iterator\n// `CreateArrayIterator` internal method\n// https://tc39.github.io/ecma262/#sec-createarrayiterator\nmodule.exports = defineIterator(Array, 'Array', function (iterated, kind) {\n  setInternalState(this, {\n    type: ARRAY_ITERATOR,\n    target: toIndexedObject(iterated), // target\n    index: 0,                          // next index\n    kind: kind                         // kind\n  });\n// `%ArrayIteratorPrototype%.next` method\n// https://tc39.github.io/ecma262/#sec-%arrayiteratorprototype%.next\n}, function () {\n  var state = getInternalState(this);\n  var target = state.target;\n  var kind = state.kind;\n  var index = state.index++;\n  if (!target || index >= target.length) {\n    state.target = undefined;\n    return { value: undefined, done: true };\n  }\n  if (kind == 'keys') return { value: index, done: false };\n  if (kind == 'values') return { value: target[index], done: false };\n  return { value: [index, target[index]], done: false };\n}, 'values');\n\n// argumentsList[@@iterator] is %ArrayProto_values%\n// https://tc39.github.io/ecma262/#sec-createunmappedargumentsobject\n// https://tc39.github.io/ecma262/#sec-createmappedargumentsobject\nIterators.Arguments = Iterators.Array;\n\n// https://tc39.github.io/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('keys');\naddToUnscopables('values');\naddToUnscopables('entries');\n","'use strict';\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar nativeJoin = [].join;\n\nvar ES3_STRINGS = require('../internals/indexed-object') != Object;\nvar SLOPPY_METHOD = require('../internals/sloppy-array-method')('join', ',');\n\n// `Array.prototype.join` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.join\nrequire('../internals/export')({ target: 'Array', proto: true, forced: ES3_STRINGS || SLOPPY_METHOD }, {\n  join: function join(separator) {\n    return nativeJoin.call(toIndexedObject(this), separator === undefined ? ',' : separator);\n  }\n});\n","'use strict';\nvar internalMap = require('../internals/array-methods')(1);\n\nvar SPECIES_SUPPORT = require('../internals/array-method-has-species-support')('map');\n\n// `Array.prototype.map` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.map\n// with adding support of @@species\nrequire('../internals/export')({ target: 'Array', proto: true, forced: !SPECIES_SUPPORT }, {\n  map: function map(callbackfn /* , thisArg */) {\n    return internalMap(this, callbackfn, arguments[1]);\n  }\n});\n","'use strict';\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar toInteger = require('../internals/to-integer');\nvar toLength = require('../internals/to-length');\nvar toObject = require('../internals/to-object');\nvar arraySpeciesCreate = require('../internals/array-species-create');\nvar createProperty = require('../internals/create-property');\nvar max = Math.max;\nvar min = Math.min;\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF;\nvar MAXIMUM_ALLOWED_LENGTH_EXCEEDED = 'Maximum allowed length exceeded';\n\nvar SPECIES_SUPPORT = require('../internals/array-method-has-species-support')('splice');\n\n// `Array.prototype.splice` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.splice\n// with adding support of @@species\nrequire('../internals/export')({ target: 'Array', proto: true, forced: !SPECIES_SUPPORT }, {\n  splice: function splice(start, deleteCount /* , ...items */) {\n    var O = toObject(this);\n    var len = toLength(O.length);\n    var actualStart = toAbsoluteIndex(start, len);\n    var argumentsLength = arguments.length;\n    var insertCount, actualDeleteCount, A, k, from, to;\n    if (argumentsLength === 0) {\n      insertCount = actualDeleteCount = 0;\n    } else if (argumentsLength === 1) {\n      insertCount = 0;\n      actualDeleteCount = len - actualStart;\n    } else {\n      insertCount = argumentsLength - 2;\n      actualDeleteCount = min(max(toInteger(deleteCount), 0), len - actualStart);\n    }\n    if (len + insertCount - actualDeleteCount > MAX_SAFE_INTEGER) {\n      throw TypeError(MAXIMUM_ALLOWED_LENGTH_EXCEEDED);\n    }\n    A = arraySpeciesCreate(O, actualDeleteCount);\n    for (k = 0; k < actualDeleteCount; k++) {\n      from = actualStart + k;\n      if (from in O) createProperty(A, k, O[from]);\n    }\n    A.length = actualDeleteCount;\n    if (insertCount < actualDeleteCount) {\n      for (k = actualStart; k < len - actualDeleteCount; k++) {\n        from = k + actualDeleteCount;\n        to = k + insertCount;\n        if (from in O) O[to] = O[from];\n        else delete O[to];\n      }\n      for (k = len; k > len - actualDeleteCount + insertCount; k--) delete O[k - 1];\n    } else if (insertCount > actualDeleteCount) {\n      for (k = len - actualDeleteCount; k > actualStart; k--) {\n        from = k + actualDeleteCount - 1;\n        to = k + insertCount - 1;\n        if (from in O) O[to] = O[from];\n        else delete O[to];\n      }\n    }\n    for (k = 0; k < insertCount; k++) {\n      O[k + actualStart] = arguments[k + 2];\n    }\n    O.length = len - actualDeleteCount + insertCount;\n    return A;\n  }\n});\n","'use strict';\nvar aFunction = require('../internals/a-function');\nvar isObject = require('../internals/is-object');\nvar arraySlice = [].slice;\nvar factories = {};\n\nvar construct = function (C, argsLength, args) {\n  if (!(argsLength in factories)) {\n    for (var list = [], i = 0; i < argsLength; i++) list[i] = 'a[' + i + ']';\n    // eslint-disable-next-line no-new-func\n    factories[argsLength] = Function('C,a', 'return new C(' + list.join(',') + ')');\n  } return factories[argsLength](C, args);\n};\n\n// `Function.prototype.bind` method implementation\n// https://tc39.github.io/ecma262/#sec-function.prototype.bind\nmodule.exports = Function.bind || function bind(that /* , ...args */) {\n  var fn = aFunction(this);\n  var partArgs = arraySlice.call(arguments, 1);\n  var boundFunction = function bound(/* args... */) {\n    var args = partArgs.concat(arraySlice.call(arguments));\n    return this instanceof boundFunction ? construct(fn, args.length, args) : fn.apply(that, args);\n  };\n  if (isObject(fn.prototype)) boundFunction.prototype = fn.prototype;\n  return boundFunction;\n};\n","// `Function.prototype.bind` method\n// https://tc39.github.io/ecma262/#sec-function.prototype.bind\nrequire('../internals/export')({ target: 'Function', proto: true }, {\n  bind: require('../internals/function-bind')\n});\n","var classofRaw = require('../internals/classof-raw');\nvar TO_STRING_TAG = require('../internals/well-known-symbol')('toStringTag');\n// ES3 wrong here\nvar CORRECT_ARGUMENTS = classofRaw(function () { return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (error) { /* empty */ }\n};\n\n// getting tag from ES6+ `Object.prototype.toString`\nmodule.exports = function (it) {\n  var O, tag, result;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (tag = tryGet(O = Object(it), TO_STRING_TAG)) == 'string' ? tag\n    // builtinTag case\n    : CORRECT_ARGUMENTS ? classofRaw(O)\n    // ES3 arguments fallback\n    : (result = classofRaw(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : result;\n};\n","var anObject = require('../internals/an-object');\n\n// call something on iterator step with safe closing on error\nmodule.exports = function (iterator, fn, value, ENTRIES) {\n  try {\n    return ENTRIES ? fn(anObject(value)[0], value[1]) : fn(value);\n  // 7.4.6 IteratorClose(iterator, completion)\n  } catch (error) {\n    var returnMethod = iterator['return'];\n    if (returnMethod !== undefined) anObject(returnMethod.call(iterator));\n    throw error;\n  }\n};\n","module.exports = function (it, Constructor, name) {\n  if (!(it instanceof Constructor)) {\n    throw TypeError('Incorrect ' + (name ? name + ' ' : '') + 'invocation');\n  } return it;\n};\n","module.exports = !require('../internals/fails')(function () {\n  return Object.isExtensible(Object.preventExtensions({}));\n});\n","var METADATA = require('../internals/uid')('meta');\nvar FREEZING = require('../internals/freezing');\nvar isObject = require('../internals/is-object');\nvar has = require('../internals/has');\nvar defineProperty = require('../internals/object-define-property').f;\nvar id = 0;\n\nvar isExtensible = Object.isExtensible || function () {\n  return true;\n};\n\nvar setMetadata = function (it) {\n  defineProperty(it, METADATA, { value: {\n    objectID: 'O' + ++id, // object ID\n    weakData: {}          // weak collections IDs\n  } });\n};\n\nvar fastKey = function (it, create) {\n  // return a primitive with prefix\n  if (!isObject(it)) return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;\n  if (!has(it, METADATA)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return 'F';\n    // not necessary to add metadata\n    if (!create) return 'E';\n    // add missing metadata\n    setMetadata(it);\n  // return object ID\n  } return it[METADATA].objectID;\n};\n\nvar getWeakData = function (it, create) {\n  if (!has(it, METADATA)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return true;\n    // not necessary to add metadata\n    if (!create) return false;\n    // add missing metadata\n    setMetadata(it);\n  // return the store of weak collections IDs\n  } return it[METADATA].weakData;\n};\n\n// add metadata on freeze-family methods calling\nvar onFreeze = function (it) {\n  if (FREEZING && meta.REQUIRED && isExtensible(it) && !has(it, METADATA)) setMetadata(it);\n  return it;\n};\n\nvar meta = module.exports = {\n  REQUIRED: false,\n  fastKey: fastKey,\n  getWeakData: getWeakData,\n  onFreeze: onFreeze\n};\n\nrequire('../internals/hidden-keys')[METADATA] = true;\n","// check on default Array iterator\nvar Iterators = require('../internals/iterators');\nvar ITERATOR = require('../internals/well-known-symbol')('iterator');\nvar ArrayPrototype = Array.prototype;\n\nmodule.exports = function (it) {\n  return it !== undefined && (Iterators.Array === it || ArrayPrototype[ITERATOR] === it);\n};\n","var classof = require('../internals/classof');\nvar ITERATOR = require('../internals/well-known-symbol')('iterator');\nvar Iterators = require('../internals/iterators');\n\nmodule.exports = function (it) {\n  if (it != undefined) return it[ITERATOR]\n    || it['@@iterator']\n    || Iterators[classof(it)];\n};\n","var anObject = require('../internals/an-object');\nvar isArrayIteratorMethod = require('../internals/is-array-iterator-method');\nvar toLength = require('../internals/to-length');\nvar bind = require('../internals/bind-context');\nvar getIteratorMethod = require('../internals/get-iterator-method');\nvar callWithSafeIterationClosing = require('../internals/call-with-safe-iteration-closing');\nvar BREAK = {};\n\nvar exports = module.exports = function (iterable, fn, that, ENTRIES, ITERATOR) {\n  var boundFunction = bind(fn, that, ENTRIES ? 2 : 1);\n  var iterator, iterFn, index, length, result, step;\n\n  if (ITERATOR) {\n    iterator = iterable;\n  } else {\n    iterFn = getIteratorMethod(iterable);\n    if (typeof iterFn != 'function') throw TypeError('Target is not iterable');\n    // optimisation for array iterators\n    if (isArrayIteratorMethod(iterFn)) {\n      for (index = 0, length = toLength(iterable.length); length > index; index++) {\n        result = ENTRIES ? boundFunction(anObject(step = iterable[index])[0], step[1]) : boundFunction(iterable[index]);\n        if (result === BREAK) return BREAK;\n      } return;\n    }\n    iterator = iterFn.call(iterable);\n  }\n\n  while (!(step = iterator.next()).done) {\n    if (callWithSafeIterationClosing(iterator, boundFunction, step.value, ENTRIES) === BREAK) return BREAK;\n  }\n};\n\nexports.BREAK = BREAK;\n","var ITERATOR = require('../internals/well-known-symbol')('iterator');\nvar SAFE_CLOSING = false;\n\ntry {\n  var called = 0;\n  var iteratorWithReturn = {\n    next: function () {\n      return { done: !!called++ };\n    },\n    'return': function () {\n      SAFE_CLOSING = true;\n    }\n  };\n  iteratorWithReturn[ITERATOR] = function () {\n    return this;\n  };\n  // eslint-disable-next-line no-throw-literal\n  Array.from(iteratorWithReturn, function () { throw 2; });\n} catch (error) { /* empty */ }\n\nmodule.exports = function (exec, SKIP_CLOSING) {\n  if (!SKIP_CLOSING && !SAFE_CLOSING) return false;\n  var ITERATION_SUPPORT = false;\n  try {\n    var object = {};\n    object[ITERATOR] = function () {\n      return {\n        next: function () {\n          return { done: ITERATION_SUPPORT = true };\n        }\n      };\n    };\n    exec(object);\n  } catch (error) { /* empty */ }\n  return ITERATION_SUPPORT;\n};\n","var redefine = require('../internals/redefine');\n\nmodule.exports = function (target, src, options) {\n  for (var key in src) redefine(target, key, src[key], options);\n  return target;\n};\n","var path = require('../internals/path');\nvar global = require('../internals/global');\n\nvar aFunction = function (variable) {\n  return typeof variable == 'function' ? variable : undefined;\n};\n\nmodule.exports = function (namespace, method) {\n  return arguments.length < 2 ? aFunction(path[namespace]) || aFunction(global[namespace])\n    : path[namespace] && path[namespace][method] || global[namespace] && global[namespace][method];\n};\n","'use strict';\nvar getBuiltIn = require('../internals/get-built-in');\nvar definePropertyModule = require('../internals/object-define-property');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar SPECIES = require('../internals/well-known-symbol')('species');\n\nmodule.exports = function (CONSTRUCTOR_NAME) {\n  var C = getBuiltIn(CONSTRUCTOR_NAME);\n  var defineProperty = definePropertyModule.f;\n  if (DESCRIPTORS && C && !C[SPECIES]) defineProperty(C, SPECIES, {\n    configurable: true,\n    get: function () { return this; }\n  });\n};\n","module.exports = require('../internals/global');\n","'use strict';\nvar defineProperty = require('../internals/object-define-property').f;\nvar create = require('../internals/object-create');\nvar redefineAll = require('../internals/redefine-all');\nvar bind = require('../internals/bind-context');\nvar anInstance = require('../internals/an-instance');\nvar iterate = require('../internals/iterate');\nvar defineIterator = require('../internals/define-iterator');\nvar setSpecies = require('../internals/set-species');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar fastKey = require('../internals/internal-metadata').fastKey;\nvar InternalStateModule = require('../internals/internal-state');\nvar setInternalState = InternalStateModule.set;\nvar internalStateGetterFor = InternalStateModule.getterFor;\n\nmodule.exports = {\n  getConstructor: function (wrapper, CONSTRUCTOR_NAME, IS_MAP, ADDER) {\n    var C = wrapper(function (that, iterable) {\n      anInstance(that, C, CONSTRUCTOR_NAME);\n      setInternalState(that, {\n        type: CONSTRUCTOR_NAME,\n        index: create(null),\n        first: undefined,\n        last: undefined,\n        size: 0\n      });\n      if (!DESCRIPTORS) that.size = 0;\n      if (iterable != undefined) iterate(iterable, that[ADDER], that, IS_MAP);\n    });\n\n    var getInternalState = internalStateGetterFor(CONSTRUCTOR_NAME);\n\n    var define = function (that, key, value) {\n      var state = getInternalState(that);\n      var entry = getEntry(that, key);\n      var previous, index;\n      // change existing entry\n      if (entry) {\n        entry.value = value;\n      // create new entry\n      } else {\n        state.last = entry = {\n          index: index = fastKey(key, true),\n          key: key,\n          value: value,\n          previous: previous = state.last,\n          next: undefined,\n          removed: false\n        };\n        if (!state.first) state.first = entry;\n        if (previous) previous.next = entry;\n        if (DESCRIPTORS) state.size++;\n        else that.size++;\n        // add to index\n        if (index !== 'F') state.index[index] = entry;\n      } return that;\n    };\n\n    var getEntry = function (that, key) {\n      var state = getInternalState(that);\n      // fast case\n      var index = fastKey(key);\n      var entry;\n      if (index !== 'F') return state.index[index];\n      // frozen object case\n      for (entry = state.first; entry; entry = entry.next) {\n        if (entry.key == key) return entry;\n      }\n    };\n\n    redefineAll(C.prototype, {\n      // 23.1.3.1 Map.prototype.clear()\n      // 23.2.3.2 Set.prototype.clear()\n      clear: function clear() {\n        var that = this;\n        var state = getInternalState(that);\n        var data = state.index;\n        var entry = state.first;\n        while (entry) {\n          entry.removed = true;\n          if (entry.previous) entry.previous = entry.previous.next = undefined;\n          delete data[entry.index];\n          entry = entry.next;\n        }\n        state.first = state.last = undefined;\n        if (DESCRIPTORS) state.size = 0;\n        else that.size = 0;\n      },\n      // 23.1.3.3 Map.prototype.delete(key)\n      // 23.2.3.4 Set.prototype.delete(value)\n      'delete': function (key) {\n        var that = this;\n        var state = getInternalState(that);\n        var entry = getEntry(that, key);\n        if (entry) {\n          var next = entry.next;\n          var prev = entry.previous;\n          delete state.index[entry.index];\n          entry.removed = true;\n          if (prev) prev.next = next;\n          if (next) next.previous = prev;\n          if (state.first == entry) state.first = next;\n          if (state.last == entry) state.last = prev;\n          if (DESCRIPTORS) state.size--;\n          else that.size--;\n        } return !!entry;\n      },\n      // 23.2.3.6 Set.prototype.forEach(callbackfn, thisArg = undefined)\n      // 23.1.3.5 Map.prototype.forEach(callbackfn, thisArg = undefined)\n      forEach: function forEach(callbackfn /* , that = undefined */) {\n        var state = getInternalState(this);\n        var boundFunction = bind(callbackfn, arguments.length > 1 ? arguments[1] : undefined, 3);\n        var entry;\n        while (entry = entry ? entry.next : state.first) {\n          boundFunction(entry.value, entry.key, this);\n          // revert to the last existing entry\n          while (entry && entry.removed) entry = entry.previous;\n        }\n      },\n      // 23.1.3.7 Map.prototype.has(key)\n      // 23.2.3.7 Set.prototype.has(value)\n      has: function has(key) {\n        return !!getEntry(this, key);\n      }\n    });\n\n    redefineAll(C.prototype, IS_MAP ? {\n      // 23.1.3.6 Map.prototype.get(key)\n      get: function get(key) {\n        var entry = getEntry(this, key);\n        return entry && entry.value;\n      },\n      // 23.1.3.9 Map.prototype.set(key, value)\n      set: function set(key, value) {\n        return define(this, key === 0 ? 0 : key, value);\n      }\n    } : {\n      // 23.2.3.1 Set.prototype.add(value)\n      add: function add(value) {\n        return define(this, value = value === 0 ? 0 : value, value);\n      }\n    });\n    if (DESCRIPTORS) defineProperty(C.prototype, 'size', {\n      get: function () {\n        return getInternalState(this).size;\n      }\n    });\n    return C;\n  },\n  setStrong: function (C, CONSTRUCTOR_NAME, IS_MAP) {\n    var ITERATOR_NAME = CONSTRUCTOR_NAME + ' Iterator';\n    var getInternalCollectionState = internalStateGetterFor(CONSTRUCTOR_NAME);\n    var getInternalIteratorState = internalStateGetterFor(ITERATOR_NAME);\n    // add .keys, .values, .entries, [@@iterator]\n    // 23.1.3.4, 23.1.3.8, 23.1.3.11, 23.1.3.12, 23.2.3.5, 23.2.3.8, 23.2.3.10, 23.2.3.11\n    defineIterator(C, CONSTRUCTOR_NAME, function (iterated, kind) {\n      setInternalState(this, {\n        type: ITERATOR_NAME,\n        target: iterated,\n        state: getInternalCollectionState(iterated),\n        kind: kind,\n        last: undefined\n      });\n    }, function () {\n      var state = getInternalIteratorState(this);\n      var kind = state.kind;\n      var entry = state.last;\n      // revert to the last existing entry\n      while (entry && entry.removed) entry = entry.previous;\n      // get next entry\n      if (!state.target || !(state.last = entry = entry ? entry.next : state.state.first)) {\n        // or finish the iteration\n        state.target = undefined;\n        return { value: undefined, done: true };\n      }\n      // return step by kind\n      if (kind == 'keys') return { value: entry.key, done: false };\n      if (kind == 'values') return { value: entry.value, done: false };\n      return { value: [entry.key, entry.value], done: false };\n    }, IS_MAP ? 'entries' : 'values', !IS_MAP, true);\n\n    // add [@@species], 23.1.2.2, 23.2.2.2\n    setSpecies(CONSTRUCTOR_NAME);\n  }\n};\n","'use strict';\nvar global = require('../internals/global');\nvar isForced = require('../internals/is-forced');\nvar $export = require('../internals/export');\nvar redefine = require('../internals/redefine');\nvar InternalMetadataModule = require('../internals/internal-metadata');\nvar iterate = require('../internals/iterate');\nvar anInstance = require('../internals/an-instance');\nvar isObject = require('../internals/is-object');\nvar fails = require('../internals/fails');\nvar checkCorrectnessOfIteration = require('../internals/check-correctness-of-iteration');\nvar setToStringTag = require('../internals/set-to-string-tag');\nvar inheritIfRequired = require('../internals/inherit-if-required');\n\nmodule.exports = function (CONSTRUCTOR_NAME, wrapper, common, IS_MAP, IS_WEAK) {\n  var NativeConstructor = global[CONSTRUCTOR_NAME];\n  var NativePrototype = NativeConstructor && NativeConstructor.prototype;\n  var Constructor = NativeConstructor;\n  var ADDER = IS_MAP ? 'set' : 'add';\n  var exported = {};\n\n  var fixMethod = function (KEY) {\n    var nativeMethod = NativePrototype[KEY];\n    redefine(NativePrototype, KEY,\n      KEY == 'add' ? function add(a) {\n        nativeMethod.call(this, a === 0 ? 0 : a);\n        return this;\n      } : KEY == 'delete' ? function (a) {\n        return IS_WEAK && !isObject(a) ? false : nativeMethod.call(this, a === 0 ? 0 : a);\n      } : KEY == 'get' ? function get(a) {\n        return IS_WEAK && !isObject(a) ? undefined : nativeMethod.call(this, a === 0 ? 0 : a);\n      } : KEY == 'has' ? function has(a) {\n        return IS_WEAK && !isObject(a) ? false : nativeMethod.call(this, a === 0 ? 0 : a);\n      } : function set(a, b) {\n        nativeMethod.call(this, a === 0 ? 0 : a, b);\n        return this;\n      }\n    );\n  };\n\n  // eslint-disable-next-line max-len\n  if (isForced(CONSTRUCTOR_NAME, typeof NativeConstructor != 'function' || !(IS_WEAK || NativePrototype.forEach && !fails(function () {\n    new NativeConstructor().entries().next();\n  })))) {\n    // create collection constructor\n    Constructor = common.getConstructor(wrapper, CONSTRUCTOR_NAME, IS_MAP, ADDER);\n    InternalMetadataModule.REQUIRED = true;\n  } else if (isForced(CONSTRUCTOR_NAME, true)) {\n    var instance = new Constructor();\n    // early implementations not supports chaining\n    var HASNT_CHAINING = instance[ADDER](IS_WEAK ? {} : -0, 1) != instance;\n    // V8 ~  Chromium 40- weak-collections throws on primitives, but should return false\n    var THROWS_ON_PRIMITIVES = fails(function () { instance.has(1); });\n    // most early implementations doesn't supports iterables, most modern - not close it correctly\n    // eslint-disable-next-line no-new\n    var ACCEPT_ITERABLES = checkCorrectnessOfIteration(function (iterable) { new NativeConstructor(iterable); });\n    // for early implementations -0 and +0 not the same\n    var BUGGY_ZERO = !IS_WEAK && fails(function () {\n      // V8 ~ Chromium 42- fails only with 5+ elements\n      var $instance = new NativeConstructor();\n      var index = 5;\n      while (index--) $instance[ADDER](index, index);\n      return !$instance.has(-0);\n    });\n\n    if (!ACCEPT_ITERABLES) {\n      Constructor = wrapper(function (target, iterable) {\n        anInstance(target, Constructor, CONSTRUCTOR_NAME);\n        var that = inheritIfRequired(new NativeConstructor(), target, Constructor);\n        if (iterable != undefined) iterate(iterable, that[ADDER], that, IS_MAP);\n        return that;\n      });\n      Constructor.prototype = NativePrototype;\n      NativePrototype.constructor = Constructor;\n    }\n\n    if (THROWS_ON_PRIMITIVES || BUGGY_ZERO) {\n      fixMethod('delete');\n      fixMethod('has');\n      IS_MAP && fixMethod('get');\n    }\n\n    if (BUGGY_ZERO || HASNT_CHAINING) fixMethod(ADDER);\n\n    // weak collections should not contains .clear method\n    if (IS_WEAK && NativePrototype.clear) delete NativePrototype.clear;\n  }\n\n  exported[CONSTRUCTOR_NAME] = Constructor;\n  $export({ global: true, forced: Constructor != NativeConstructor }, exported);\n\n  setToStringTag(Constructor, CONSTRUCTOR_NAME);\n\n  if (!IS_WEAK) common.setStrong(Constructor, CONSTRUCTOR_NAME, IS_MAP);\n\n  return Constructor;\n};\n","var isObject = require('../internals/is-object');\nvar setPrototypeOf = require('../internals/object-set-prototype-of');\n\nmodule.exports = function (that, target, C) {\n  var S = target.constructor;\n  var P;\n  if (S !== C && typeof S == 'function' && (P = S.prototype) !== C.prototype && isObject(P) && setPrototypeOf) {\n    setPrototypeOf(that, P);\n  } return that;\n};\n","'use strict';\n// `Map` constructor\n// https://tc39.github.io/ecma262/#sec-map-objects\nmodule.exports = require('../internals/collection')('Map', function (get) {\n  return function Map() { return get(this, arguments.length > 0 ? arguments[0] : undefined); };\n}, require('../internals/collection-strong'), true);\n","var DESCRIPTORS = require('../internals/descriptors');\n\n// `Object.defineProperty` method\n// https://tc39.github.io/ecma262/#sec-object.defineproperty\nrequire('../internals/export')({ target: 'Object', stat: true, forced: !DESCRIPTORS, sham: !DESCRIPTORS }, {\n  defineProperty: require('../internals/object-define-property').f\n});\n","var toIndexedObject = require('../internals/to-indexed-object');\nvar nativeGetOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar DESCRIPTORS = require('../internals/descriptors');\nvar FAILS_ON_PRIMITIVES = require('../internals/fails')(function () { nativeGetOwnPropertyDescriptor(1); });\nvar FORCED = !DESCRIPTORS || FAILS_ON_PRIMITIVES;\n\n// `Object.getOwnPropertyDescriptor` method\n// https://tc39.github.io/ecma262/#sec-object.getownpropertydescriptor\nrequire('../internals/export')({ target: 'Object', stat: true, forced: FORCED, sham: !DESCRIPTORS }, {\n  getOwnPropertyDescriptor: function getOwnPropertyDescriptor(it, key) {\n    return nativeGetOwnPropertyDescriptor(toIndexedObject(it), key);\n  }\n});\n","var toObject = require('../internals/to-object');\nvar nativeKeys = require('../internals/object-keys');\nvar FAILS_ON_PRIMITIVES = require('../internals/fails')(function () { nativeKeys(1); });\n\n// `Object.keys` method\n// https://tc39.github.io/ecma262/#sec-object.keys\nrequire('../internals/export')({ target: 'Object', stat: true, forced: FAILS_ON_PRIMITIVES }, {\n  keys: function keys(it) {\n    return nativeKeys(toObject(it));\n  }\n});\n","'use strict';\nvar classof = require('../internals/classof');\nvar TO_STRING_TAG = require('../internals/well-known-symbol')('toStringTag');\nvar test = {};\n\ntest[TO_STRING_TAG] = 'z';\n\n// `Object.prototype.toString` method implementation\n// https://tc39.github.io/ecma262/#sec-object.prototype.tostring\nmodule.exports = String(test) !== '[object z]' ? function toString() {\n  return '[object ' + classof(this) + ']';\n} : test.toString;\n","var toString = require('../internals/object-to-string');\nvar ObjectPrototype = Object.prototype;\n\n// `Object.prototype.toString` method\n// https://tc39.github.io/ecma262/#sec-object.prototype.tostring\nif (toString !== ObjectPrototype.toString) {\n  require('../internals/redefine')(ObjectPrototype, 'toString', toString, { unsafe: true });\n}\n","var toInteger = require('../internals/to-integer');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n// CONVERT_TO_STRING: true  -> String#at\n// CONVERT_TO_STRING: false -> String#codePointAt\nmodule.exports = function (that, pos, CONVERT_TO_STRING) {\n  var S = String(requireObjectCoercible(that));\n  var position = toInteger(pos);\n  var size = S.length;\n  var first, second;\n  if (position < 0 || position >= size) return CONVERT_TO_STRING ? '' : undefined;\n  first = S.charCodeAt(position);\n  return first < 0xD800 || first > 0xDBFF || position + 1 === size\n    || (second = S.charCodeAt(position + 1)) < 0xDC00 || second > 0xDFFF\n      ? CONVERT_TO_STRING ? S.charAt(position) : first\n      : CONVERT_TO_STRING ? S.slice(position, position + 2) : (first - 0xD800 << 10) + (second - 0xDC00) + 0x10000;\n};\n","'use strict';\nvar codePointAt = require('../internals/string-at');\nvar InternalStateModule = require('../internals/internal-state');\nvar defineIterator = require('../internals/define-iterator');\nvar STRING_ITERATOR = 'String Iterator';\nvar setInternalState = InternalStateModule.set;\nvar getInternalState = InternalStateModule.getterFor(STRING_ITERATOR);\n\n// `String.prototype[@@iterator]` method\n// https://tc39.github.io/ecma262/#sec-string.prototype-@@iterator\ndefineIterator(String, 'String', function (iterated) {\n  setInternalState(this, {\n    type: STRING_ITERATOR,\n    string: String(iterated),\n    index: 0\n  });\n// `%StringIteratorPrototype%.next` method\n// https://tc39.github.io/ecma262/#sec-%stringiteratorprototype%.next\n}, function next() {\n  var state = getInternalState(this);\n  var string = state.string;\n  var index = state.index;\n  var point;\n  if (index >= string.length) return { value: undefined, done: true };\n  point = codePointAt(string, index, true);\n  state.index += point.length;\n  return { value: point, done: false };\n});\n","// iterable DOM collections\n// flag - `iterable` interface - 'entries', 'keys', 'values', 'forEach' methods\nmodule.exports = {\n  CSSRuleList: 0,\n  CSSStyleDeclaration: 0,\n  CSSValueList: 0,\n  ClientRectList: 0,\n  DOMRectList: 0,\n  DOMStringList: 0,\n  DOMTokenList: 1,\n  DataTransferItemList: 0,\n  FileList: 0,\n  HTMLAllCollection: 0,\n  HTMLCollection: 0,\n  HTMLFormElement: 0,\n  HTMLSelectElement: 0,\n  MediaList: 0,\n  MimeTypeArray: 0,\n  NamedNodeMap: 0,\n  NodeList: 1,\n  PaintRequestList: 0,\n  Plugin: 0,\n  PluginArray: 0,\n  SVGLengthList: 0,\n  SVGNumberList: 0,\n  SVGPathSegList: 0,\n  SVGPointList: 0,\n  SVGStringList: 0,\n  SVGTransformList: 0,\n  SourceBufferList: 0,\n  StyleSheetList: 0,\n  TextTrackCueList: 0,\n  TextTrackList: 0,\n  TouchList: 0\n};\n","var DOMIterables = require('../internals/dom-iterables');\nvar forEach = require('../internals/array-for-each');\nvar hide = require('../internals/hide');\nvar global = require('../internals/global');\n\nfor (var COLLECTION_NAME in DOMIterables) {\n  var Collection = global[COLLECTION_NAME];\n  var CollectionPrototype = Collection && Collection.prototype;\n  // some Chrome versions have non-configurable methods on DOMTokenList\n  if (CollectionPrototype && CollectionPrototype.forEach !== forEach) try {\n    hide(CollectionPrototype, 'forEach', forEach);\n  } catch (error) {\n    CollectionPrototype.forEach = forEach;\n  }\n}\n","var DOMIterables = require('../internals/dom-iterables');\nvar ArrayIteratorMethods = require('../modules/es.array.iterator');\nvar global = require('../internals/global');\nvar hide = require('../internals/hide');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar ITERATOR = wellKnownSymbol('iterator');\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar ArrayValues = ArrayIteratorMethods.values;\n\nfor (var COLLECTION_NAME in DOMIterables) {\n  var Collection = global[COLLECTION_NAME];\n  var CollectionPrototype = Collection && Collection.prototype;\n  if (CollectionPrototype) {\n    // some Chrome versions have non-configurable methods on DOMTokenList\n    if (CollectionPrototype[ITERATOR] !== ArrayValues) try {\n      hide(CollectionPrototype, ITERATOR, ArrayValues);\n    } catch (error) {\n      CollectionPrototype[ITERATOR] = ArrayValues;\n    }\n    if (!CollectionPrototype[TO_STRING_TAG]) hide(CollectionPrototype, TO_STRING_TAG, COLLECTION_NAME);\n    if (DOMIterables[COLLECTION_NAME]) for (var METHOD_NAME in ArrayIteratorMethods) {\n      // some Chrome versions have non-configurable methods on DOMTokenList\n      if (CollectionPrototype[METHOD_NAME] !== ArrayIteratorMethods[METHOD_NAME]) try {\n        hide(CollectionPrototype, METHOD_NAME, ArrayIteratorMethods[METHOD_NAME]);\n      } catch (error) {\n        CollectionPrototype[METHOD_NAME] = ArrayIteratorMethods[METHOD_NAME];\n      }\n    }\n  }\n}\n","(function() {\n  'use strict';\n\n  /**\n   * Here is the list of every allowed parameter when using Emitter#on:\n   * @type {Object}\n   */\n  var __allowedOptions = {\n    once: 'boolean',\n    scope: 'object'\n  };\n\n  /**\n   * Incremental id used to order event handlers.\n   */\n  var __order = 0;\n\n  /**\n   * A simple helper to shallowly merge two objects. The second one will \"win\"\n   * over the first one.\n   *\n   * @param  {object}  o1 First target object.\n   * @param  {object}  o2 Second target object.\n   * @return {object}     Returns the merged object.\n   */\n  function shallowMerge(o1, o2) {\n    var o = {},\n        k;\n\n    for (k in o1) o[k] = o1[k];\n    for (k in o2) o[k] = o2[k];\n\n    return o;\n  }\n\n  /**\n   * Is the given variable a plain JavaScript object?\n   *\n   * @param  {mixed}  v   Target.\n   * @return {boolean}    The boolean result.\n   */\n  function isPlainObject(v) {\n    return v &&\n           typeof v === 'object' &&\n           !Array.isArray(v) &&\n           !(v instanceof Function) &&\n           !(v instanceof RegExp);\n  }\n\n  /**\n   * Iterate over an object that may have ES6 Symbols.\n   *\n   * @param  {object}   object  Object on which to iterate.\n   * @param  {function} fn      Iterator function.\n   * @param  {object}   [scope] Optional scope.\n   */\n  function forIn(object, fn, scope) {\n    var symbols,\n        k,\n        i,\n        l;\n\n    for (k in object)\n      fn.call(scope || null, k, object[k]);\n\n    if (Object.getOwnPropertySymbols) {\n      symbols = Object.getOwnPropertySymbols(object);\n\n      for (i = 0, l = symbols.length; i < l; i++)\n        fn.call(scope || null, symbols[i], object[symbols[i]]);\n    }\n  }\n\n  /**\n   * The emitter's constructor. It initializes the handlers-per-events store and\n   * the global handlers store.\n   *\n   * Emitters are useful for non-DOM events communication. Read its methods\n   * documentation for more information about how it works.\n   *\n   * @return {Emitter}         The fresh new instance.\n   */\n  var Emitter = function() {\n    this._enabled = true;\n\n    // Dirty trick that will set the necessary properties to the emitter\n    this.unbindAll();\n  };\n\n  /**\n   * This method unbinds every handlers attached to every or any events. So,\n   * these functions will no more be executed when the related events are\n   * emitted. If the functions were not bound to the events, nothing will\n   * happen, and no error will be thrown.\n   *\n   * Usage:\n   * ******\n   * > myEmitter.unbindAll();\n   *\n   * @return {Emitter}      Returns this.\n   */\n  Emitter.prototype.unbindAll = function() {\n\n    this._handlers = {};\n    this._handlersAll = [];\n    this._handlersComplex = [];\n\n    return this;\n  };\n\n\n  /**\n   * This method binds one or more functions to the emitter, handled to one or a\n   * suite of events. So, these functions will be executed anytime one related\n   * event is emitted.\n   *\n   * It is also possible to bind a function to any emitted event by not\n   * specifying any event to bind the function to.\n   *\n   * Recognized options:\n   * *******************\n   *  - {?boolean} once   If true, the handlers will be unbound after the first\n   *                      execution. Default value: false.\n   *  - {?object}  scope  If a scope is given, then the listeners will be called\n   *                      with this scope as \"this\".\n   *\n   * Variant 1:\n   * **********\n   * > myEmitter.on('myEvent', function(e) { console.log(e); });\n   * > // Or:\n   * > myEmitter.on('myEvent', function(e) { console.log(e); }, { once: true });\n   *\n   * @param  {string}   event   The event to listen to.\n   * @param  {function} handler The function to bind.\n   * @param  {?object}  options Eventually some options.\n   * @return {Emitter}          Returns this.\n   *\n   * Variant 2:\n   * **********\n   * > myEmitter.on(\n   * >   ['myEvent1', 'myEvent2'],\n   * >   function(e) { console.log(e); }\n   * >);\n   * > // Or:\n   * > myEmitter.on(\n   * >   ['myEvent1', 'myEvent2'],\n   * >   function(e) { console.log(e); }\n   * >   { once: true }}\n   * >);\n   *\n   * @param  {array}    events  The events to listen to.\n   * @param  {function} handler The function to bind.\n   * @param  {?object}  options Eventually some options.\n   * @return {Emitter}          Returns this.\n   *\n   * Variant 3:\n   * **********\n   * > myEmitter.on({\n   * >   myEvent1: function(e) { console.log(e); },\n   * >   myEvent2: function(e) { console.log(e); }\n   * > });\n   * > // Or:\n   * > myEmitter.on({\n   * >   myEvent1: function(e) { console.log(e); },\n   * >   myEvent2: function(e) { console.log(e); }\n   * > }, { once: true });\n   *\n   * @param  {object}  bindings An object containing pairs event / function.\n   * @param  {?object}  options Eventually some options.\n   * @return {Emitter}          Returns this.\n   *\n   * Variant 4:\n   * **********\n   * > myEmitter.on(function(e) { console.log(e); });\n   * > // Or:\n   * > myEmitter.on(function(e) { console.log(e); }, { once: true});\n   *\n   * @param  {function} handler The function to bind to every events.\n   * @param  {?object}  options Eventually some options.\n   * @return {Emitter}          Returns this.\n   */\n  Emitter.prototype.on = function(a, b, c) {\n    var i,\n        l,\n        k,\n        event,\n        eArray,\n        handlersList,\n        bindingObject;\n\n    // Variant 3\n    if (isPlainObject(a)) {\n      forIn(a, function(name, fn) {\n        this.on(name, fn, b);\n      }, this);\n\n      return this;\n    }\n\n    // Variant 1, 2 and 4\n    if (typeof a === 'function') {\n      c = b;\n      b = a;\n      a = null;\n    }\n\n    eArray = [].concat(a);\n\n    for (i = 0, l = eArray.length; i < l; i++) {\n      event = eArray[i];\n\n      bindingObject = {\n        order: __order++,\n        fn: b\n      };\n\n      // Defining the list in which the handler should be inserted\n      if (typeof event === 'string' || typeof event === 'symbol') {\n        if (!this._handlers[event])\n          this._handlers[event] = [];\n        handlersList = this._handlers[event];\n        bindingObject.type = event;\n      }\n      else if (event instanceof RegExp) {\n        handlersList = this._handlersComplex;\n        bindingObject.pattern = event;\n      }\n      else if (event === null) {\n        handlersList = this._handlersAll;\n      }\n      else {\n        throw Error('Emitter.on: invalid event.');\n      }\n\n      // Appending needed properties\n      for (k in c || {})\n        if (__allowedOptions[k])\n          bindingObject[k] = c[k];\n\n      handlersList.push(bindingObject);\n    }\n\n    return this;\n  };\n\n\n  /**\n   * This method works exactly as the previous #on, but will add an options\n   * object if none is given, and set the option \"once\" to true.\n   *\n   * The polymorphism works exactly as with the #on method.\n   */\n  Emitter.prototype.once = function() {\n    var args = Array.prototype.slice.call(arguments),\n        li = args.length - 1;\n\n    if (isPlainObject(args[li]) && args.length > 1)\n      args[li] = shallowMerge(args[li], {once: true});\n    else\n      args.push({once: true});\n\n    return this.on.apply(this, args);\n  };\n\n\n  /**\n   * This method unbinds one or more functions from events of the emitter. So,\n   * these functions will no more be executed when the related events are\n   * emitted. If the functions were not bound to the events, nothing will\n   * happen, and no error will be thrown.\n   *\n   * Variant 1:\n   * **********\n   * > myEmitter.off('myEvent', myHandler);\n   *\n   * @param  {string}   event   The event to unbind the handler from.\n   * @param  {function} handler The function to unbind.\n   * @return {Emitter}          Returns this.\n   *\n   * Variant 2:\n   * **********\n   * > myEmitter.off(['myEvent1', 'myEvent2'], myHandler);\n   *\n   * @param  {array}    events  The events to unbind the handler from.\n   * @param  {function} handler The function to unbind.\n   * @return {Emitter}          Returns this.\n   *\n   * Variant 3:\n   * **********\n   * > myEmitter.off({\n   * >   myEvent1: myHandler1,\n   * >   myEvent2: myHandler2\n   * > });\n   *\n   * @param  {object} bindings An object containing pairs event / function.\n   * @return {Emitter}         Returns this.\n   *\n   * Variant 4:\n   * **********\n   * > myEmitter.off(myHandler);\n   *\n   * @param  {function} handler The function to unbind from every events.\n   * @return {Emitter}          Returns this.\n   *\n   * Variant 5:\n   * **********\n   * > myEmitter.off(event);\n   *\n   * @param  {string} event     The event we should unbind.\n   * @return {Emitter}          Returns this.\n   */\n  function filter(target, fn) {\n    target = target || [];\n\n    var a = [],\n        l,\n        i;\n\n    for (i = 0, l = target.length; i < l; i++)\n      if (target[i].fn !== fn)\n        a.push(target[i]);\n\n    return a;\n  }\n\n  Emitter.prototype.off = function(events, fn) {\n    var i,\n        n,\n        k,\n        event;\n\n    // Variant 4:\n    if (arguments.length === 1 && typeof events === 'function') {\n      fn = arguments[0];\n\n      // Handlers bound to events:\n      for (k in this._handlers) {\n        this._handlers[k] = filter(this._handlers[k], fn);\n\n        if (this._handlers[k].length === 0)\n          delete this._handlers[k];\n      }\n\n      // Generic Handlers\n      this._handlersAll = filter(this._handlersAll, fn);\n\n      // Complex handlers\n      this._handlersComplex = filter(this._handlersComplex, fn);\n    }\n\n    // Variant 5\n    else if (arguments.length === 1 &&\n             (typeof events === 'string' || typeof events === 'symbol')) {\n      delete this._handlers[events];\n    }\n\n    // Variant 1 and 2:\n    else if (arguments.length === 2) {\n      var eArray = [].concat(events);\n\n      for (i = 0, n = eArray.length; i < n; i++) {\n        event = eArray[i];\n\n        this._handlers[event] = filter(this._handlers[event], fn);\n\n        if ((this._handlers[event] || []).length === 0)\n          delete this._handlers[event];\n      }\n    }\n\n    // Variant 3\n    else if (isPlainObject(events)) {\n      forIn(events, this.off, this);\n    }\n\n    return this;\n  };\n\n  /**\n   * This method retrieve the listeners attached to a particular event.\n   *\n   * @param  {?string}    Name of the event.\n   * @return {array}      Array of handler functions.\n   */\n  Emitter.prototype.listeners = function(event) {\n    var handlers = this._handlersAll || [],\n        complex = false,\n        h,\n        i,\n        l;\n\n    if (!event)\n      throw Error('Emitter.listeners: no event provided.');\n\n    handlers = handlers.concat(this._handlers[event] || []);\n\n    for (i = 0, l = this._handlersComplex.length; i < l; i++) {\n      h = this._handlersComplex[i];\n\n      if (~event.search(h.pattern)) {\n        complex = true;\n        handlers.push(h);\n      }\n    }\n\n    // If we have any complex handlers, we need to sort\n    if (this._handlersAll.length || complex)\n      return handlers.sort(function(a, b) {\n        return a.order - b.order;\n      });\n    else\n      return handlers.slice(0);\n  };\n\n  /**\n   * This method emits the specified event(s), and executes every handlers bound\n   * to the event(s).\n   *\n   * Use cases:\n   * **********\n   * > myEmitter.emit('myEvent');\n   * > myEmitter.emit('myEvent', myData);\n   * > myEmitter.emit(['myEvent1', 'myEvent2']);\n   * > myEmitter.emit(['myEvent1', 'myEvent2'], myData);\n   * > myEmitter.emit({myEvent1: myData1, myEvent2: myData2});\n   *\n   * @param  {string|array} events The event(s) to emit.\n   * @param  {object?}      data   The data.\n   * @return {Emitter}             Returns this.\n   */\n  Emitter.prototype.emit = function(events, data) {\n\n    // Short exit if the emitter is disabled\n    if (!this._enabled)\n      return this;\n\n    // Object variant\n    if (isPlainObject(events)) {\n      forIn(events, this.emit, this);\n      return this;\n    }\n\n    var eArray = [].concat(events),\n        onces = [],\n        event,\n        parent,\n        handlers,\n        handler,\n        i,\n        j,\n        l,\n        m;\n\n    for (i = 0, l = eArray.length; i < l; i++) {\n      handlers = this.listeners(eArray[i]);\n\n      for (j = 0, m = handlers.length; j < m; j++) {\n        handler = handlers[j];\n        event = {\n          type: eArray[i],\n          target: this\n        };\n\n        if (arguments.length > 1)\n          event.data = data;\n\n        handler.fn.call('scope' in handler ? handler.scope : this, event);\n\n        if (handler.once)\n          onces.push(handler);\n      }\n\n      // Cleaning onces\n      for (j = onces.length - 1; j >= 0; j--) {\n        parent = onces[j].type ?\n          this._handlers[onces[j].type] :\n          onces[j].pattern ?\n            this._handlersComplex :\n            this._handlersAll;\n\n        parent.splice(parent.indexOf(onces[j]), 1);\n      }\n    }\n\n    return this;\n  };\n\n\n  /**\n   * This method will unbind all listeners and make it impossible to ever\n   * rebind any listener to any event.\n   */\n  Emitter.prototype.kill = function() {\n\n    this.unbindAll();\n    this._handlers = null;\n    this._handlersAll = null;\n    this._handlersComplex = null;\n    this._enabled = false;\n\n    // Nooping methods\n    this.unbindAll =\n    this.on =\n    this.once =\n    this.off =\n    this.emit =\n    this.listeners = Function.prototype;\n  };\n\n\n  /**\n   * This method disabled the emitter, which means its emit method will do\n   * nothing.\n   *\n   * @return {Emitter} Returns this.\n   */\n  Emitter.prototype.disable = function() {\n    this._enabled = false;\n\n    return this;\n  };\n\n\n  /**\n   * This method enables the emitter.\n   *\n   * @return {Emitter} Returns this.\n   */\n  Emitter.prototype.enable = function() {\n    this._enabled = true;\n\n    return this;\n  };\n\n\n  /**\n   * Version:\n   */\n  Emitter.version = '3.1.1';\n\n\n  // Export:\n  if (typeof exports !== 'undefined') {\n    if (typeof module !== 'undefined' && module.exports)\n      exports = module.exports = Emitter;\n    exports.Emitter = Emitter;\n  } else if (typeof define === 'function' && define.amd)\n    define('emmett', [], function() {\n      return Emitter;\n    });\n  else\n    this.Emitter = Emitter;\n}).call(this);\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; /**\n                                                                                                                                                                                                                                                                               * Baobab Type Checking\n                                                                                                                                                                                                                                                                               * =====================\n                                                                                                                                                                                                                                                                               *\n                                                                                                                                                                                                                                                                               * Helpers functions used throughout the library to perform some type\n                                                                                                                                                                                                                                                                               * tests at runtime.\n                                                                                                                                                                                                                                                                               *\n                                                                                                                                                                                                                                                                               */\n\n\nvar _monkey = require('./monkey');\n\nvar type = {};\n\n/**\n * Helpers\n * --------\n */\n\n/**\n * Checking whether the given variable is of any of the given types.\n *\n * @todo   Optimize this function by dropping `some`.\n *\n * @param  {mixed} target  - Variable to test.\n * @param  {array} allowed - Array of allowed types.\n * @return {boolean}\n */\nfunction anyOf(target, allowed) {\n  return allowed.some(function (t) {\n    return type[t](target);\n  });\n}\n\n/**\n * Simple types\n * -------------\n */\n\n/**\n * Checking whether the given variable is an array.\n *\n * @param  {mixed} target - Variable to test.\n * @return {boolean}\n */\ntype.array = function (target) {\n  return Array.isArray(target);\n};\n\n/**\n * Checking whether the given variable is an object.\n *\n * @param  {mixed} target - Variable to test.\n * @return {boolean}\n */\ntype.object = function (target) {\n  return target && (typeof target === 'undefined' ? 'undefined' : _typeof(target)) === 'object' && !Array.isArray(target) && !(target instanceof Date) && !(target instanceof RegExp) && !(typeof Map === 'function' && target instanceof Map) && !(typeof Set === 'function' && target instanceof Set);\n};\n\n/**\n * Checking whether the given variable is a string.\n *\n * @param  {mixed} target - Variable to test.\n * @return {boolean}\n */\ntype.string = function (target) {\n  return typeof target === 'string';\n};\n\n/**\n * Checking whether the given variable is a number.\n *\n * @param  {mixed} target - Variable to test.\n * @return {boolean}\n */\ntype.number = function (target) {\n  return typeof target === 'number';\n};\n\n/**\n * Checking whether the given variable is a function.\n *\n * @param  {mixed} target - Variable to test.\n * @return {boolean}\n */\ntype.function = function (target) {\n  return typeof target === 'function';\n};\n\n/**\n * Checking whether the given variable is a JavaScript primitive.\n *\n * @param  {mixed} target - Variable to test.\n * @return {boolean}\n */\ntype.primitive = function (target) {\n  return target !== Object(target);\n};\n\n/**\n * Complex types\n * --------------\n */\n\n/**\n * Checking whether the given variable is a valid splicer.\n *\n * @param  {mixed} target    - Variable to test.\n * @param  {array} [allowed] - Optional valid types in path.\n * @return {boolean}\n */\ntype.splicer = function (target) {\n  if (!type.array(target) || target.length < 1) return false;\n  if (target.length > 1 && isNaN(+target[1])) return false;\n\n  return anyOf(target[0], ['number', 'function', 'object']);\n};\n\n/**\n * Checking whether the given variable is a valid cursor path.\n *\n * @param  {mixed} target    - Variable to test.\n * @param  {array} [allowed] - Optional valid types in path.\n * @return {boolean}\n */\n\n// Order is important for performance reasons\nvar ALLOWED_FOR_PATH = ['string', 'number', 'function', 'object'];\n\ntype.path = function (target) {\n  if (!target && target !== 0 && target !== '') return false;\n\n  return [].concat(target).every(function (step) {\n    return anyOf(step, ALLOWED_FOR_PATH);\n  });\n};\n\n/**\n * Checking whether the given path is a dynamic one.\n *\n * @param  {mixed} path - The path to test.\n * @return {boolean}\n */\ntype.dynamicPath = function (path) {\n  return path.some(function (step) {\n    return type.function(step) || type.object(step);\n  });\n};\n\n/**\n * Retrieve any monkey subpath in the given path or null if the path never comes\n * across computed data.\n *\n * @param  {mixed} data - The data to test.\n * @param  {array} path - The path to test.\n * @return {boolean}\n */\ntype.monkeyPath = function (data, path) {\n  var subpath = [];\n\n  var c = data,\n      i = void 0,\n      l = void 0;\n\n  for (i = 0, l = path.length; i < l; i++) {\n    subpath.push(path[i]);\n\n    if ((typeof c === 'undefined' ? 'undefined' : _typeof(c)) !== 'object') return null;\n\n    c = c[path[i]];\n\n    if (c instanceof _monkey.Monkey) return subpath;\n  }\n\n  return null;\n};\n\n/**\n * Check if the given object property is a lazy getter used by a monkey.\n *\n * @param  {mixed}   o           - The target object.\n * @param  {string}  propertyKey - The property to test.\n * @return {boolean}\n */\ntype.lazyGetter = function (o, propertyKey) {\n  var descriptor = Object.getOwnPropertyDescriptor(o, propertyKey);\n\n  return descriptor && descriptor.get && descriptor.get.isLazyGetter === true;\n};\n\n/**\n * Returns the type of the given monkey definition or `null` if invalid.\n *\n * @param  {mixed} definition - The definition to check.\n * @return {string|null}\n */\ntype.monkeyDefinition = function (definition) {\n\n  if (type.object(definition)) {\n    if (!type.function(definition.get) || definition.cursors && (!type.object(definition.cursors) || !Object.keys(definition.cursors).every(function (k) {\n      return type.path(definition.cursors[k]);\n    }))) return null;\n\n    return 'object';\n  } else if (type.array(definition)) {\n    var offset = 1;\n\n    if (type.object(definition[definition.length - 1])) offset++;\n\n    if (!type.function(definition[definition.length - offset]) || !definition.slice(0, -offset).every(function (p) {\n      return type.path(p);\n    })) return null;\n\n    return 'array';\n  }\n\n  return null;\n};\n\n/**\n * Checking whether the given watcher definition is valid.\n *\n * @param  {mixed}   definition - The definition to check.\n * @return {boolean}\n */\ntype.watcherMapping = function (definition) {\n  return type.object(definition) && Object.keys(definition).every(function (k) {\n    return type.path(definition[k]);\n  });\n};\n\n/**\n * Checking whether the given string is a valid operation type.\n *\n * @param  {mixed} string - The string to test.\n * @return {boolean}\n */\n\n// Ordered by likeliness\nvar VALID_OPERATIONS = ['set', 'apply', 'push', 'unshift', 'concat', 'pop', 'shift', 'deepMerge', 'merge', 'splice', 'unset'];\n\ntype.operationType = function (string) {\n  return typeof string === 'string' && !!~VALID_OPERATIONS.indexOf(string);\n};\n\nexports.default = type;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.uniqid = exports.deepMerge = exports.shallowMerge = exports.deepFreeze = exports.freeze = exports.deepClone = exports.shallowClone = exports.Archive = undefined;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /* eslint eqeqeq: 0 */\n/* eslint no-use-before-define: 0 */\n/**\n * Baobab Helpers\n * ===============\n *\n * Miscellaneous helper functions.\n */\n\n\nexports.arrayFrom = arrayFrom;\nexports.before = before;\nexports.coercePath = coercePath;\nexports.getIn = getIn;\nexports.makeError = makeError;\nexports.hashPath = hashPath;\nexports.solveRelativePath = solveRelativePath;\nexports.solveUpdate = solveUpdate;\nexports.splice = splice;\n\nvar _monkey = require('./monkey');\n\nvar _type = require('./type');\n\nvar _type2 = _interopRequireDefault(_type);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar hasOwnProp = {}.hasOwnProperty;\n\n/**\n * Function returning the index of the first element of a list matching the\n * given predicate.\n *\n * @param  {array}     a  - The target array.\n * @param  {function}  fn - The predicate function.\n * @return {mixed}        - The index of the first matching item or -1.\n */\nfunction index(a, fn) {\n  var i = void 0,\n      l = void 0;\n  for (i = 0, l = a.length; i < l; i++) {\n    if (fn(a[i])) return i;\n  }\n  return -1;\n}\n\n/**\n * Efficient slice function used to clone arrays or parts of them.\n *\n * @param  {array} array - The array to slice.\n * @return {array}       - The sliced array.\n */\nfunction slice(array) {\n  var newArray = new Array(array.length);\n\n  var i = void 0,\n      l = void 0;\n\n  for (i = 0, l = array.length; i < l; i++) {\n    newArray[i] = array[i];\n  }return newArray;\n}\n\n/**\n * Archive abstraction\n *\n * @constructor\n * @param {integer} size - Maximum number of records to store.\n */\n\nvar Archive = exports.Archive = function () {\n  function Archive(size) {\n    _classCallCheck(this, Archive);\n\n    this.size = size;\n    this.records = [];\n  }\n\n  /**\n   * Method retrieving the records.\n   *\n   * @return {array} - The records.\n   */\n\n\n  _createClass(Archive, [{\n    key: 'get',\n    value: function get() {\n      return this.records;\n    }\n\n    /**\n     * Method adding a record to the archive\n     *\n     * @param {object}  record - The record to store.\n     * @return {Archive}       - The archive itself for chaining purposes.\n     */\n\n  }, {\n    key: 'add',\n    value: function add(record) {\n      this.records.unshift(record);\n\n      // If the number of records is exceeded, we truncate the records\n      if (this.records.length > this.size) this.records.length = this.size;\n\n      return this;\n    }\n\n    /**\n     * Method clearing the records.\n     *\n     * @return {Archive} - The archive itself for chaining purposes.\n     */\n\n  }, {\n    key: 'clear',\n    value: function clear() {\n      this.records = [];\n      return this;\n    }\n\n    /**\n     * Method to go back in time.\n     *\n     * @param {integer} steps - Number of steps we should go back by.\n     * @return {number}       - The last record.\n     */\n\n  }, {\n    key: 'back',\n    value: function back(steps) {\n      var record = this.records[steps - 1];\n\n      if (record) this.records = this.records.slice(steps);\n      return record;\n    }\n  }]);\n\n  return Archive;\n}();\n\n/**\n * Function creating a real array from what should be an array but is not.\n * I'm looking at you nasty `arguments`...\n *\n * @param  {mixed} culprit - The culprit to convert.\n * @return {array}         - The real array.\n */\n\n\nfunction arrayFrom(culprit) {\n  return slice(culprit);\n}\n\n/**\n * Function decorating one function with another that will be called before the\n * decorated one.\n *\n * @param  {function} decorator - The decorating function.\n * @param  {function} fn        - The function to decorate.\n * @return {function}           - The decorated function.\n */\nfunction before(decorator, fn) {\n  return function () {\n    decorator.apply(null, arguments);\n    fn.apply(null, arguments);\n  };\n}\n\n/**\n * Function cloning the given regular expression. Supports `y` and `u` flags\n * already.\n *\n * @param  {RegExp} re - The target regular expression.\n * @return {RegExp}    - The cloned regular expression.\n */\nfunction cloneRegexp(re) {\n  var pattern = re.source;\n\n  var flags = '';\n\n  if (re.global) flags += 'g';\n  if (re.multiline) flags += 'm';\n  if (re.ignoreCase) flags += 'i';\n  if (re.sticky) flags += 'y';\n  if (re.unicode) flags += 'u';\n\n  return new RegExp(pattern, flags);\n}\n\n/**\n * Function cloning the given variable.\n *\n * @todo: implement a faster way to clone an array.\n *\n * @param  {boolean} deep - Should we deep clone the variable.\n * @param  {mixed}   item - The variable to clone\n * @return {mixed}        - The cloned variable.\n */\nfunction cloner(deep, item) {\n  if (!item || (typeof item === 'undefined' ? 'undefined' : _typeof(item)) !== 'object' || item instanceof Error || item instanceof _monkey.MonkeyDefinition || item instanceof _monkey.Monkey || 'ArrayBuffer' in global && item instanceof ArrayBuffer) return item;\n\n  // Array\n  if (_type2.default.array(item)) {\n    if (deep) {\n      var a = new Array(item.length);\n\n      for (var i = 0, l = item.length; i < l; i++) {\n        a[i] = cloner(true, item[i]);\n      }return a;\n    }\n\n    return slice(item);\n  }\n\n  // Date\n  if (item instanceof Date) return new Date(item.getTime());\n\n  // RegExp\n  if (item instanceof RegExp) return cloneRegexp(item);\n\n  // Object\n  if (_type2.default.object(item)) {\n    var o = {};\n\n    // NOTE: could be possible to erase computed properties through `null`.\n    var props = Object.getOwnPropertyNames(item);\n    for (var _i = 0, _l = props.length; _i < _l; _i++) {\n      var name = props[_i];\n      var k = Object.getOwnPropertyDescriptor(item, name);\n      if (k.enumerable === true) {\n        if (k.get && k.get.isLazyGetter) {\n          Object.defineProperty(o, name, {\n            get: k.get,\n            enumerable: true,\n            configurable: true\n          });\n        } else {\n          o[name] = deep ? cloner(true, item[name]) : item[name];\n        }\n      } else if (k.enumerable === false) {\n        Object.defineProperty(o, name, {\n          value: deep ? cloner(true, k.value) : k.value,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        });\n      }\n    }\n    return o;\n  }\n\n  return item;\n}\n\n/**\n * Exporting shallow and deep cloning functions.\n */\nvar shallowClone = cloner.bind(null, false),\n    deepClone = cloner.bind(null, true);\n\nexports.shallowClone = shallowClone;\nexports.deepClone = deepClone;\n\n/**\n * Coerce the given variable into a full-fledged path.\n *\n * @param  {mixed} target - The variable to coerce.\n * @return {array}        - The array path.\n */\n\nfunction coercePath(target) {\n  if (target || target === 0 || target === '') return target;\n  return [];\n}\n\n/**\n * Function comparing an object's properties to a given descriptive\n * object.\n *\n * @param  {object} object      - The object to compare.\n * @param  {object} description - The description's mapping.\n * @return {boolean}            - Whether the object matches the description.\n */\nfunction compare(object, description) {\n  var ok = true,\n      k = void 0;\n\n  // If we reached here via a recursive call, object may be undefined because\n  // not all items in a collection will have the same deep nesting structure.\n  if (!object) return false;\n\n  for (k in description) {\n    if (_type2.default.object(description[k])) {\n      ok = ok && compare(object[k], description[k]);\n    } else if (_type2.default.array(description[k])) {\n      ok = ok && !!~description[k].indexOf(object[k]);\n    } else {\n      if (object[k] !== description[k]) return false;\n    }\n  }\n\n  return ok;\n}\n\n/**\n * Function freezing the given variable if possible.\n *\n * @param  {boolean} deep - Should we recursively freeze the given objects?\n * @param  {object}  o    - The variable to freeze.\n * @return {object}    - The merged object.\n */\nfunction freezer(deep, o) {\n  if ((typeof o === 'undefined' ? 'undefined' : _typeof(o)) !== 'object' || o === null || o instanceof _monkey.Monkey) return;\n\n  Object.freeze(o);\n\n  if (!deep) return;\n\n  if (Array.isArray(o)) {\n\n    // Iterating through the elements\n    var i = void 0,\n        l = void 0;\n\n    for (i = 0, l = o.length; i < l; i++) {\n      deepFreeze(o[i]);\n    }\n  } else {\n    var p = void 0,\n        k = void 0;\n\n    for (k in o) {\n      if (_type2.default.lazyGetter(o, k)) continue;\n\n      p = o[k];\n\n      if (!p || !hasOwnProp.call(o, k) || (typeof p === 'undefined' ? 'undefined' : _typeof(p)) !== 'object' || Object.isFrozen(p)) continue;\n\n      deepFreeze(p);\n    }\n  }\n}\n\nvar freeze = freezer.bind(null, false),\n    deepFreeze = freezer.bind(null, true);\n\nexports.freeze = freeze;\nexports.deepFreeze = deepFreeze;\n\n/**\n * Function retrieving nested data within the given object and according to\n * the given path.\n *\n * @todo: work if dynamic path hit objects also.\n * @todo: memoized perfgetters.\n *\n * @param  {object}  object - The object we need to get data from.\n * @param  {array}   path   - The path to follow.\n * @return {object}  result            - The result.\n * @return {mixed}   result.data       - The data at path, or `undefined`.\n * @return {array}   result.solvedPath - The solved path or `null`.\n * @return {boolean} result.exists     - Does the path exists in the tree?\n */\n\nvar NOT_FOUND_OBJECT = { data: undefined, solvedPath: null, exists: false };\n\nfunction getIn(object, path) {\n  if (!path) return NOT_FOUND_OBJECT;\n\n  var solvedPath = [];\n\n  var exists = true,\n      c = object,\n      idx = void 0,\n      i = void 0,\n      l = void 0;\n\n  for (i = 0, l = path.length; i < l; i++) {\n    if (!c) return {\n      data: undefined,\n      solvedPath: solvedPath.concat(path.slice(i)),\n      exists: false\n    };\n\n    if (typeof path[i] === 'function') {\n      if (!_type2.default.array(c)) return NOT_FOUND_OBJECT;\n\n      idx = index(c, path[i]);\n      if (!~idx) return NOT_FOUND_OBJECT;\n\n      solvedPath.push(idx);\n      c = c[idx];\n    } else if (_typeof(path[i]) === 'object') {\n      if (!_type2.default.array(c)) return NOT_FOUND_OBJECT;\n\n      idx = index(c, function (e) {\n        return compare(e, path[i]);\n      });\n      if (!~idx) return NOT_FOUND_OBJECT;\n\n      solvedPath.push(idx);\n      c = c[idx];\n    } else {\n      solvedPath.push(path[i]);\n      exists = (typeof c === 'undefined' ? 'undefined' : _typeof(c)) === 'object' && path[i] in c;\n      c = c[path[i]];\n    }\n  }\n\n  return { data: c, solvedPath: solvedPath, exists: exists };\n}\n\n/**\n * Little helper returning a JavaScript error carrying some data with it.\n *\n * @param  {string} message - The error message.\n * @param  {object} [data]  - Optional data to assign to the error.\n * @return {Error}          - The created error.\n */\nfunction makeError(message, data) {\n  var err = new Error(message);\n\n  for (var k in data) {\n    err[k] = data[k];\n  }return err;\n}\n\n/**\n * Function taking n objects to merge them together.\n * Note 1): the latter object will take precedence over the first one.\n * Note 2): the first object will be mutated to allow for perf scenarios.\n * Note 3): this function will consider monkeys as leaves.\n *\n * @param  {boolean}   deep    - Whether the merge should be deep or not.\n * @param  {...object} objects - Objects to merge.\n * @return {object}            - The merged object.\n */\nfunction merger(deep) {\n  for (var _len = arguments.length, objects = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    objects[_key - 1] = arguments[_key];\n  }\n\n  var o = objects[0];\n\n  var t = void 0,\n      i = void 0,\n      l = void 0,\n      k = void 0;\n\n  for (i = 1, l = objects.length; i < l; i++) {\n    t = objects[i];\n\n    for (k in t) {\n      if (deep && _type2.default.object(t[k]) && !(t[k] instanceof _monkey.Monkey)) {\n        o[k] = merger(true, o[k] || {}, t[k]);\n      } else {\n        o[k] = t[k];\n      }\n    }\n  }\n\n  return o;\n}\n\n/**\n * Exporting both `shallowMerge` and `deepMerge` functions.\n */\nvar shallowMerge = merger.bind(null, false),\n    deepMerge = merger.bind(null, true);\n\nexports.shallowMerge = shallowMerge;\nexports.deepMerge = deepMerge;\n\n/**\n * Function returning a string hash from a non-dynamic path expressed as an\n * array.\n *\n * @param  {array}  path - The path to hash.\n * @return {string} string - The resultant hash.\n */\n\nfunction hashPath(path) {\n  return 'Î»' + path.map(function (step) {\n    if (_type2.default.function(step) || _type2.default.object(step)) return '#' + uniqid() + '#';\n\n    return step;\n  }).join('Î»');\n}\n\n/**\n * Solving a potentially relative path.\n *\n * @param  {array} base - The base path from which to solve the path.\n * @param  {array} to   - The subpath to reach.\n * @param  {array}      - The solved absolute path.\n */\nfunction solveRelativePath(base, to) {\n  var solvedPath = [];\n\n  // Coercing to array\n  to = [].concat(to);\n\n  for (var i = 0, l = to.length; i < l; i++) {\n    var step = to[i];\n\n    if (step === '.') {\n      if (!i) solvedPath = base.slice(0);\n    } else if (step === '..') {\n      solvedPath = (!i ? base : solvedPath).slice(0, -1);\n    } else {\n      solvedPath.push(step);\n    }\n  }\n\n  return solvedPath;\n}\n\n/**\n * Function determining whether some paths in the tree were affected by some\n * updates that occurred at the given paths. This helper is mainly used at\n * cursor level to determine whether the cursor is concerned by the updates\n * fired at tree level.\n *\n * NOTES: 1) If performance become an issue, the following threefold loop\n *           can be simplified to a complex twofold one.\n *        2) A regex version could also work but I am not confident it would\n *           be faster.\n *        3) Another solution would be to keep a register of cursors like with\n *           the monkeys and update along this tree.\n *\n * @param  {array} affectedPaths - The paths that were updated.\n * @param  {array} comparedPaths - The paths that we are actually interested in.\n * @return {boolean}             - Is the update relevant to the compared\n *                                 paths?\n */\nfunction solveUpdate(affectedPaths, comparedPaths) {\n  var i = void 0,\n      j = void 0,\n      k = void 0,\n      l = void 0,\n      m = void 0,\n      n = void 0,\n      p = void 0,\n      c = void 0,\n      s = void 0;\n\n  // Looping through possible paths\n  for (i = 0, l = affectedPaths.length; i < l; i++) {\n    p = affectedPaths[i];\n\n    if (!p.length) return true;\n\n    // Looping through logged paths\n    for (j = 0, m = comparedPaths.length; j < m; j++) {\n      c = comparedPaths[j];\n\n      if (!c || !c.length) return true;\n\n      // Looping through steps\n      for (k = 0, n = c.length; k < n; k++) {\n        s = c[k];\n\n        // If path is not relevant, we break\n        // NOTE: the '!=' instead of '!==' is required here!\n        if (s != p[k]) break;\n\n        // If we reached last item and we are relevant\n        if (k + 1 === n || k + 1 === p.length) return true;\n      }\n    }\n  }\n\n  return false;\n}\n\n/**\n * Non-mutative version of the splice array method.\n *\n * @param  {array}    array        - The array to splice.\n * @param  {integer}  startIndex   - The start index.\n * @param  {integer}  nb           - Number of elements to remove.\n * @param  {...mixed} elements     - Elements to append after splicing.\n * @return {array}                 - The spliced array.\n */\nfunction splice(array, startIndex, nb) {\n  for (var _len2 = arguments.length, elements = Array(_len2 > 3 ? _len2 - 3 : 0), _key2 = 3; _key2 < _len2; _key2++) {\n    elements[_key2 - 3] = arguments[_key2];\n  }\n\n  if (nb === undefined && arguments.length === 2) nb = array.length - startIndex;else if (nb === null || nb === undefined) nb = 0;else if (isNaN(+nb)) throw new Error('argument nb ' + nb + ' can not be parsed into a number!');\n  nb = Math.max(0, nb);\n\n  // Solving startIndex\n  if (_type2.default.function(startIndex)) startIndex = index(array, startIndex);\n  if (_type2.default.object(startIndex)) startIndex = index(array, function (e) {\n    return compare(e, startIndex);\n  });\n\n  // Positive index\n  if (startIndex >= 0) return array.slice(0, startIndex).concat(elements).concat(array.slice(startIndex + nb));\n\n  // Negative index\n  return array.slice(0, array.length + startIndex).concat(elements).concat(array.slice(array.length + startIndex + nb));\n}\n\n/**\n * Function returning a unique incremental id each time it is called.\n *\n * @return {integer} - The latest unique id.\n */\nvar uniqid = function () {\n  var i = 0;\n\n  return function () {\n    return i++;\n  };\n}();\n\nexports.uniqid = uniqid;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = update;\n\nvar _type = require('./type');\n\nvar _type2 = _interopRequireDefault(_type);\n\nvar _helpers = require('./helpers');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } } /**\n                                                                                                                                                                                                     * Baobab Update\n                                                                                                                                                                                                     * ==============\n                                                                                                                                                                                                     *\n                                                                                                                                                                                                     * The tree's update scheme.\n                                                                                                                                                                                                     */\n\n\nfunction err(operation, expectedTarget, path) {\n  return (0, _helpers.makeError)('Baobab.update: cannot apply the \"' + operation + '\" on ' + ('a non ' + expectedTarget + ' (path: /' + path.join('/') + ').'), { path: path });\n}\n\n/**\n * Function aiming at applying a single update operation on the given tree's\n * data.\n *\n * @param  {mixed}  data      - The tree's data.\n * @param  {path}   path      - Path of the update.\n * @param  {object} operation - The operation to apply.\n * @param  {object} [opts]    - Optional options.\n * @return {mixed}            - Both the new tree's data and the updated node.\n */\nfunction update(data, path, operation) {\n  var opts = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  var operationType = operation.type,\n      value = operation.value,\n      _operation$options = operation.options,\n      operationOptions = _operation$options === undefined ? {} : _operation$options;\n\n  // Dummy root, so we can shift and alter the root\n\n  var dummy = { root: data },\n      dummyPath = ['root'].concat(_toConsumableArray(path)),\n      currentPath = [];\n\n  // Walking the path\n  var p = dummy,\n      i = void 0,\n      l = void 0,\n      s = void 0;\n\n  for (i = 0, l = dummyPath.length; i < l; i++) {\n\n    // Current item's reference is therefore p[s]\n    // The reason why we don't create a variable here for convenience\n    // is because we actually need to mutate the reference.\n    s = dummyPath[i];\n\n    // Updating the path\n    if (i > 0) currentPath.push(s);\n\n    // If we reached the end of the path, we apply the operation\n    if (i === l - 1) {\n\n      /**\n       * Set\n       */\n      if (operationType === 'set') {\n\n        // Purity check\n        if (opts.pure && p[s] === value) return { node: p[s] };\n\n        if (_type2.default.lazyGetter(p, s)) {\n          Object.defineProperty(p, s, {\n            value: value,\n            enumerable: true,\n            configurable: true\n          });\n        } else if (opts.persistent && !operationOptions.mutableLeaf) {\n          p[s] = (0, _helpers.shallowClone)(value);\n        } else {\n          p[s] = value;\n        }\n      }\n\n      /**\n       * Monkey\n       */\n      else if (operationType === 'monkey') {\n          Object.defineProperty(p, s, {\n            get: value,\n            enumerable: true,\n            configurable: true\n          });\n        }\n\n        /**\n         * Apply\n         */\n        else if (operationType === 'apply') {\n            var result = value(p[s]);\n\n            // Purity check\n            if (opts.pure && p[s] === result) return { node: p[s] };\n\n            if (_type2.default.lazyGetter(p, s)) {\n              Object.defineProperty(p, s, {\n                value: result,\n                enumerable: true,\n                configurable: true\n              });\n            } else if (opts.persistent) {\n              p[s] = (0, _helpers.shallowClone)(result);\n            } else {\n              p[s] = result;\n            }\n          }\n\n          /**\n           * Push\n           */\n          else if (operationType === 'push') {\n              if (!_type2.default.array(p[s])) throw err('push', 'array', currentPath);\n\n              if (opts.persistent) p[s] = p[s].concat([value]);else p[s].push(value);\n            }\n\n            /**\n             * Unshift\n             */\n            else if (operationType === 'unshift') {\n                if (!_type2.default.array(p[s])) throw err('unshift', 'array', currentPath);\n\n                if (opts.persistent) p[s] = [value].concat(p[s]);else p[s].unshift(value);\n              }\n\n              /**\n               * Concat\n               */\n              else if (operationType === 'concat') {\n                  if (!_type2.default.array(p[s])) throw err('concat', 'array', currentPath);\n\n                  if (opts.persistent) p[s] = p[s].concat(value);else p[s].push.apply(p[s], value);\n                }\n\n                /**\n                 * Splice\n                 */\n                else if (operationType === 'splice') {\n                    if (!_type2.default.array(p[s])) throw err('splice', 'array', currentPath);\n\n                    if (opts.persistent) p[s] = _helpers.splice.apply(null, [p[s]].concat(value));else p[s].splice.apply(p[s], value);\n                  }\n\n                  /**\n                   * Pop\n                   */\n                  else if (operationType === 'pop') {\n                      if (!_type2.default.array(p[s])) throw err('pop', 'array', currentPath);\n\n                      if (opts.persistent) p[s] = (0, _helpers.splice)(p[s], -1, 1);else p[s].pop();\n                    }\n\n                    /**\n                     * Shift\n                     */\n                    else if (operationType === 'shift') {\n                        if (!_type2.default.array(p[s])) throw err('shift', 'array', currentPath);\n\n                        if (opts.persistent) p[s] = (0, _helpers.splice)(p[s], 0, 1);else p[s].shift();\n                      }\n\n                      /**\n                       * Unset\n                       */\n                      else if (operationType === 'unset') {\n                          if (_type2.default.object(p)) delete p[s];else if (_type2.default.array(p)) p.splice(s, 1);\n                        }\n\n                        /**\n                         * Merge\n                         */\n                        else if (operationType === 'merge') {\n                            if (!_type2.default.object(p[s])) throw err('merge', 'object', currentPath);\n\n                            if (opts.persistent) p[s] = (0, _helpers.shallowMerge)({}, p[s], value);else p[s] = (0, _helpers.shallowMerge)(p[s], value);\n                          }\n\n                          /**\n                           * Deep merge\n                           */\n                          else if (operationType === 'deepMerge') {\n                              if (!_type2.default.object(p[s])) throw err('deepMerge', 'object', currentPath);\n\n                              if (opts.persistent) p[s] = (0, _helpers.deepMerge)({}, p[s], value);else p[s] = (0, _helpers.deepMerge)(p[s], value);\n                            }\n\n      // Deep freezing the resulting value\n      if (opts.immutable && !operationOptions.mutableLeaf) (0, _helpers.deepFreeze)(p);\n\n      break;\n    }\n\n    // If we reached a leaf, we override by setting an empty object\n    else if (_type2.default.primitive(p[s])) {\n        p[s] = {};\n      }\n\n      // Else, we shift the reference and continue the path\n      else if (opts.persistent) {\n          p[s] = (0, _helpers.shallowClone)(p[s]);\n        }\n\n    // Should we freeze the current step before continuing?\n    if (opts.immutable && l > 0) (0, _helpers.freeze)(p);\n\n    p = p[s];\n  }\n\n  // If we are updating a dynamic node, we need not return the affected node\n  if (_type2.default.lazyGetter(p, s)) return { data: dummy.root };\n\n  // Returning new data object\n  return { data: dummy.root, node: p[s] };\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Monkey = exports.MonkeyDefinition = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _type = require('./type');\n\nvar _type2 = _interopRequireDefault(_type);\n\nvar _update2 = require('./update');\n\nvar _update3 = _interopRequireDefault(_update2);\n\nvar _helpers = require('./helpers');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } } /**\n                                                                                                                                                           * Baobab Monkeys\n                                                                                                                                                           * ===============\n                                                                                                                                                           *\n                                                                                                                                                           * Exposing both handy monkey definitions and the underlying working class.\n                                                                                                                                                           */\n\n\n/**\n * Monkey Definition class\n * Note: The only reason why this is a class is to be able to spot it within\n * otherwise ordinary data.\n *\n * @constructor\n * @param {array|object} definition - The formal definition of the monkey.\n */\nvar MonkeyDefinition = exports.MonkeyDefinition = function MonkeyDefinition(definition) {\n  var _this = this;\n\n  _classCallCheck(this, MonkeyDefinition);\n\n  var monkeyType = _type2.default.monkeyDefinition(definition);\n\n  if (!monkeyType) throw (0, _helpers.makeError)('Baobab.monkey: invalid definition.', { definition: definition });\n\n  this.type = monkeyType;\n\n  if (this.type === 'object') {\n    this.getter = definition.get;\n    this.projection = definition.cursors || {};\n    this.paths = Object.keys(this.projection).map(function (k) {\n      return _this.projection[k];\n    });\n    this.options = definition.options || {};\n  } else {\n    var offset = 1,\n        options = {};\n\n    if (_type2.default.object(definition[definition.length - 1])) {\n      offset++;\n      options = definition[definition.length - 1];\n    }\n\n    this.getter = definition[definition.length - offset];\n    this.projection = definition.slice(0, -offset);\n    this.paths = this.projection;\n    this.options = options;\n  }\n\n  // Coercing paths for convenience\n  this.paths = this.paths.map(function (p) {\n    return [].concat(p);\n  });\n\n  // Does the definition contain dynamic paths\n  this.hasDynamicPaths = this.paths.some(_type2.default.dynamicPath);\n};\n\n/**\n * Monkey core class\n *\n * @constructor\n * @param {Baobab}           tree       - The bound tree.\n * @param {MonkeyDefinition} definition - A definition instance.\n */\n\n\nvar Monkey = exports.Monkey = function () {\n  function Monkey(tree, pathInTree, definition) {\n    var _this2 = this;\n\n    _classCallCheck(this, Monkey);\n\n    // Properties\n    this.tree = tree;\n    this.path = pathInTree;\n    this.definition = definition;\n\n    // Adapting the definition's paths & projection to this monkey's case\n    var projection = definition.projection,\n        relative = _helpers.solveRelativePath.bind(null, pathInTree.slice(0, -1));\n\n    if (definition.type === 'object') {\n      this.projection = Object.keys(projection).reduce(function (acc, k) {\n        acc[k] = relative(projection[k]);\n        return acc;\n      }, {});\n      this.depPaths = Object.keys(this.projection).map(function (k) {\n        return _this2.projection[k];\n      });\n    } else {\n      this.projection = projection.map(relative);\n      this.depPaths = this.projection;\n    }\n\n    // Internal state\n    this.state = {\n      killed: false\n    };\n\n    /**\n     * Listener on the tree's `write` event.\n     *\n     * When the tree writes, this listener will check whether the updated paths\n     * are of any use to the monkey and, if so, will update the tree's node\n     * where the monkey sits.\n     */\n    this.writeListener = function (_ref) {\n      var path = _ref.data.path;\n\n      if (_this2.state.killed) return;\n\n      // Is the monkey affected by the current write event?\n      var concerned = (0, _helpers.solveUpdate)([path], _this2.relatedPaths());\n\n      if (concerned) _this2.update();\n    };\n\n    /**\n     * Listener on the tree's `monkey` event.\n     *\n     * When another monkey updates, this listener will check whether the\n     * updated paths are of any use to the monkey and, if so, will update the\n     * tree's node where the monkey sits.\n     */\n    this.recursiveListener = function (_ref2) {\n      var _ref2$data = _ref2.data,\n          monkey = _ref2$data.monkey,\n          path = _ref2$data.path;\n\n      if (_this2.state.killed) return;\n\n      // Breaking if this is the same monkey\n      if (_this2 === monkey) return;\n\n      // Is the monkey affected by the current monkey event?\n      var concerned = (0, _helpers.solveUpdate)([path], _this2.relatedPaths(false));\n\n      if (concerned) _this2.update();\n    };\n\n    // Binding listeners\n    this.tree.on('write', this.writeListener);\n    this.tree.on('_monkey', this.recursiveListener);\n\n    // Updating relevant node\n    this.update();\n  }\n\n  /**\n   * Method returning solved paths related to the monkey.\n   *\n   * @param  {boolean} recursive - Should we compute recursive paths?\n   * @return {array}             - An array of related paths.\n   */\n\n\n  _createClass(Monkey, [{\n    key: 'relatedPaths',\n    value: function relatedPaths() {\n      var _this3 = this;\n\n      var recursive = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n      var paths = void 0;\n\n      if (this.definition.hasDynamicPaths) paths = this.depPaths.map(function (p) {\n        return (0, _helpers.getIn)(_this3.tree._data, p).solvedPath;\n      });else paths = this.depPaths;\n\n      var isRecursive = recursive && this.depPaths.some(function (p) {\n        return !!_type2.default.monkeyPath(_this3.tree._monkeys, p);\n      });\n\n      if (!isRecursive) return paths;\n\n      return paths.reduce(function (accumulatedPaths, path) {\n        var monkeyPath = _type2.default.monkeyPath(_this3.tree._monkeys, path);\n\n        if (!monkeyPath) return accumulatedPaths.concat([path]);\n\n        // Solving recursive path\n        var relatedMonkey = (0, _helpers.getIn)(_this3.tree._monkeys, monkeyPath).data;\n\n        return accumulatedPaths.concat(relatedMonkey.relatedPaths());\n      }, []);\n    }\n\n    /**\n     * Method used to update the tree's internal data with a lazy getter holding\n     * the computed data.\n     *\n     * @return {Monkey} - Returns itself for chaining purposes.\n     */\n\n  }, {\n    key: 'update',\n    value: function update() {\n      var _this4 = this;\n\n      var deps = this.tree.project(this.projection);\n\n      var lazyGetter = function (tree, def, data) {\n        var cache = null,\n            alreadyComputed = false;\n\n        return function () {\n\n          if (!alreadyComputed) {\n            cache = def.getter.apply(tree, def.type === 'object' ? [data] : data);\n\n            if (tree.options.immutable && def.options.immutable !== false) (0, _helpers.deepFreeze)(cache);\n\n            // update tree affected paths\n            var hash = (0, _helpers.hashPath)(_this4.path);\n            tree._affectedPathsIndex[hash] = true;\n\n            alreadyComputed = true;\n          }\n\n          return cache;\n        };\n      }(this.tree, this.definition, deps);\n\n      lazyGetter.isLazyGetter = true;\n\n      // Should we write the lazy getter in the tree or solve it right now?\n      if (this.tree.options.lazyMonkeys) {\n        this.tree._data = (0, _update3.default)(this.tree._data, this.path, {\n          type: 'monkey',\n          value: lazyGetter\n        }, this.tree.options).data;\n      } else {\n        var result = (0, _update3.default)(this.tree._data, this.path, {\n          type: 'set',\n          value: lazyGetter(),\n          options: {\n            mutableLeaf: !this.definition.options.immutable\n          }\n        }, this.tree.options);\n\n        if ('data' in result) this.tree._data = result.data;\n      }\n\n      // Notifying the monkey's update so we can handle recursivity\n      this.tree.emit('_monkey', { monkey: this, path: this.path });\n\n      return this;\n    }\n\n    /**\n     * Method releasing the monkey from memory.\n     */\n\n  }, {\n    key: 'release',\n    value: function release() {\n\n      // Unbinding events\n      this.tree.off('write', this.writeListener);\n      this.tree.off('_monkey', this.recursiveListener);\n      this.state.killed = true;\n\n      // Deleting properties\n      // NOTE: not deleting this.definition because some strange things happen\n      // in the _refreshMonkeys method. See #372.\n      delete this.projection;\n      delete this.depPaths;\n      delete this.tree;\n    }\n  }]);\n\n  return Monkey;\n}();","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _emmett = require('emmett');\n\nvar _emmett2 = _interopRequireDefault(_emmett);\n\nvar _monkey = require('./monkey');\n\nvar _type = require('./type');\n\nvar _type2 = _interopRequireDefault(_type);\n\nvar _helpers = require('./helpers');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Baobab Cursors\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * ===============\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Cursors created by selecting some data within a Baobab tree.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\n\n/**\n * Traversal helper function for dynamic cursors. Will throw a legible error\n * if traversal is not possible.\n *\n * @param {string} method     - The method name, to create a correct error msg.\n * @param {array}  solvedPath - The cursor's solved path.\n */\nfunction checkPossibilityOfDynamicTraversal(method, solvedPath) {\n  if (!solvedPath) throw (0, _helpers.makeError)('Baobab.Cursor.' + method + ': ' + ('cannot use ' + method + ' on an unresolved dynamic path.'), { path: solvedPath });\n}\n\n/**\n * Cursor class\n *\n * @constructor\n * @param {Baobab} tree   - The cursor's root.\n * @param {array}  path   - The cursor's path in the tree.\n * @param {string} hash   - The path's hash computed ahead by the tree.\n */\n\nvar Cursor = function (_Emitter) {\n  _inherits(Cursor, _Emitter);\n\n  function Cursor(tree, path, hash) {\n    _classCallCheck(this, Cursor);\n\n    // If no path were to be provided, we fallback to an empty path (root)\n    var _this = _possibleConstructorReturn(this, (Cursor.__proto__ || Object.getPrototypeOf(Cursor)).call(this));\n\n    path = path || [];\n\n    // Privates\n    _this._identity = '[object Cursor]';\n    _this._archive = null;\n\n    // Properties\n    _this.tree = tree;\n    _this.path = path;\n    _this.hash = hash;\n\n    // State\n    _this.state = {\n      killed: false,\n      recording: false,\n      undoing: false\n    };\n\n    // Checking whether the given path is dynamic or not\n    _this._dynamicPath = _type2.default.dynamicPath(_this.path);\n\n    // Checking whether the given path will meet a monkey\n    _this._monkeyPath = _type2.default.monkeyPath(_this.tree._monkeys, _this.path);\n\n    if (!_this._dynamicPath) _this.solvedPath = _this.path;else _this.solvedPath = (0, _helpers.getIn)(_this.tree._data, _this.path).solvedPath;\n\n    /**\n     * Listener bound to the tree's writes so that cursors with dynamic paths\n     * may update their solved path correctly.\n     *\n     * @param {object} event - The event fired by the tree.\n     */\n    _this._writeHandler = function (_ref) {\n      var data = _ref.data;\n\n      if (_this.state.killed || !(0, _helpers.solveUpdate)([data.path], _this._getComparedPaths())) return;\n\n      _this.solvedPath = (0, _helpers.getIn)(_this.tree._data, _this.path).solvedPath;\n    };\n\n    /**\n     * Function in charge of actually trigger the cursor's updates and\n     * deal with the archived records.\n     *\n     * @note: probably should wrap the current solvedPath in closure to avoid\n     * for tricky cases where it would fail.\n     *\n     * @param {mixed} previousData - the tree's previous data.\n     */\n    var fireUpdate = function fireUpdate(previousData) {\n      var self = _this;\n\n      var eventData = {\n        get previousData() {\n          return (0, _helpers.getIn)(previousData, self.solvedPath).data;\n        },\n        get currentData() {\n          return self.get();\n        }\n      };\n\n      if (_this.state.recording && !_this.state.undoing) _this.archive.add(eventData.previousData);\n\n      _this.state.undoing = false;\n\n      return _this.emit('update', eventData);\n    };\n\n    /**\n     * Listener bound to the tree's updates and determining whether the\n     * cursor is affected and should react accordingly.\n     *\n     * Note that this listener is lazily bound to the tree to be sure\n     * one wouldn't leak listeners when only creating cursors for convenience\n     * and not to listen to updates specifically.\n     *\n     * @param {object} event - The event fired by the tree.\n     */\n    _this._updateHandler = function (event) {\n      if (_this.state.killed) return;\n\n      var _event$data = event.data,\n          paths = _event$data.paths,\n          previousData = _event$data.previousData,\n          update = fireUpdate.bind(_this, previousData),\n          comparedPaths = _this._getComparedPaths();\n\n      if ((0, _helpers.solveUpdate)(paths, comparedPaths)) return update();\n    };\n\n    // Lazy binding\n    var bound = false;\n    _this._lazyBind = function () {\n      if (bound) return;\n\n      bound = true;\n\n      if (_this._dynamicPath) _this.tree.on('write', _this._writeHandler);\n\n      return _this.tree.on('update', _this._updateHandler);\n    };\n\n    // If the path is dynamic, we actually need to listen to the tree\n    if (_this._dynamicPath) {\n      _this._lazyBind();\n    } else {\n\n      // Overriding the emitter `on` and `once` methods\n      _this.on = (0, _helpers.before)(_this._lazyBind, _this.on.bind(_this));\n      _this.once = (0, _helpers.before)(_this._lazyBind, _this.once.bind(_this));\n    }\n    return _this;\n  }\n\n  /**\n   * Internal helpers\n   * -----------------\n   */\n\n  /**\n   * Method returning the paths of the tree watched over by the cursor and that\n   * should be taken into account when solving a potential update.\n   *\n   * @return {array} - Array of paths to compare with a given update.\n   */\n\n\n  _createClass(Cursor, [{\n    key: '_getComparedPaths',\n    value: function _getComparedPaths() {\n\n      // Checking whether we should keep track of some dependencies\n      var additionalPaths = this._monkeyPath ? (0, _helpers.getIn)(this.tree._monkeys, this._monkeyPath).data.relatedPaths() : [];\n\n      return [this.solvedPath].concat(additionalPaths);\n    }\n\n    /**\n     * Predicates\n     * -----------\n     */\n\n    /**\n     * Method returning whether the cursor is at root level.\n     *\n     * @return {boolean} - Is the cursor the root?\n     */\n\n  }, {\n    key: 'isRoot',\n    value: function isRoot() {\n      return !this.path.length;\n    }\n\n    /**\n     * Method returning whether the cursor is at leaf level.\n     *\n     * @return {boolean} - Is the cursor a leaf?\n     */\n\n  }, {\n    key: 'isLeaf',\n    value: function isLeaf() {\n      return _type2.default.primitive(this._get().data);\n    }\n\n    /**\n     * Method returning whether the cursor is at branch level.\n     *\n     * @return {boolean} - Is the cursor a branch?\n     */\n\n  }, {\n    key: 'isBranch',\n    value: function isBranch() {\n      return !this.isRoot() && !this.isLeaf();\n    }\n\n    /**\n     * Traversal Methods\n     * ------------------\n     */\n\n    /**\n     * Method returning the root cursor.\n     *\n     * @return {Baobab} - The root cursor.\n     */\n\n  }, {\n    key: 'root',\n    value: function root() {\n      return this.tree.select();\n    }\n\n    /**\n     * Method selecting a subpath as a new cursor.\n     *\n     * Arity (1):\n     * @param  {path} path    - The path to select.\n     *\n     * Arity (*):\n     * @param  {...step} path - The path to select.\n     *\n     * @return {Cursor}       - The created cursor.\n     */\n\n  }, {\n    key: 'select',\n    value: function select(path) {\n      if (arguments.length > 1) path = (0, _helpers.arrayFrom)(arguments);\n\n      return this.tree.select(this.path.concat(path));\n    }\n\n    /**\n     * Method returning the parent node of the cursor or else `null` if the\n     * cursor is already at root level.\n     *\n     * @return {Baobab} - The parent cursor.\n     */\n\n  }, {\n    key: 'up',\n    value: function up() {\n      if (!this.isRoot()) return this.tree.select(this.path.slice(0, -1));\n\n      return null;\n    }\n\n    /**\n     * Method returning the child node of the cursor.\n     *\n     * @return {Baobab} - The child cursor.\n     */\n\n  }, {\n    key: 'down',\n    value: function down() {\n      checkPossibilityOfDynamicTraversal('down', this.solvedPath);\n\n      if (!(this._get().data instanceof Array)) throw Error('Baobab.Cursor.down: cannot go down on a non-list type.');\n\n      return this.tree.select(this.solvedPath.concat(0));\n    }\n\n    /**\n     * Method returning the left sibling node of the cursor if this one is\n     * pointing at a list. Returns `null` if this cursor is already leftmost.\n     *\n     * @return {Baobab} - The left sibling cursor.\n     */\n\n  }, {\n    key: 'left',\n    value: function left() {\n      checkPossibilityOfDynamicTraversal('left', this.solvedPath);\n\n      var last = +this.solvedPath[this.solvedPath.length - 1];\n\n      if (isNaN(last)) throw Error('Baobab.Cursor.left: cannot go left on a non-list type.');\n\n      return last ? this.tree.select(this.solvedPath.slice(0, -1).concat(last - 1)) : null;\n    }\n\n    /**\n     * Method returning the right sibling node of the cursor if this one is\n     * pointing at a list. Returns `null` if this cursor is already rightmost.\n     *\n     * @return {Baobab} - The right sibling cursor.\n     */\n\n  }, {\n    key: 'right',\n    value: function right() {\n      checkPossibilityOfDynamicTraversal('right', this.solvedPath);\n\n      var last = +this.solvedPath[this.solvedPath.length - 1];\n\n      if (isNaN(last)) throw Error('Baobab.Cursor.right: cannot go right on a non-list type.');\n\n      if (last + 1 === this.up()._get().data.length) return null;\n\n      return this.tree.select(this.solvedPath.slice(0, -1).concat(last + 1));\n    }\n\n    /**\n     * Method returning the leftmost sibling node of the cursor if this one is\n     * pointing at a list.\n     *\n     * @return {Baobab} - The leftmost sibling cursor.\n     */\n\n  }, {\n    key: 'leftmost',\n    value: function leftmost() {\n      checkPossibilityOfDynamicTraversal('leftmost', this.solvedPath);\n\n      var last = +this.solvedPath[this.solvedPath.length - 1];\n\n      if (isNaN(last)) throw Error('Baobab.Cursor.leftmost: cannot go left on a non-list type.');\n\n      return this.tree.select(this.solvedPath.slice(0, -1).concat(0));\n    }\n\n    /**\n     * Method returning the rightmost sibling node of the cursor if this one is\n     * pointing at a list.\n     *\n     * @return {Baobab} - The rightmost sibling cursor.\n     */\n\n  }, {\n    key: 'rightmost',\n    value: function rightmost() {\n      checkPossibilityOfDynamicTraversal('rightmost', this.solvedPath);\n\n      var last = +this.solvedPath[this.solvedPath.length - 1];\n\n      if (isNaN(last)) throw Error('Baobab.Cursor.rightmost: cannot go right on a non-list type.');\n\n      var list = this.up()._get().data;\n\n      return this.tree.select(this.solvedPath.slice(0, -1).concat(list.length - 1));\n    }\n\n    /**\n     * Method mapping the children nodes of the cursor.\n     *\n     * @param  {function} fn      - The function to map.\n     * @param  {object}   [scope] - An optional scope.\n     * @return {array}            - The resultant array.\n     */\n\n  }, {\n    key: 'map',\n    value: function map(fn, scope) {\n      checkPossibilityOfDynamicTraversal('map', this.solvedPath);\n\n      var array = this._get().data,\n          l = arguments.length;\n\n      if (!_type2.default.array(array)) throw Error('baobab.Cursor.map: cannot map a non-list type.');\n\n      return array.map(function (item, i) {\n        return fn.call(l > 1 ? scope : this, this.select(i), i, array);\n      }, this);\n    }\n\n    /**\n     * Getter Methods\n     * ---------------\n     */\n\n    /**\n     * Internal get method. Basically contains the main body of the `get` method\n     * without the event emitting. This is sometimes needed not to fire useless\n     * events.\n     *\n     * @param  {path}   [path=[]]       - Path to get in the tree.\n     * @return {object} info            - The resultant information.\n     * @return {mixed}  info.data       - Data at path.\n     * @return {array}  info.solvedPath - The path solved when getting.\n     */\n\n  }, {\n    key: '_get',\n    value: function _get() {\n      var path = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n\n      if (!_type2.default.path(path)) throw (0, _helpers.makeError)('Baobab.Cursor.getters: invalid path.', { path: path });\n\n      if (!this.solvedPath) return { data: undefined, solvedPath: null, exists: false };\n\n      return (0, _helpers.getIn)(this.tree._data, this.solvedPath.concat(path));\n    }\n\n    /**\n     * Method used to check whether a certain path exists in the tree starting\n     * from the current cursor.\n     *\n     * Arity (1):\n     * @param  {path}   path           - Path to check in the tree.\n     *\n     * Arity (2):\n     * @param {..step}  path           - Path to check in the tree.\n     *\n     * @return {boolean}               - Does the given path exists?\n     */\n\n  }, {\n    key: 'exists',\n    value: function exists(path) {\n      path = (0, _helpers.coercePath)(path);\n\n      if (arguments.length > 1) path = (0, _helpers.arrayFrom)(arguments);\n\n      return this._get(path).exists;\n    }\n\n    /**\n     * Method used to get data from the tree. Will fire a `get` event from the\n     * tree so that the user may sometimes react upon it to fetch data, for\n     * instance.\n     *\n     * Arity (1):\n     * @param  {path}   path           - Path to get in the tree.\n     *\n     * Arity (2):\n     * @param  {..step} path           - Path to get in the tree.\n     *\n     * @return {mixed}                 - Data at path.\n     */\n\n  }, {\n    key: 'get',\n    value: function get(path) {\n      path = (0, _helpers.coercePath)(path);\n\n      if (arguments.length > 1) path = (0, _helpers.arrayFrom)(arguments);\n\n      var _get2 = this._get(path),\n          data = _get2.data,\n          solvedPath = _get2.solvedPath;\n\n      // Emitting the event\n\n\n      this.tree.emit('get', { data: data, solvedPath: solvedPath, path: this.path.concat(path) });\n\n      return data;\n    }\n\n    /**\n     * Method used to shallow clone data from the tree.\n     *\n     * Arity (1):\n     * @param  {path}   path           - Path to get in the tree.\n     *\n     * Arity (2):\n     * @param  {..step} path           - Path to get in the tree.\n     *\n     * @return {mixed}                 - Cloned data at path.\n     */\n\n  }, {\n    key: 'clone',\n    value: function clone() {\n      var data = this.get.apply(this, arguments);\n\n      return (0, _helpers.shallowClone)(data);\n    }\n\n    /**\n     * Method used to deep clone data from the tree.\n     *\n     * Arity (1):\n     * @param  {path}   path           - Path to get in the tree.\n     *\n     * Arity (2):\n     * @param  {..step} path           - Path to get in the tree.\n     *\n     * @return {mixed}                 - Cloned data at path.\n     */\n\n  }, {\n    key: 'deepClone',\n    value: function deepClone() {\n      var data = this.get.apply(this, arguments);\n\n      return (0, _helpers.deepClone)(data);\n    }\n\n    /**\n     * Method used to return raw data from the tree, by carefully avoiding\n     * computed one.\n     *\n     * @todo: should be more performant as the cloning should happen as well as\n     * when dropping computed data.\n     *\n     * Arity (1):\n     * @param  {path}   path           - Path to serialize in the tree.\n     *\n     * Arity (2):\n     * @param  {..step} path           - Path to serialize in the tree.\n     *\n     * @return {mixed}                 - The retrieved raw data.\n     */\n\n  }, {\n    key: 'serialize',\n    value: function serialize(path) {\n      path = (0, _helpers.coercePath)(path);\n\n      if (arguments.length > 1) path = (0, _helpers.arrayFrom)(arguments);\n\n      if (!_type2.default.path(path)) throw (0, _helpers.makeError)('Baobab.Cursor.getters: invalid path.', { path: path });\n\n      if (!this.solvedPath) return undefined;\n\n      var fullPath = this.solvedPath.concat(path);\n\n      var data = (0, _helpers.deepClone)((0, _helpers.getIn)(this.tree._data, fullPath).data),\n          monkeys = (0, _helpers.getIn)(this.tree._monkeys, fullPath).data;\n\n      var dropComputedData = function dropComputedData(d, m) {\n        if (!_type2.default.object(m) || !_type2.default.object(d)) return;\n\n        for (var k in m) {\n          if (m[k] instanceof _monkey.Monkey) delete d[k];else dropComputedData(d[k], m[k]);\n        }\n      };\n\n      dropComputedData(data, monkeys);\n      return data;\n    }\n\n    /**\n     * Method used to project some of the data at cursor onto a map or a list.\n     *\n     * @param  {object|array} projection - The projection's formal definition.\n     * @return {object|array}            - The resultant map/list.\n     */\n\n  }, {\n    key: 'project',\n    value: function project(projection) {\n      if (_type2.default.object(projection)) {\n        var data = {};\n\n        for (var k in projection) {\n          data[k] = this.get(projection[k]);\n        }return data;\n      } else if (_type2.default.array(projection)) {\n        var _data = [];\n\n        for (var i = 0, l = projection.length; i < l; i++) {\n          _data.push(this.get(projection[i]));\n        }return _data;\n      }\n\n      throw (0, _helpers.makeError)('Baobab.Cursor.project: wrong projection.', { projection: projection });\n    }\n\n    /**\n     * History Methods\n     * ----------------\n     */\n\n    /**\n     * Methods starting to record the cursor's successive states.\n     *\n     * @param  {integer} [maxRecords] - Maximum records to keep in memory. Note\n     *                                  that if no number is provided, the cursor\n     *                                  will keep everything.\n     * @return {Cursor}               - The cursor instance for chaining purposes.\n     */\n\n  }, {\n    key: 'startRecording',\n    value: function startRecording(maxRecords) {\n      maxRecords = maxRecords || Infinity;\n\n      if (maxRecords < 1) throw (0, _helpers.makeError)('Baobab.Cursor.startRecording: invalid max records.', {\n        value: maxRecords\n      });\n\n      this.state.recording = true;\n\n      if (this.archive) return this;\n\n      // Lazy binding\n      this._lazyBind();\n\n      this.archive = new _helpers.Archive(maxRecords);\n      return this;\n    }\n\n    /**\n     * Methods stopping to record the cursor's successive states.\n     *\n     * @return {Cursor} - The cursor instance for chaining purposes.\n     */\n\n  }, {\n    key: 'stopRecording',\n    value: function stopRecording() {\n      this.state.recording = false;\n      return this;\n    }\n\n    /**\n     * Methods undoing n steps of the cursor's recorded states.\n     *\n     * @param  {integer} [steps=1] - The number of steps to rollback.\n     * @return {Cursor}            - The cursor instance for chaining purposes.\n     */\n\n  }, {\n    key: 'undo',\n    value: function undo() {\n      var steps = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n\n      if (!this.state.recording) throw new Error('Baobab.Cursor.undo: cursor is not recording.');\n\n      var record = this.archive.back(steps);\n\n      if (!record) throw Error('Baobab.Cursor.undo: cannot find a relevant record.');\n\n      this.state.undoing = true;\n      this.set(record);\n\n      return this;\n    }\n\n    /**\n     * Methods returning whether the cursor has a recorded history.\n     *\n     * @return {boolean} - `true` if the cursor has a recorded history?\n     */\n\n  }, {\n    key: 'hasHistory',\n    value: function hasHistory() {\n      return !!(this.archive && this.archive.get().length);\n    }\n\n    /**\n     * Methods returning the cursor's history.\n     *\n     * @return {array} - The cursor's history.\n     */\n\n  }, {\n    key: 'getHistory',\n    value: function getHistory() {\n      return this.archive ? this.archive.get() : [];\n    }\n\n    /**\n     * Methods clearing the cursor's history.\n     *\n     * @return {Cursor} - The cursor instance for chaining purposes.\n     */\n\n  }, {\n    key: 'clearHistory',\n    value: function clearHistory() {\n      if (this.archive) this.archive.clear();\n      return this;\n    }\n\n    /**\n     * Releasing\n     * ----------\n     */\n\n    /**\n     * Methods releasing the cursor from memory.\n     */\n\n  }, {\n    key: 'release',\n    value: function release() {\n\n      // Removing listeners on parent\n      if (this._dynamicPath) this.tree.off('write', this._writeHandler);\n\n      this.tree.off('update', this._updateHandler);\n\n      // Unsubscribe from the parent\n      if (this.hash) delete this.tree._cursors[this.hash];\n\n      // Dereferencing\n      delete this.tree;\n      delete this.path;\n      delete this.solvedPath;\n      delete this.archive;\n\n      // Killing emitter\n      this.kill();\n      this.state.killed = true;\n    }\n\n    /**\n     * Output\n     * -------\n     */\n\n    /**\n     * Overriding the `toJSON` method for convenient use with JSON.stringify.\n     *\n     * @return {mixed} - Data at cursor.\n     */\n\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      return this.serialize();\n    }\n\n    /**\n     * Overriding the `toString` method for debugging purposes.\n     *\n     * @return {string} - The cursor's identity.\n     */\n\n  }, {\n    key: 'toString',\n    value: function toString() {\n      return this._identity;\n    }\n  }]);\n\n  return Cursor;\n}(_emmett2.default);\n\n/**\n * Method used to allow iterating over cursors containing list-type data.\n *\n * e.g. for(let i of cursor) { ... }\n *\n * @returns {object} -  Each item sequentially.\n */\n\n\nexports.default = Cursor;\nif (typeof Symbol === 'function' && typeof Symbol.iterator !== 'undefined') {\n  Cursor.prototype[Symbol.iterator] = function () {\n    var array = this._get().data;\n\n    if (!_type2.default.array(array)) throw Error('baobab.Cursor.@@iterate: cannot iterate a non-list type.');\n\n    var i = 0;\n\n    var cursor = this,\n        length = array.length;\n\n    return {\n      next: function next() {\n        if (i < length) {\n          return {\n            value: cursor.select(i++)\n          };\n        }\n\n        return {\n          done: true\n        };\n      }\n    };\n  };\n}\n\n/**\n * Setter Methods\n * ---------------\n *\n * Those methods are dynamically assigned to the class for DRY reasons.\n */\n\n// Not using a Set so that ES5 consumers don't pay a bundle size price\nvar INTRANSITIVE_SETTERS = {\n  unset: true,\n  pop: true,\n  shift: true\n};\n\n/**\n * Function creating a setter method for the Cursor class.\n *\n * @param {string}   name          - the method's name.\n * @param {function} [typeChecker] - a function checking that the given value is\n *                                   valid for the given operation.\n */\nfunction makeSetter(name, typeChecker) {\n\n  /**\n   * Binding a setter method to the Cursor class and having the following\n   * definition.\n   *\n   * Note: this is not really possible to make those setters variadic because\n   * it would create an impossible polymorphism with path.\n   *\n   * @todo: perform value validation elsewhere so that tree.update can\n   * beneficiate from it.\n   *\n   * Arity (1):\n   * @param  {mixed} value - New value to set at cursor's path.\n   *\n   * Arity (2):\n   * @param  {path}  path  - Subpath to update starting from cursor's.\n   * @param  {mixed} value - New value to set.\n   *\n   * @return {mixed}       - Data at path.\n   */\n  Cursor.prototype[name] = function (path, value) {\n\n    // We should warn the user if he applies to many arguments to the function\n    if (arguments.length > 2) throw (0, _helpers.makeError)('Baobab.Cursor.' + name + ': too many arguments.');\n\n    // Handling arities\n    if (arguments.length === 1 && !INTRANSITIVE_SETTERS[name]) {\n      value = path;\n      path = [];\n    }\n\n    // Coerce path\n    path = (0, _helpers.coercePath)(path);\n\n    // Checking the path's validity\n    if (!_type2.default.path(path)) throw (0, _helpers.makeError)('Baobab.Cursor.' + name + ': invalid path.', { path: path });\n\n    // Checking the value's validity\n    if (typeChecker && !typeChecker(value)) throw (0, _helpers.makeError)('Baobab.Cursor.' + name + ': invalid value.', { path: path, value: value });\n\n    // Checking the solvability of the cursor's dynamic path\n    if (!this.solvedPath) throw (0, _helpers.makeError)('Baobab.Cursor.' + name + ': the dynamic path of the cursor cannot be solved.', { path: this.path });\n\n    var fullPath = this.solvedPath.concat(path);\n\n    // Filing the update to the tree\n    return this.tree.update(fullPath, {\n      type: name,\n      value: value\n    });\n  };\n}\n\n/**\n * Making the necessary setters.\n */\nmakeSetter('set');\nmakeSetter('unset');\nmakeSetter('apply', _type2.default.function);\nmakeSetter('push');\nmakeSetter('concat', _type2.default.array);\nmakeSetter('unshift');\nmakeSetter('pop');\nmakeSetter('shift');\nmakeSetter('splice', _type2.default.splicer);\nmakeSetter('merge', _type2.default.object);\nmakeSetter('deepMerge', _type2.default.object);","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _emmett = require('emmett');\n\nvar _emmett2 = _interopRequireDefault(_emmett);\n\nvar _cursor = require('./cursor');\n\nvar _cursor2 = _interopRequireDefault(_cursor);\n\nvar _type = require('./type');\n\nvar _type2 = _interopRequireDefault(_type);\n\nvar _helpers = require('./helpers');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Baobab Watchers\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * ================\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Abstraction used to listen and retrieve data from multiple parts of a\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Baobab tree at once.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\n\n/**\n * Watcher class.\n *\n * @constructor\n * @param {Baobab} tree     - The watched tree.\n * @param {object} mapping  - A mapping of the paths to watch in the tree.\n */\nvar Watcher = function (_Emitter) {\n  _inherits(Watcher, _Emitter);\n\n  function Watcher(tree, mapping) {\n    _classCallCheck(this, Watcher);\n\n    // Properties\n    var _this = _possibleConstructorReturn(this, (Watcher.__proto__ || Object.getPrototypeOf(Watcher)).call(this));\n\n    _this.tree = tree;\n    _this.mapping = null;\n\n    _this.state = {\n      killed: false\n    };\n\n    // Initializing\n    _this.refresh(mapping);\n\n    // Listening\n    _this.handler = function (e) {\n      if (_this.state.killed) return;\n\n      var watchedPaths = _this.getWatchedPaths();\n\n      if ((0, _helpers.solveUpdate)(e.data.paths, watchedPaths)) return _this.emit('update');\n    };\n\n    _this.tree.on('update', _this.handler);\n    return _this;\n  }\n\n  /**\n   * Method used to get the current watched paths.\n   *\n   * @return {array} - The array of watched paths.\n   */\n\n\n  _createClass(Watcher, [{\n    key: 'getWatchedPaths',\n    value: function getWatchedPaths() {\n      var _this2 = this;\n\n      var rawPaths = Object.keys(this.mapping).map(function (k) {\n        var v = _this2.mapping[k];\n\n        // Watcher mappings can accept a cursor\n        if (v instanceof _cursor2.default) return v.solvedPath;\n\n        return _this2.mapping[k];\n      });\n\n      return rawPaths.reduce(function (cp, p) {\n\n        // Handling path polymorphisms\n        p = [].concat(p);\n\n        // Dynamic path?\n        if (_type2.default.dynamicPath(p)) p = (0, _helpers.getIn)(_this2.tree._data, p).solvedPath;\n\n        if (!p) return cp;\n\n        // Facet path?\n        var monkeyPath = _type2.default.monkeyPath(_this2.tree._monkeys, p);\n\n        if (monkeyPath) return cp.concat((0, _helpers.getIn)(_this2.tree._monkeys, monkeyPath).data.relatedPaths());\n\n        return cp.concat([p]);\n      }, []);\n    }\n\n    /**\n     * Method used to return a map of the watcher's cursors.\n     *\n     * @return {object} - TMap of relevant cursors.\n     */\n\n  }, {\n    key: 'getCursors',\n    value: function getCursors() {\n      var _this3 = this;\n\n      var cursors = {};\n\n      Object.keys(this.mapping).forEach(function (k) {\n        var path = _this3.mapping[k];\n\n        if (path instanceof _cursor2.default) cursors[k] = path;else cursors[k] = _this3.tree.select(path);\n      });\n\n      return cursors;\n    }\n\n    /**\n     * Method used to refresh the watcher's mapping.\n     *\n     * @param  {object}  mapping  - The new mapping to apply.\n     * @return {Watcher}          - Itself for chaining purposes.\n     */\n\n  }, {\n    key: 'refresh',\n    value: function refresh(mapping) {\n\n      if (!_type2.default.watcherMapping(mapping)) throw (0, _helpers.makeError)('Baobab.watch: invalid mapping.', { mapping: mapping });\n\n      this.mapping = mapping;\n\n      // Creating the get method\n      var projection = {};\n\n      for (var k in mapping) {\n        projection[k] = mapping[k] instanceof _cursor2.default ? mapping[k].path : mapping[k];\n      }this.get = this.tree.project.bind(this.tree, projection);\n    }\n\n    /**\n     * Methods releasing the watcher from memory.\n     */\n\n  }, {\n    key: 'release',\n    value: function release() {\n\n      this.tree.off('update', this.handler);\n      this.state.killed = true;\n      this.kill();\n    }\n  }]);\n\n  return Watcher;\n}(_emmett2.default);\n\nexports.default = Watcher;","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isNaN(val) === false) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^((?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  if (ms >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (ms >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (ms >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (ms >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  return plural(ms, d, 'day') ||\n    plural(ms, h, 'hour') ||\n    plural(ms, m, 'minute') ||\n    plural(ms, s, 'second') ||\n    ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, n, name) {\n  if (ms < n) {\n    return;\n  }\n  if (ms < n * 1.5) {\n    return Math.floor(ms / n) + ' ' + name;\n  }\n  return Math.ceil(ms / n) + ' ' + name + 's';\n}\n","'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _emmett = require('emmett');\n\nvar _emmett2 = _interopRequireDefault(_emmett);\n\nvar _cursor = require('./cursor');\n\nvar _cursor2 = _interopRequireDefault(_cursor);\n\nvar _monkey = require('./monkey');\n\nvar _watcher = require('./watcher');\n\nvar _watcher2 = _interopRequireDefault(_watcher);\n\nvar _type = require('./type');\n\nvar _type2 = _interopRequireDefault(_type);\n\nvar _update2 = require('./update');\n\nvar _update3 = _interopRequireDefault(_update2);\n\nvar _helpers = require('./helpers');\n\nvar helpers = _interopRequireWildcard(_helpers);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Baobab Data Structure\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * ======================\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * A handy data tree with cursors.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\n\nvar arrayFrom = helpers.arrayFrom,\n    coercePath = helpers.coercePath,\n    deepFreeze = helpers.deepFreeze,\n    getIn = helpers.getIn,\n    makeError = helpers.makeError,\n    deepClone = helpers.deepClone,\n    deepMerge = helpers.deepMerge,\n    shallowClone = helpers.shallowClone,\n    shallowMerge = helpers.shallowMerge,\n    hashPath = helpers.hashPath;\n\n/**\n * Baobab defaults\n */\n\nvar DEFAULTS = {\n\n  // Should the tree handle its transactions on its own?\n  autoCommit: true,\n\n  // Should the transactions be handled asynchronously?\n  asynchronous: true,\n\n  // Should the tree's data be immutable?\n  immutable: true,\n\n  // Should the monkeys be lazy?\n  lazyMonkeys: true,\n\n  // Should we evaluate monkeys?\n  monkeyBusiness: true,\n\n  // Should the tree be persistent?\n  persistent: true,\n\n  // Should the tree's update be pure?\n  pure: true,\n\n  // Validation specifications\n  validate: null,\n\n  // Validation behavior 'rollback' or 'notify'\n  validationBehavior: 'rollback'\n};\n\n/**\n * Baobab class\n *\n * @constructor\n * @param {object|array} [initialData={}]    - Initial data passed to the tree.\n * @param {object}       [opts]              - Optional options.\n * @param {boolean}      [opts.autoCommit]   - Should the tree auto-commit?\n * @param {boolean}      [opts.asynchronous] - Should the tree's transactions\n *                                             handled asynchronously?\n * @param {boolean}      [opts.immutable]    - Should the tree be immutable?\n * @param {boolean}      [opts.persistent]   - Should the tree be persistent?\n * @param {boolean}      [opts.pure]         - Should the tree be pure?\n * @param {function}     [opts.validate]     - Validation function.\n * @param {string}       [opts.validationBehaviour] - \"rollback\" or \"notify\".\n */\n\nvar Baobab = function (_Emitter) {\n  _inherits(Baobab, _Emitter);\n\n  function Baobab(initialData, opts) {\n    _classCallCheck(this, Baobab);\n\n    // Setting initialData to an empty object if no data is provided by use\n    var _this = _possibleConstructorReturn(this, (Baobab.__proto__ || Object.getPrototypeOf(Baobab)).call(this));\n\n    if (arguments.length < 1) initialData = {};\n\n    // Checking whether given initial data is valid\n    if (!_type2.default.object(initialData) && !_type2.default.array(initialData)) throw makeError('Baobab: invalid data.', { data: initialData });\n\n    // Merging given options with defaults\n    _this.options = shallowMerge({}, DEFAULTS, opts);\n\n    // Disabling immutability & persistence if persistence if disabled\n    if (!_this.options.persistent) {\n      _this.options.immutable = false;\n      _this.options.pure = false;\n    }\n\n    // Privates\n    _this._identity = '[object Baobab]';\n    _this._cursors = {};\n    _this._future = null;\n    _this._transaction = [];\n    _this._affectedPathsIndex = {};\n    _this._monkeys = {};\n    _this._previousData = null;\n    _this._data = initialData;\n\n    // Properties\n    _this.root = new _cursor2.default(_this, [], 'Î»');\n    delete _this.root.release;\n\n    // Does the user want an immutable tree?\n    if (_this.options.immutable) deepFreeze(_this._data);\n\n    // Bootstrapping root cursor's getters and setters\n    var bootstrap = function bootstrap(name) {\n      _this[name] = function () {\n        var r = this.root[name].apply(this.root, arguments);\n        return r instanceof _cursor2.default ? this : r;\n      };\n    };\n\n    ['apply', 'clone', 'concat', 'deepClone', 'deepMerge', 'exists', 'get', 'push', 'merge', 'pop', 'project', 'serialize', 'set', 'shift', 'splice', 'unset', 'unshift'].forEach(bootstrap);\n\n    // Registering the initial monkeys\n    if (_this.options.monkeyBusiness) {\n      _this._refreshMonkeys();\n    }\n\n    // Initial validation\n    var validationError = _this.validate();\n\n    if (validationError) throw Error('Baobab: invalid data.', { error: validationError });\n    return _this;\n  }\n\n  /**\n   * Internal method used to refresh the tree's monkey register on every\n   * update.\n   * Note 1) For the time being, placing monkeys beneath array nodes is not\n   * allowed for performance reasons.\n   *\n   * @param  {mixed}   node      - The starting node.\n   * @param  {array}   path      - The starting node's path.\n   * @param  {string}  operation - The operation that lead to a refreshment.\n   * @return {Baobab}            - The tree instance for chaining purposes.\n   */\n\n\n  _createClass(Baobab, [{\n    key: '_refreshMonkeys',\n    value: function _refreshMonkeys(node, path, operation) {\n      var _this2 = this;\n\n      var clean = function clean(data) {\n        var p = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n        if (data instanceof _monkey.Monkey) {\n          data.release();\n          (0, _update3.default)(_this2._monkeys, p, { type: 'unset' }, {\n            immutable: false,\n            persistent: false,\n            pure: false\n          });\n\n          return;\n        }\n\n        if (_type2.default.object(data)) {\n          for (var k in data) {\n            clean(data[k], p.concat(k));\n          }\n        }\n      };\n\n      var walk = function walk(data) {\n        var p = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n\n        // Should we sit a monkey in the tree?\n        if (data instanceof _monkey.MonkeyDefinition || data instanceof _monkey.Monkey) {\n          var monkeyInstance = new _monkey.Monkey(_this2, p, data instanceof _monkey.Monkey ? data.definition : data);\n\n          (0, _update3.default)(_this2._monkeys, p, { type: 'set', value: monkeyInstance }, {\n            immutable: false,\n            persistent: false,\n            pure: false\n          });\n\n          return;\n        }\n\n        // Object iteration\n        if (_type2.default.object(data)) {\n          for (var k in data) {\n            walk(data[k], p.concat(k));\n          }\n        }\n      };\n\n      // Walking the whole tree\n      if (!arguments.length) {\n        walk(this._data);\n      } else {\n        var monkeysNode = getIn(this._monkeys, path).data;\n\n        // Is this required that we clean some already existing monkeys?\n        if (monkeysNode) clean(monkeysNode, path);\n\n        // Let's walk the tree only from the updated point\n        if (operation !== 'unset') {\n          walk(node, path);\n        }\n      }\n\n      return this;\n    }\n\n    /**\n     * Method used to validate the tree's data.\n     *\n     * @return {boolean} - Is the tree valid?\n     */\n\n  }, {\n    key: 'validate',\n    value: function validate(affectedPaths) {\n      var _options = this.options,\n          validate = _options.validate,\n          behavior = _options.validationBehavior;\n\n\n      if (typeof validate !== 'function') return null;\n\n      var error = validate.call(this, this._previousData, this._data, affectedPaths || [[]]);\n\n      if (error instanceof Error) {\n\n        if (behavior === 'rollback') {\n          this._data = this._previousData;\n          this._affectedPathsIndex = {};\n          this._transaction = [];\n          this._previousData = this._data;\n        }\n\n        this.emit('invalid', { error: error });\n\n        return error;\n      }\n\n      return null;\n    }\n\n    /**\n     * Method used to select data within the tree by creating a cursor. Cursors\n     * are kept as singletons by the tree for performance and hygiene reasons.\n     *\n     * Arity (1):\n     * @param {path}    path - Path to select in the tree.\n     *\n     * Arity (*):\n     * @param {...step} path - Path to select in the tree.\n     *\n     * @return {Cursor}      - The resultant cursor.\n     */\n\n  }, {\n    key: 'select',\n    value: function select(path) {\n\n      // If no path is given, we simply return the root\n      path = path || [];\n\n      // Variadic\n      if (arguments.length > 1) path = arrayFrom(arguments);\n\n      // Checking that given path is valid\n      if (!_type2.default.path(path)) throw makeError('Baobab.select: invalid path.', { path: path });\n\n      // Casting to array\n      path = [].concat(path);\n\n      // Computing hash (done here because it would be too late to do it in the\n      // cursor's constructor since we need to hit the cursors' index first).\n      var hash = hashPath(path);\n\n      // Creating a new cursor or returning the already existing one for the\n      // requested path.\n      var cursor = this._cursors[hash];\n\n      if (!cursor) {\n        cursor = new _cursor2.default(this, path, hash);\n        this._cursors[hash] = cursor;\n      }\n\n      // Emitting an event to notify that a part of the tree was selected\n      this.emit('select', { path: path, cursor: cursor });\n      return cursor;\n    }\n\n    /**\n     * Method used to update the tree. Updates are simply expressed by a path,\n     * dynamic or not, and an operation.\n     *\n     * This is where path solving should happen and not in the cursor.\n     *\n     * @param  {path}   path      - The path where we'll apply the operation.\n     * @param  {object} operation - The operation to apply.\n     * @return {mixed} - Return the result of the update.\n     */\n\n  }, {\n    key: 'update',\n    value: function update(path, operation) {\n      var _this3 = this;\n\n      // Coercing path\n      path = coercePath(path);\n\n      if (!_type2.default.operationType(operation.type)) throw makeError('Baobab.update: unknown operation type \"' + operation.type + '\".', { operation: operation });\n\n      // Solving the given path\n\n      var _getIn = getIn(this._data, path),\n          solvedPath = _getIn.solvedPath,\n          exists = _getIn.exists;\n\n      // If we couldn't solve the path, we throw\n\n\n      if (!solvedPath) throw makeError('Baobab.update: could not solve the given path.', {\n        path: solvedPath\n      });\n\n      // Read-only path?\n      var monkeyPath = _type2.default.monkeyPath(this._monkeys, solvedPath);\n      if (monkeyPath && solvedPath.length > monkeyPath.length) throw makeError('Baobab.update: attempting to update a read-only path.', {\n        path: solvedPath\n      });\n\n      // We don't unset irrelevant paths\n      if (operation.type === 'unset' && !exists) return;\n\n      // If we merge data, we need to acknowledge monkeys\n      var realOperation = operation;\n      if (/merge/i.test(operation.type)) {\n        var monkeysNode = getIn(this._monkeys, solvedPath).data;\n\n        if (_type2.default.object(monkeysNode)) {\n\n          // Cloning the operation not to create weird behavior for the user\n          realOperation = shallowClone(realOperation);\n\n          // Fetching the existing node in the current data\n          var currentNode = getIn(this._data, solvedPath).data;\n\n          if (/deep/i.test(realOperation.type)) realOperation.value = deepMerge({}, deepMerge({}, currentNode, deepClone(monkeysNode)), realOperation.value);else realOperation.value = shallowMerge({}, deepMerge({}, currentNode, deepClone(monkeysNode)), realOperation.value);\n        }\n      }\n\n      // Stashing previous data if this is the frame's first update\n      if (!this._transaction.length) this._previousData = this._data;\n\n      // Applying the operation\n      var result = (0, _update3.default)(this._data, solvedPath, realOperation, this.options);\n\n      var data = result.data,\n          node = result.node;\n\n      // If because of purity, the update was moot, we stop here\n\n      if (!('data' in result)) return node;\n\n      // If the operation is push, the affected path is slightly different\n      var affectedPath = solvedPath.concat(operation.type === 'push' ? node.length - 1 : []);\n\n      var hash = hashPath(affectedPath);\n\n      // Updating data and transaction\n      this._data = data;\n      this._affectedPathsIndex[hash] = true;\n      this._transaction.push(shallowMerge({}, operation, { path: affectedPath }));\n\n      // Updating the monkeys\n      if (this.options.monkeyBusiness) {\n        this._refreshMonkeys(node, solvedPath, operation.type);\n      }\n\n      // Emitting a `write` event\n      this.emit('write', { path: affectedPath });\n\n      // Should we let the user commit?\n      if (!this.options.autoCommit) return node;\n\n      // Should we update asynchronously?\n      if (!this.options.asynchronous) {\n        this.commit();\n        return node;\n      }\n\n      // Updating asynchronously\n      if (!this._future) this._future = setTimeout(function () {\n        return _this3.commit();\n      }, 0);\n\n      // Finally returning the affected node\n      return node;\n    }\n\n    /**\n     * Method committing the updates of the tree and firing the tree's events.\n     *\n     * @return {Baobab} - The tree instance for chaining purposes.\n     */\n\n  }, {\n    key: 'commit',\n    value: function commit() {\n\n      // Do not fire update if the transaction is empty\n      if (!this._transaction.length) return this;\n\n      // Clearing timeout if one was defined\n      if (this._future) this._future = clearTimeout(this._future);\n\n      var affectedPaths = Object.keys(this._affectedPathsIndex).map(function (h) {\n        return h !== 'Î»' ? h.split('Î»').slice(1) : [];\n      });\n\n      // Is the tree still valid?\n      var validationError = this.validate(affectedPaths);\n\n      if (validationError) return this;\n\n      // Caching to keep original references before we change them\n      var transaction = this._transaction,\n          previousData = this._previousData;\n\n      this._affectedPathsIndex = {};\n      this._transaction = [];\n      this._previousData = this._data;\n\n      // Emitting update event\n      this.emit('update', {\n        paths: affectedPaths,\n        currentData: this._data,\n        transaction: transaction,\n        previousData: previousData\n      });\n\n      return this;\n    }\n\n    /**\n     * Method returning a monkey at the given path or else `null`.\n     *\n     * @param  {path}        path - Path of the monkey to retrieve.\n     * @return {Monkey|null}      - The Monkey instance of `null`.\n     */\n\n  }, {\n    key: 'getMonkey',\n    value: function getMonkey(path) {\n      path = coercePath(path);\n\n      var monkey = getIn(this._monkeys, [].concat(path)).data;\n\n      if (monkey instanceof _monkey.Monkey) return monkey;\n\n      return null;\n    }\n\n    /**\n     * Method used to watch a collection of paths within the tree. Very useful\n     * to bind UI components and such to the tree.\n     *\n     * @param  {object} mapping - Mapping of paths to listen.\n     * @return {Cursor}         - The created watcher.\n     */\n\n  }, {\n    key: 'watch',\n    value: function watch(mapping) {\n      return new _watcher2.default(this, mapping);\n    }\n\n    /**\n     * Method releasing the tree and its attached data from memory.\n     */\n\n  }, {\n    key: 'release',\n    value: function release() {\n      var k = void 0;\n\n      this.emit('release');\n\n      delete this.root;\n\n      delete this._data;\n      delete this._previousData;\n      delete this._transaction;\n      delete this._affectedPathsIndex;\n      delete this._monkeys;\n\n      // Releasing cursors\n      for (k in this._cursors) {\n        this._cursors[k].release();\n      }delete this._cursors;\n\n      // Killing event emitter\n      this.kill();\n    }\n\n    /**\n     * Overriding the `toJSON` method for convenient use with JSON.stringify.\n     *\n     * @return {mixed} - Data at cursor.\n     */\n\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      return this.serialize();\n    }\n\n    /**\n     * Overriding the `toString` method for debugging purposes.\n     *\n     * @return {string} - The baobab's identity.\n     */\n\n  }, {\n    key: 'toString',\n    value: function toString() {\n      return this._identity;\n    }\n  }]);\n\n  return Baobab;\n}(_emmett2.default);\n\n/**\n * Monkey helper.\n */\n\n\nBaobab.monkey = function () {\n  for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  if (!args.length) throw new Error('Baobab.monkey: missing definition.');\n\n  if (args.length === 1 && typeof args[0] !== 'function') return new _monkey.MonkeyDefinition(args[0]);\n\n  return new _monkey.MonkeyDefinition(args);\n};\nBaobab.dynamicNode = Baobab.monkey;\n\n/**\n * Exposing some internals for convenience\n */\nBaobab.Cursor = _cursor2.default;\nBaobab.MonkeyDefinition = _monkey.MonkeyDefinition;\nBaobab.Monkey = _monkey.Monkey;\nBaobab.type = _type2.default;\nBaobab.helpers = helpers;\n\n/**\n * Version.\n */\nBaobab.VERSION = '2.5.2';\n\n/**\n * Exporting.\n */\nmodule.exports = Baobab;","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = createDebug.debug = createDebug['default'] = createDebug;\nexports.coerce = coerce;\nexports.disable = disable;\nexports.enable = enable;\nexports.enabled = enabled;\nexports.humanize = require('ms');\n\n/**\n * The currently active debug mode names, and names to skip.\n */\n\nexports.names = [];\nexports.skips = [];\n\n/**\n * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n *\n * Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n */\n\nexports.formatters = {};\n\n/**\n * Previous log timestamp.\n */\n\nvar prevTime;\n\n/**\n * Select a color.\n * @param {String} namespace\n * @return {Number}\n * @api private\n */\n\nfunction selectColor(namespace) {\n  var hash = 0, i;\n\n  for (i in namespace) {\n    hash  = ((hash << 5) - hash) + namespace.charCodeAt(i);\n    hash |= 0; // Convert to 32bit integer\n  }\n\n  return exports.colors[Math.abs(hash) % exports.colors.length];\n}\n\n/**\n * Create a debugger with the given `namespace`.\n *\n * @param {String} namespace\n * @return {Function}\n * @api public\n */\n\nfunction createDebug(namespace) {\n\n  function debug() {\n    // disabled?\n    if (!debug.enabled) return;\n\n    var self = debug;\n\n    // set `diff` timestamp\n    var curr = +new Date();\n    var ms = curr - (prevTime || curr);\n    self.diff = ms;\n    self.prev = prevTime;\n    self.curr = curr;\n    prevTime = curr;\n\n    // turn the `arguments` into a proper Array\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n\n    args[0] = exports.coerce(args[0]);\n\n    if ('string' !== typeof args[0]) {\n      // anything else let's inspect with %O\n      args.unshift('%O');\n    }\n\n    // apply any `formatters` transformations\n    var index = 0;\n    args[0] = args[0].replace(/%([a-zA-Z%])/g, function(match, format) {\n      // if we encounter an escaped % then don't increase the array index\n      if (match === '%%') return match;\n      index++;\n      var formatter = exports.formatters[format];\n      if ('function' === typeof formatter) {\n        var val = args[index];\n        match = formatter.call(self, val);\n\n        // now we need to remove `args[index]` since it's inlined in the `format`\n        args.splice(index, 1);\n        index--;\n      }\n      return match;\n    });\n\n    // apply env-specific formatting (colors, etc.)\n    exports.formatArgs.call(self, args);\n\n    var logFn = debug.log || exports.log || console.log.bind(console);\n    logFn.apply(self, args);\n  }\n\n  debug.namespace = namespace;\n  debug.enabled = exports.enabled(namespace);\n  debug.useColors = exports.useColors();\n  debug.color = selectColor(namespace);\n\n  // env-specific initialization logic for debug instances\n  if ('function' === typeof exports.init) {\n    exports.init(debug);\n  }\n\n  return debug;\n}\n\n/**\n * Enables a debug mode by namespaces. This can include modes\n * separated by a colon and wildcards.\n *\n * @param {String} namespaces\n * @api public\n */\n\nfunction enable(namespaces) {\n  exports.save(namespaces);\n\n  exports.names = [];\n  exports.skips = [];\n\n  var split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n  var len = split.length;\n\n  for (var i = 0; i < len; i++) {\n    if (!split[i]) continue; // ignore empty strings\n    namespaces = split[i].replace(/\\*/g, '.*?');\n    if (namespaces[0] === '-') {\n      exports.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n    } else {\n      exports.names.push(new RegExp('^' + namespaces + '$'));\n    }\n  }\n}\n\n/**\n * Disable debug output.\n *\n * @api public\n */\n\nfunction disable() {\n  exports.enable('');\n}\n\n/**\n * Returns true if the given mode name is enabled, false otherwise.\n *\n * @param {String} name\n * @return {Boolean}\n * @api public\n */\n\nfunction enabled(name) {\n  var i, len;\n  for (i = 0, len = exports.skips.length; i < len; i++) {\n    if (exports.skips[i].test(name)) {\n      return false;\n    }\n  }\n  for (i = 0, len = exports.names.length; i < len; i++) {\n    if (exports.names[i].test(name)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Coerce `val`.\n *\n * @param {Mixed} val\n * @return {Mixed}\n * @api private\n */\n\nfunction coerce(val) {\n  if (val instanceof Error) return val.stack || val.message;\n  return val;\n}\n","/**\n * This is the web browser implementation of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = require('./debug');\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = 'undefined' != typeof chrome\n               && 'undefined' != typeof chrome.storage\n                  ? chrome.storage.local\n                  : localstorage();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n  'lightseagreen',\n  'forestgreen',\n  'goldenrod',\n  'dodgerblue',\n  'darkorchid',\n  'crimson'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\nfunction useColors() {\n  // NB: In an Electron preload script, document will be defined but not fully\n  // initialized. Since we know we're in Chrome, we'll just detect this case\n  // explicitly\n  if (typeof window !== 'undefined' && window.process && window.process.type === 'renderer') {\n    return true;\n  }\n\n  // is webkit? http://stackoverflow.com/a/16459606/376773\n  // document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n  return (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n    // is firebug? http://stackoverflow.com/a/398120/376773\n    (typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n    // is firefox >= v31?\n    // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n    // double check webkit in userAgent just in case we are in a worker\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nexports.formatters.j = function(v) {\n  try {\n    return JSON.stringify(v);\n  } catch (err) {\n    return '[UnexpectedJSONParseError]: ' + err.message;\n  }\n};\n\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n  var useColors = this.useColors;\n\n  args[0] = (useColors ? '%c' : '')\n    + this.namespace\n    + (useColors ? ' %c' : ' ')\n    + args[0]\n    + (useColors ? '%c ' : ' ')\n    + '+' + exports.humanize(this.diff);\n\n  if (!useColors) return;\n\n  var c = 'color: ' + this.color;\n  args.splice(1, 0, c, 'color: inherit')\n\n  // the final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n  var index = 0;\n  var lastC = 0;\n  args[0].replace(/%[a-zA-Z%]/g, function(match) {\n    if ('%%' === match) return;\n    index++;\n    if ('%c' === match) {\n      // we only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n\n  args.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.log()` when available.\n * No-op when `console.log` is not a \"function\".\n *\n * @api public\n */\n\nfunction log() {\n  // this hackery is required for IE8/9, where\n  // the `console.log` function doesn't have 'apply'\n  return 'object' === typeof console\n    && console.log\n    && Function.prototype.apply.call(console.log, console, arguments);\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\nfunction save(namespaces) {\n  try {\n    if (null == namespaces) {\n      exports.storage.removeItem('debug');\n    } else {\n      exports.storage.debug = namespaces;\n    }\n  } catch(e) {}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\nfunction load() {\n  var r;\n  try {\n    r = exports.storage.debug;\n  } catch(e) {}\n\n  // If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n  if (!r && typeof process !== 'undefined' && 'env' in process) {\n    r = process.env.DEBUG;\n  }\n\n  return r;\n}\n\n/**\n * Enable namespaces listed in `localStorage.debug` initially.\n */\n\nexports.enable(load());\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n  try {\n    return window.localStorage;\n  } catch (e) {}\n}\n","/**\n * Copyright 2014, Yahoo! Inc.\n * Copyrights licensed under the New BSD License. See the accompanying LICENSE file for terms.\n */\n'use strict';\nvar debug = require('debug')('Dispatchr:Action');\n\nfunction Action(name, payload) {\n    this.name = name;\n    this.payload = payload;\n    this._handlers = null;\n    this._isExecuting = false;\n    this._isCompleted = null;\n}\n\n/**\n * Gets a name from a store\n * @method getStoreName\n * @param {String|Object} store The store name or class from which to extract\n *      the name\n * @returns {String}\n */\nAction.prototype.getStoreName = function getStoreName(store) {\n    if ('string' === typeof store) {\n        return store;\n    }\n    return store.storeName;\n};\n\n/**\n * Executes all handlers for the action\n * @method execute\n * @param {Function[]} handlers A mapping of store names to handler function\n * @throws {Error} if action has already been executed\n */\nAction.prototype.execute = function execute(handlers) {\n    if (this._isExecuting) {\n        throw new Error('Action is already dispatched');\n    }\n    var self = this;\n    this._handlers = handlers;\n    this._isExecuting = true;\n    this._isCompleted = {};\n    Object.keys(handlers).forEach(function handlersEach(storeName) {\n        self._callHandler(storeName);\n    });\n};\n\n/**\n * Calls an individual store's handler function\n * @method _callHandler\n * @param {String} storeName\n * @private\n * @throws {Error} if handler does not exist for storeName\n */\nAction.prototype._callHandler = function callHandler(storeName) {\n    var self = this,\n        handlerFn = self._handlers[storeName];\n    if (!handlerFn) {\n        throw new Error(storeName + ' does not have a handler for action ' + self.name);\n    }\n    if (self._isCompleted[storeName]) {\n        return;\n    }\n    self._isCompleted[storeName] = false;\n    debug('executing handler for ' + storeName);\n    handlerFn(self.payload, self.name);\n    self._isCompleted[storeName] = true;\n};\n\n/**\n * Waits until all stores have finished handling an action and then calls\n * the callback\n * @method waitFor\n * @param {String|String[]|Constructor|Constructor[]} stores An array of stores as strings or constructors to wait for\n * @param {Function} callback Called after all stores have completed handling their actions\n * @throws {Error} if the action is not being executed\n */\nAction.prototype.waitFor = function waitFor(stores, callback) {\n    var self = this;\n    if (!self._isExecuting) {\n        throw new Error('waitFor called even though there is no action being executed!');\n    }\n    if (!Array.isArray(stores)) {\n        stores = [stores];\n    }\n\n    debug('waiting on ' + stores.join(', '));\n    stores.forEach(function storesEach(storeName) {\n        storeName = self.getStoreName(storeName);\n        if (self._handlers[storeName]) {\n            self._callHandler(storeName);\n        }\n    });\n\n    callback();\n};\n\nmodule.exports = Action;\n","/**\n * Copyright 2014, Yahoo! Inc.\n * Copyrights licensed under the New BSD License. See the accompanying LICENSE file for terms.\n */\n'use strict';\n\nvar Action = require('./Action');\nvar DEFAULT = 'default';\nvar debug = require('debug')('Dispatchr:DispatcherContext');\n\n/**\n * @class Dispatcher\n * @param {Object} context The context to be used for store instances\n * @constructor\n */\nfunction DispatcherContext (dispatcher, context) {\n    this.dispatcher = dispatcher;\n    this.storeInstances = {};\n    this.currentAction = null;\n    this.dispatcherInterface = {\n        getContext: function getContext() { return context; },\n        getStore: this.getStore.bind(this),\n        waitFor: this.waitFor.bind(this)\n    };\n}\n\n/**\n * Returns a single store instance and creates one if it doesn't already exist\n * @method getStore\n * @param {String} name The name of the instance\n * @returns {Object} The store instance\n * @throws {Error} if store is not registered\n */\nDispatcherContext.prototype.getStore = function getStore(name) {\n    var storeName = this.dispatcher.getStoreName(name);\n    if (!this.storeInstances[storeName]) {\n        var Store = this.dispatcher.stores[storeName];\n        if (!Store) {\n            throw new Error('Store ' + storeName + ' was not registered.');\n        }\n        this.storeInstances[storeName] = new (this.dispatcher.stores[storeName])(this.dispatcherInterface);\n    }\n    return this.storeInstances[storeName];\n};\n\n/**\n * Dispatches a new action or queues it up if one is already in progress\n * @method dispatch\n * @param {String} actionName Name of the action to be dispatched\n * @param {Object} payload Parameters to describe the action\n * @throws {Error} if store has handler registered that does not exist\n */\nDispatcherContext.prototype.dispatch = function dispatch(actionName, payload) {\n    if (!actionName) {\n        throw new Error('actionName parameter `' + actionName + '` is invalid.');\n    }\n    if (this.currentAction) {\n        throw new Error('Cannot call dispatch while another dispatch is executing. Attempted to execute \\'' + actionName + '\\' but \\'' + this.currentAction.name + '\\' is already executing.');\n    }\n    var actionHandlers = this.dispatcher.handlers[actionName] || [],\n        defaultHandlers = this.dispatcher.handlers[DEFAULT] || [];\n    if (!actionHandlers.length && !defaultHandlers.length) {\n        debug(actionName + ' does not have any registered handlers');\n        return;\n    }\n    debug('dispatching ' + actionName, payload);\n    this.currentAction = new Action(actionName, payload);\n    var self = this,\n        allHandlers = actionHandlers.concat(defaultHandlers),\n        handlerFns = {};\n\n    try {\n        allHandlers.forEach(function actionHandlersEach(store) {\n            if (handlerFns[store.name]) {\n                // Don't call the default if the store has an explicit action handler\n                return;\n            }\n            var storeInstance = self.getStore(store.name);\n            if ('function' === typeof store.handler) {\n                handlerFns[store.name] = store.handler.bind(storeInstance);\n            } else {\n                if (!storeInstance[store.handler]) {\n                    throw new Error(store.name + ' does not have a method called ' + store.handler);\n                }\n                handlerFns[store.name] = storeInstance[store.handler].bind(storeInstance);\n            }\n        });\n        this.currentAction.execute(handlerFns);\n    } catch (e) {\n        throw e;\n    } finally {\n        debug('finished ' + actionName);\n        this.currentAction = null;\n    }\n};\n\n/**\n * Returns a raw data object representation of the current state of the\n * dispatcher and all store instances. If the store implements a shouldDehdyrate\n * function, then it will be called and only dehydrate if the method returns `true`\n * @method dehydrate\n * @returns {Object} dehydrated dispatcher data\n */\nDispatcherContext.prototype.dehydrate = function dehydrate() {\n    var self = this,\n        stores = {};\n    Object.keys(self.storeInstances).forEach(function storeInstancesEach(storeName) {\n        var store = self.storeInstances[storeName];\n        if (!store.dehydrate || (store.shouldDehydrate && !store.shouldDehydrate())) {\n            return;\n        }\n        stores[storeName] = store.dehydrate();\n    });\n    return {\n        stores: stores\n    };\n};\n\n/**\n * Takes a raw data object and rehydrates the dispatcher and store instances\n * @method rehydrate\n * @param {Object} dispatcherState raw state typically retrieved from `dehydrate`\n *      method\n */\nDispatcherContext.prototype.rehydrate = function rehydrate(dispatcherState) {\n    var self = this;\n    if (dispatcherState.stores) {\n        Object.keys(dispatcherState.stores).forEach(function storeStateEach(storeName) {\n            var state = dispatcherState.stores[storeName],\n                store = self.getStore(storeName);\n            if (store.rehydrate) {\n                store.rehydrate(state);\n            }\n        });\n    }\n};\n\n/**\n * Waits until all stores have finished handling an action and then calls\n * the callback\n * @method waitFor\n * @param {String|String[]} stores An array of stores as strings to wait for\n * @param {Function} callback Called after all stores have completed handling their actions\n * @throws {Error} if there is no action dispatching\n */\nDispatcherContext.prototype.waitFor = function waitFor(stores, callback) {\n    if (!this.currentAction) {\n        throw new Error('waitFor called even though there is no action dispatching');\n    }\n    this.currentAction.waitFor(stores, callback);\n};\n\nmodule.exports = DispatcherContext;\n","/**\n * Copyright 2014, Yahoo! Inc.\n * Copyrights licensed under the New BSD License. See the accompanying LICENSE file for terms.\n */\n'use strict';\n\nvar Action = require('./Action');\nvar DEFAULT = 'default';\nvar DispatcherContext = require('./DispatcherContext');\n\n/**\n * @class Dispatcher\n * @param {Object} options Dispatcher options\n * @param {Array} options.stores Array of stores to register\n * @constructor\n */\nfunction Dispatcher (options) {\n    options = options || {};\n    options.stores = options.stores || [];\n    this.stores = {};\n    this.handlers = {};\n    this.handlers[DEFAULT] = [];\n    this.hasWarnedAboutNameProperty = false;\n    options.stores.forEach(function (store) {\n        this.registerStore(store);\n    }, this);\n\n}\n\nDispatcher.prototype.createContext = function createContext(context) {\n    return new DispatcherContext(this, context);\n};\n\n/**\n * Registers a store so that it can handle actions.\n * @method registerStore\n * @static\n * @param {Object} store A store class to be registered. The store should have a static\n *      `name` property so that it can be loaded later.\n * @throws {Error} if store is invalid\n * @throws {Error} if store is already registered\n */\nDispatcher.prototype.registerStore = function registerStore(store) {\n    if ('function' !== typeof store) {\n        throw new Error('registerStore requires a constructor as first parameter');\n    }\n    var storeName = this.getStoreName(store);\n    if (!storeName) {\n        throw new Error('Store is required to have a `storeName` property.');\n    }\n    if (this.stores[storeName]) {\n        if (this.stores[storeName] === store) {\n            // Store is already registered, nothing to do\n            return;\n        }\n        throw new Error('Store with name `' + storeName + '` has already been registered.');\n    }\n    this.stores[storeName] = store;\n    if (store.handlers) {\n        Object.keys(store.handlers).forEach(function storeHandlersEach(action) {\n            var handler = store.handlers[action];\n            this._registerHandler(action, storeName, handler);\n        }, this);\n    }\n};\n\n/**\n * Method to discover if a storeName has been registered\n * @method isRegistered\n * @static\n * @param {Object|String} store The store to check\n * @returns {boolean}\n */\nDispatcher.prototype.isRegistered = function isRegistered(store) {\n    var storeName = this.getStoreName(store),\n        storeInstance = this.stores[storeName];\n\n    if (!storeInstance) {\n        return false;\n    }\n\n    if ('function' === typeof store) {\n        if (store !== storeInstance) {\n            return false;\n        }\n    }\n    return true;\n};\n\n/**\n * Gets a name from a store\n * @method getStoreName\n * @static\n * @param {String|Object} store The store name or class from which to extract\n *      the name\n * @returns {String}\n */\nDispatcher.prototype.getStoreName = function getStoreName(store) {\n    if ('string' === typeof store) {\n        return store;\n    }\n    if (store.storeName) {\n        return store.storeName;\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n        if (store.name && !this.hasWarnedAboutNameProperty) {\n            console.warn('A store has been registered that relies on the ' +\n                'constructor\\'s name property. This name may change when you ' +\n                'minify your stores during build time and could break string ' +\n                'references to your store. It is advised that you add a ' +\n                'static `storeName` property to your store to ensure the ' +\n                'store name does not change during your build.');\n            this.hasWarnedAboutNameProperty = true;\n        }\n    }\n    return store.name;\n};\n\n/**\n * Adds a handler function to be called for the given action\n * @method registerHandler\n * @private\n * @static\n * @param {String} action Name of the action\n * @param {String} name Name of the store that handles the action\n * @param {String|Function} handler The function or name of the method that handles the action\n * @returns {number}\n */\nDispatcher.prototype._registerHandler = function registerHandler(action, name, handler) {\n    this.handlers[action] = this.handlers[action] || [];\n    this.handlers[action].push({\n        name: this.getStoreName(name),\n        handler: handler\n    });\n    return this.handlers.length - 1;\n};\n\nmodule.exports = {\n    createDispatcher: function (options) {\n        return new Dispatcher(options);\n    }\n};\n","import Baobab from 'baobab'\nimport dispatchr from 'dispatchr'\nimport angular from 'angular'\n\nconst angularModule = angular.module\nlet registeredStores = []\nlet autoInjectStores = false\nlet useEvalAsync = true\n\nconst map = new Map()\nmap.set(angular, true)\n\n// A function that creates stores\nfunction createStore(name, spec = {}, immutableDefaults, flux) {\n  // Constructor of a yahoo dispatchr store\n  const Store = function(dispatcher) {\n    this.dispatcher = dispatcher\n\n    // Check if store exists when waiting for it\n    this.waitFor = function(stores, cb) {\n      stores = Array.isArray(stores) ? stores : [stores]\n      if (!flux.areStoresRegistered(stores)) {\n        throw new Error(\n          'Waiting for stores that are not injected into Angular yet, ' +\n            stores.join(', ') +\n            '. Be sure to inject stores before waiting for them'\n        )\n      }\n      this.dispatcher.waitFor(stores, cb.bind(this))\n    }\n\n    if (!this.initialize) {\n      throw new Error(\n        'Store ' +\n          name +\n          ' does not have an initialize method which is is necessary to set the initial state'\n      )\n    }\n\n    this.initialize()\n  }\n\n  // Add constructor properties, as required by Yahoo Dispatchr\n  Store.handlers = spec.handlers\n  Store.storeName = name\n\n  // Instantiates immutable state and saves it to private variable that can be used for setting listeners\n  Store.prototype.immutable = function(initialState, options = {}) {\n    if (this.__tree) {\n      this.__tree.set(initialState)\n    } else {\n      this.__tree = new Baobab(\n        initialState,\n        angular.extend({}, immutableDefaults, options)\n      )\n    }\n    return this.__tree\n  }\n\n  Store.prototype.monkey = Baobab.monkey\n\n  // Attach store definition to the prototype\n  Object.keys(spec).forEach(function(key) {\n    Store.prototype[key] = spec[key]\n  })\n\n  return Store\n}\n\n// Flux Service is a wrapper for the Yahoo Dispatchr\nconst FluxService = function(immutableDefaults) {\n  this.stores = []\n  this.dispatcherInstance = dispatchr.createDispatcher()\n  this.dispatcher = this.dispatcherInstance.createContext()\n\n  this.dispatch = function() {\n    if (registeredStores.length) {\n      console.warn(\n        'There are still stores not injected: ' +\n          registeredStores.join(',') +\n          '. Make sure to manually inject all stores before running any dispatches or set autoInjectStores to true.'\n      ) // eslint-disable-line no-console\n    }\n    this.dispatcher.dispatch.apply(this.dispatcher, arguments)\n  }\n\n  this.createStore = function(name, spec) {\n    const store = createStore(name, spec, immutableDefaults, this)\n    let storeInstance\n\n    // Create the exports object\n    store.exports = {}\n\n    this.dispatcherInstance.registerStore(store)\n    this.stores.push(store)\n\n    // Add cloning to exports\n\n    if (!spec.exports) {\n      throw new Error(\n        'You have to add an exports object to your store: ' + name\n      )\n    }\n\n    storeInstance = this.dispatcher.getStore(store)\n    Object.keys(spec.exports).forEach(function(key) {\n      // Create a getter\n      const descriptor = Object.getOwnPropertyDescriptor(spec.exports, key)\n      if (descriptor.get) {\n        Object.defineProperty(store.exports, key, {\n          enumerable: descriptor.enumerable,\n          configurable: descriptor.configurable,\n          get: () => descriptor.get.apply(storeInstance),\n        })\n      } else {\n        store.exports[key] = function() {\n          return spec.exports[key].apply(storeInstance, arguments)\n        }\n        spec.exports[key] = spec.exports[key].bind(storeInstance)\n      }\n    })\n\n    return store.exports\n  }\n\n  this.getStore = function(storeExport) {\n    const store = this.stores.filter(s => s.exports === storeExport)[0]\n    return this.dispatcher.getStore(store)\n  }\n\n  this.areStoresRegistered = function(stores) {\n    const storeNames = this.stores.map(store => store.storeName)\n    return stores.every(storeName => storeNames.indexOf(storeName) > -1)\n  }\n\n  this.reset = function() {\n    this.dispatcherInstance.stores = {}\n    this.dispatcherInstance.handlers = {}\n    this.stores = []\n    registeredStores = []\n  }\n\n  // Expose Baobab in case user wants access to it for use outside a store\n  this.Baobab = Baobab\n}\n\n// Wrap \"angular.module\" to attach store method to module instance\nangular.module = function() {\n  // Call the module as normaly and grab the instance\n  const moduleInstance = angularModule.apply(angular, arguments)\n\n  // Attach store method to instance\n  moduleInstance.store = function(storeName, storeDefinition) {\n    // Add to stores array\n    registeredStores.push(storeName)\n\n    // Create a new store\n    this.factory(storeName, [\n      '$injector',\n      'flux',\n      function($injector, flux) {\n        const storeConfig = $injector.invoke(storeDefinition)\n        registeredStores.splice(registeredStores.indexOf(storeName), 1)\n        return flux.createStore(storeName, storeConfig)\n      },\n    ])\n\n    return this\n  }\n\n  return moduleInstance\n}\n\nangular\n  .module('flux', [])\n  .provider('flux', function FluxProvider() {\n    let immutableDefaults = {}\n\n    // Defaults that are passed on to Baobab: https://github.com/Yomguithereal/baobab#options\n    this.setImmutableDefaults = function(defaults) {\n      immutableDefaults = defaults\n    }\n\n    this.autoInjectStores = function(val) {\n      autoInjectStores = val\n    }\n\n    this.useEvalAsync = function(val) {\n      useEvalAsync = val\n    }\n\n    this.$get = [\n      function fluxFactory() {\n        return new FluxService(immutableDefaults)\n      },\n    ]\n  })\n  .run([\n    '$rootScope',\n    '$injector',\n    'flux',\n    function($rootScope, $injector, flux) {\n      if (angular.mock) {\n        // Forced to false during testing to avoid needing to flush to test $listenTo interaction\n        useEvalAsync = false\n        flux.reset()\n      }\n\n      if (!angular.mock && autoInjectStores) {\n        $injector.invoke(registeredStores.concat(angular.noop))\n      }\n\n      // Extend scopes with $listenTo\n      $rootScope.constructor.prototype.$listenTo = function(\n        storeExport,\n        mapping,\n        callback\n      ) {\n        let cursor, originalCallback\n        const store = flux.getStore(storeExport)\n\n        if (!store.__tree) {\n          throw new Error(\n            'Store ' +\n              storeExport.storeName +\n              ' has not defined state with this.immutable() which is required in order to use $listenTo'\n          )\n        }\n\n        if (!callback) {\n          callback = mapping\n          cursor = store.__tree\n        } else {\n          cursor = store.__tree.select(mapping)\n        }\n\n        originalCallback = callback\n        if (useEvalAsync) {\n          callback = e => {\n            this.$evalAsync(() => originalCallback(e))\n          }\n        }\n\n        cursor.on('update', callback)\n\n        // Call the callback so that state gets the initial sync with the view-model variables. evalAsync is specifically\n        // not used here because state should be available to angular as it is initializing. Otherwise state can be\n        // undefined while the first digest cycle is running.\n        originalCallback({})\n\n        // Remove the listeners on the store when scope is destroyed (GC)\n        this.$on('$destroy', () => cursor.off('update', callback))\n      }\n    },\n  ])\n\nmodule.exports = 'flux'\n"],"names":["it","toString","call","slice","undefined","TypeError","argument","Object","requireObjectCoercible","isNaN","floor","ceil","min","toInteger","S","isObject","fn","val","valueOf","exec","error","exist","document","createElement","String","bitmap","value","enumerable","configurable","writable","object","key","propertyKey","toPrimitive","definePropertyModule","f","createPropertyDescriptor","Array","isArray","arg","classof","Math","require$$0","defineProperty","get","a","window","self","Function","require$$1","require$$2","nativeDefineProperty","DESCRIPTORS","O","P","Attributes","anObject","IE8_DOM_DEFINE","hide","global","concat","id","postfix","name","store","NATIVE_SYMBOL","Symbol","uid","originalArray","length","C","constructor","prototype","SPECIES","METHOD_NAME","fails","array","foo","Boolean","IndexedObject","hasOwnProperty","shared","set","has","SHARED","setGlobal","module","push","version","mode","copyright","random","nativePropertyIsEnumerable","propertyIsEnumerable","nativeGetOwnPropertyDescriptor","getOwnPropertyDescriptor","1","V","descriptor","this","split","toIndexedObject","propertyIsEnumerableModule","WeakMap","test","nativeFunctionToString","NATIVE_WEAK_MAP","wmget","wmhas","wmset","metadata","STATE","sharedKey","hiddenKeys","objectHas","index","integer","max","IS_INCLUDES","$this","el","fromIndex","toLength","toAbsoluteIndex","names","i","result","arrayIndexOf","target","source","keys","ownKeys","getOwnPropertyDescriptorModule","isForced","feature","detection","data","normalize","POLYFILL","NATIVE","options","targetProperty","sourceProperty","TARGET","GLOBAL","STATIC","stat","noTargetGet","forced","copyConstructorProperties","sham","redefine","isConcatSpreadable","spreadable","IS_CONCAT_SPREADABLE","enforce","getterFor","TYPE","state","type","getInternalState","InternalStateModule","enforceInternalState","TEMPLATE","unsafe","simple","join","getOwnPropertyNames","internalObjectKeys","getOwnPropertySymbols","Reflect","getOwnPropertyNamesModule","getOwnPropertySymbolsModule","replacement","string","replace","toLowerCase","MAX_SAFE_INTEGER","MAXIMUM_ALLOWED_INDEX_EXCEEDED","IS_CONCAT_SPREADABLE_SUPPORT","SPECIES_SUPPORT","proto","k","len","E","toObject","A","arraySpeciesCreate","n","arguments","createProperty","that","aFunction","b","c","apply","specificCreate","IS_MAP","IS_FILTER","IS_SOME","IS_EVERY","IS_FIND_INDEX","NO_HOLES","create","callbackfn","boundFunction","bind","method","internalEvery","SLOPPY_METHOD","every","internalFilter","filter","nativeForEach","forEach","internalForEach","internalIndexOf","nativeIndexOf","indexOf","NEGATIVE_ZERO","searchElement","Empty","enumBugKeys","defineProperties","Properties","objectKeys","documentElement","IE_PROTO","PROTOTYPE","createDict","iframeDocument","iframe","documentCreateElement","script","style","display","html","appendChild","src","contentWindow","open","write","lt","close","F","UNSCOPABLES","ArrayPrototype","IteratorPrototype","PrototypeOfArrayIteratorPrototype","arrayIterator","getPrototypeOf","ObjectPrototype","CORRECT_PROTOTYPE_GETTER","ITERATOR","BUGGY_SAFARI_ITERATORS","TAG","TO_STRING_TAG","returnThis","Iterable","NAME","IteratorConstructor","next","DEFAULT","IS_SET","FORCED","getIterationMethod","KIND","defaultIterator","IterablePrototype","VALUES","ENTRIES","setToStringTag","Iterators","createIteratorConstructor","CurrentIteratorPrototype","methods","KEY","INCORRECT_VALUES_NAME","nativeIterator","anyNativeIterator","entries","objectGetPrototypeOf","setPrototypeOf","values","$export","setter","correctSetter","validateSetPrototypeOfArguments","__proto__","IteratorsCore","ARRAY_ITERATOR","setInternalState","defineIterator","iterated","kind","done","Arguments","addToUnscopables","nativeJoin","ES3_STRINGS","separator","internalMap","map","splice","start","deleteCount","insertCount","actualDeleteCount","from","to","actualStart","argumentsLength","arraySlice","factories","partArgs","args","argsLength","list","construct","tag","tryGet","CORRECT_ARGUMENTS","classofRaw","callee","iterator","returnMethod","Constructor","isExtensible","preventExtensions","setMetadata","METADATA","objectID","weakData","meta","REQUIRED","fastKey","getWeakData","onFreeze","FREEZING","BREAK","iterable","iterFn","step","getIteratorMethod","isArrayIteratorMethod","callWithSafeIterationClosing","SAFE_CLOSING","called","return","variable","CONSTRUCTOR_NAME","namespace","path","getBuiltIn","internalStateGetterFor","wrapper","common","IS_WEAK","fixMethod","nativeMethod","NativePrototype","NativeConstructor","ADDER","exported","getConstructor","InternalMetadataModule","instance","HASNT_CHAINING","THROWS_ON_PRIMITIVES","ACCEPT_ITERABLES","SKIP_CLOSING","ITERATION_SUPPORT","checkCorrectnessOfIteration","BUGGY_ZERO","$instance","anInstance","inheritIfRequired","iterate","clear","setStrong","define","previous","entry","getEntry","last","removed","first","size","redefineAll","delete","prev","add","ITERATOR_NAME","getInternalCollectionState","getInternalIteratorState","setSpecies","FAILS_ON_PRIMITIVES","nativeKeys","STRING_ITERATOR","point","pos","CONVERT_TO_STRING","second","position","charCodeAt","charAt","codePointAt","CSSRuleList","CSSStyleDeclaration","CSSValueList","ClientRectList","DOMRectList","DOMStringList","DOMTokenList","DataTransferItemList","FileList","HTMLAllCollection","HTMLCollection","HTMLFormElement","HTMLSelectElement","MediaList","MimeTypeArray","NamedNodeMap","NodeList","PaintRequestList","Plugin","PluginArray","SVGLengthList","SVGNumberList","SVGPathSegList","SVGPointList","SVGStringList","SVGTransformList","SourceBufferList","StyleSheetList","TextTrackCueList","TextTrackList","TouchList","COLLECTION_NAME","DOMIterables","Collection","CollectionPrototype","wellKnownSymbol","ArrayValues","ArrayIteratorMethods","__allowedOptions","once","scope","__order","isPlainObject","v","RegExp","forIn","symbols","l","Emitter","_enabled","unbindAll","_handlers","_handlersAll","_handlersComplex","on","event","eArray","handlersList","bindingObject","order","pattern","Error","li","o1","o2","o","shallowMerge","off","events","listeners","h","handlers","complex","search","sort","emit","parent","handler","j","m","onces","kill","disable","enable","exports","_typeof","obj","anyOf","allowed","some","t","Date","Map","Set","number","function","primitive","splicer","ALLOWED_FOR_PATH","dynamicPath","monkeyPath","subpath","_monkey","Monkey","lazyGetter","isLazyGetter","monkeyDefinition","definition","cursors","offset","p","watcherMapping","VALID_OPERATIONS","operationType","_createClass","protoProps","staticProps","props","culprit","decorator","NOT_FOUND_OBJECT","solvedPath","exists","idx","_type2","default","e","compare","message","err","uniqid","base","affectedPaths","comparedPaths","startIndex","nb","_len2","elements","_key2","_type","__esModule","hasOwnProp","newArray","Archive","records","record","unshift","steps","_classCallCheck","cloner","deep","item","MonkeyDefinition","ArrayBuffer","getTime","re","flags","multiline","ignoreCase","sticky","unicode","cloneRegexp","_i","_l","shallowClone","deepClone","description","ok","freezer","freeze","deepFreeze","isFrozen","merger","_len","objects","_key","deepMerge","operation","opts","_operation$options","operationOptions","dummy","root","dummyPath","arr","arr2","_toConsumableArray","currentPath","s","pure","node","persistent","mutableLeaf","_helpers","pop","shift","immutable","expectedTarget","makeError","_interopRequireDefault","_update3","_update2","_this","monkeyType","getter","projection","paths","hasDynamicPaths","_this3","recursive","depPaths","getIn","tree","_data","_monkeys","reduce","accumulatedPaths","relatedMonkey","relatedPaths","def","cache","alreadyComputed","_this4","deps","project","hash","hashPath","_affectedPathsIndex","lazyMonkeys","monkey","writeListener","recursiveListener","killed","pathInTree","_this2","relative","solveRelativePath","acc","_ref","solveUpdate","update","_ref2","_ref2$data","_emmett2","_emmett","checkPossibilityOfDynamicTraversal","Cursor","subClass","superClass","_inherits","additionalPaths","_monkeyPath","_get","isRoot","isLeaf","select","arrayFrom","up","coercePath","_get2","fullPath","dropComputedData","d","maxRecords","Infinity","recording","archive","_lazyBind","back","undoing","_dynamicPath","_writeHandler","_updateHandler","_cursors","serialize","_identity","ReferenceError","_possibleConstructorReturn","_archive","_getComparedPaths","bound","_event$data","previousData","eventData","currentData","before","cursor","INTRANSITIVE_SETTERS","unset","makeSetter","typeChecker","_cursor2","_cursor","Watcher","mapping","cp","refresh","watchedPaths","getWatchedPaths","str","match","parseFloat","parse","long","ms","plural","fmtLong","round","fmtShort","JSON","stringify","_watcher2","_watcher","helpers","newObj","_interopRequireWildcard","DEFAULTS","autoCommit","asynchronous","monkeyBusiness","validate","validationBehavior","Baobab","walk","monkeyInstance","monkeysNode","clean","release","_options","behavior","_previousData","_transaction","_getIn","realOperation","currentNode","affectedPath","_refreshMonkeys","_future","setTimeout","commit","clearTimeout","transaction","initialData","r","validationError","dynamicNode","VERSION","prevTime","createDebug","debug","enabled","curr","diff","coerce","format","formatter","formatters","formatArgs","log","console","useColors","color","colors","abs","selectColor","init","stack","namespaces","save","skips","substr","load","storage","process","env","DEBUG","humanize","lastC","removeItem","WebkitAppearance","firebug","exception","table","navigator","userAgent","parseInt","$1","chrome","local","localStorage","localstorage","Action","payload","_isExecuting","_isCompleted","getStoreName","storeName","execute","_callHandler","handlerFn","waitFor","stores","callback","DispatcherContext","dispatcher","context","storeInstances","currentAction","dispatcherInterface","getContext","getStore","dispatch","actionName","actionHandlers","defaultHandlers","allHandlers","handlerFns","storeInstance","dehydrate","shouldDehydrate","rehydrate","dispatcherState","Dispatcher","hasWarnedAboutNameProperty","registerStore","createContext","action","_registerHandler","isRegistered","NODE_ENV","warn","createDispatcher","angularModule","angular","registeredStores","autoInjectStores","useEvalAsync","FluxService","immutableDefaults","dispatcherInstance","dispatchr","createStore","spec","flux","Store","cb","areStoresRegistered","initialize","initialState","__tree","extend","storeExport","storeNames","reset","moduleInstance","storeDefinition","factory","$injector","storeConfig","invoke","provider","setImmutableDefaults","defaults","$get","run","$rootScope","mock","noop","$listenTo","originalCallback","$evalAsync","$on"],"mappings":"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"}