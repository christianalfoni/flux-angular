{"version":3,"file":"flux-angular.umd.js","sources":["../node_modules/core-js/internals/classof-raw.js","../node_modules/core-js/internals/is-object.js","../node_modules/core-js/internals/require-object-coercible.js","../node_modules/core-js/internals/to-object.js","../node_modules/core-js/internals/to-integer.js","../node_modules/core-js/internals/to-length.js","../node_modules/core-js/internals/to-primitive.js","../node_modules/core-js/internals/fails.js","../node_modules/core-js/internals/an-object.js","../node_modules/core-js/internals/create-property-descriptor.js","../node_modules/core-js/internals/create-property.js","../node_modules/core-js/internals/is-array.js","../node_modules/core-js/internals/descriptors.js","../node_modules/core-js/internals/global.js","../node_modules/core-js/internals/document-create-element.js","../node_modules/core-js/internals/ie8-dom-define.js","../node_modules/core-js/internals/object-define-property.js","../node_modules/core-js/internals/set-global.js","../node_modules/core-js/internals/uid.js","../node_modules/core-js/internals/well-known-symbol.js","../node_modules/core-js/internals/array-species-create.js","../node_modules/core-js/internals/array-method-has-species-support.js","../node_modules/core-js/internals/to-indexed-object.js","../node_modules/core-js/internals/has.js","../node_modules/core-js/internals/hide.js","../node_modules/core-js/internals/internal-state.js","../node_modules/core-js/internals/shared-key.js","../node_modules/core-js/internals/shared.js","../node_modules/core-js/internals/native-symbol.js","../node_modules/core-js/internals/object-property-is-enumerable.js","../node_modules/core-js/internals/indexed-object.js","../node_modules/core-js/internals/object-get-own-property-descriptor.js","../node_modules/core-js/internals/function-to-string.js","../node_modules/core-js/internals/native-weak-map.js","../node_modules/core-js/internals/hidden-keys.js","../node_modules/core-js/internals/to-absolute-index.js","../node_modules/core-js/internals/array-includes.js","../node_modules/core-js/internals/object-keys-internal.js","../node_modules/core-js/internals/copy-constructor-properties.js","../node_modules/core-js/internals/is-forced.js","../node_modules/core-js/internals/export.js","../node_modules/core-js/modules/es.array.concat.js","../node_modules/core-js/internals/redefine.js","../node_modules/core-js/internals/enum-bug-keys.js","../node_modules/core-js/internals/object-get-own-property-names.js","../node_modules/core-js/internals/object-get-own-property-symbols.js","../node_modules/core-js/internals/own-keys.js","../node_modules/core-js/internals/a-function.js","../node_modules/core-js/internals/array-methods.js","../node_modules/core-js/internals/bind-context.js","../node_modules/core-js/internals/sloppy-array-method.js","../node_modules/core-js/modules/es.array.every.js","../node_modules/core-js/modules/es.array.filter.js","../node_modules/core-js/internals/array-for-each.js","../node_modules/core-js/modules/es.array.for-each.js","../node_modules/core-js/modules/es.array.index-of.js","../node_modules/core-js/modules/es.array.is-array.js","../node_modules/core-js/modules/es.array.join.js","../node_modules/core-js/modules/es.array.map.js","../node_modules/core-js/modules/es.array.splice.js","../node_modules/core-js/internals/function-bind.js","../node_modules/core-js/modules/es.function.bind.js","../node_modules/core-js/modules/es.object.define-property.js","../node_modules/core-js/modules/es.object.get-own-property-descriptor.js","../node_modules/core-js/internals/object-keys.js","../node_modules/core-js/modules/es.object.keys.js","../node_modules/core-js/modules/web.dom-collections.for-each.js","../node_modules/core-js/internals/dom-iterables.js","../node_modules/emmett/emmett.js","../node_modules/baobab/dist/type.js","../node_modules/baobab/dist/helpers.js","../node_modules/baobab/dist/update.js","../node_modules/baobab/dist/monkey.js","../node_modules/baobab/dist/cursor.js","../node_modules/baobab/dist/watcher.js","../node_modules/ms/index.js","../node_modules/baobab/dist/baobab.js","../node_modules/debug/src/debug.js","../node_modules/debug/src/browser.js","../node_modules/dispatchr/lib/Action.js","../node_modules/dispatchr/lib/DispatcherContext.js","../node_modules/dispatchr/lib/Dispatcher.js","../src/flux-angular.js"],"sourcesContent":["var toString = {}.toString;\n\nmodule.exports = function (it) {\n  return toString.call(it).slice(8, -1);\n};\n","module.exports = function (it) {\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n","// `RequireObjectCoercible` abstract operation\n// https://tc39.github.io/ecma262/#sec-requireobjectcoercible\nmodule.exports = function (it) {\n  if (it == undefined) throw TypeError(\"Can't call method on \" + it);\n  return it;\n};\n","var requireObjectCoercible = require('../internals/require-object-coercible');\n\n// `ToObject` abstract operation\n// https://tc39.github.io/ecma262/#sec-toobject\nmodule.exports = function (argument) {\n  return Object(requireObjectCoercible(argument));\n};\n","var ceil = Math.ceil;\nvar floor = Math.floor;\n\n// `ToInteger` abstract operation\n// https://tc39.github.io/ecma262/#sec-tointeger\nmodule.exports = function (argument) {\n  return isNaN(argument = +argument) ? 0 : (argument > 0 ? floor : ceil)(argument);\n};\n","var toInteger = require('../internals/to-integer');\nvar min = Math.min;\n\n// `ToLength` abstract operation\n// https://tc39.github.io/ecma262/#sec-tolength\nmodule.exports = function (argument) {\n  return argument > 0 ? min(toInteger(argument), 0x1FFFFFFFFFFFFF) : 0; // 2 ** 53 - 1 == 9007199254740991\n};\n","// 7.1.1 ToPrimitive(input [, PreferredType])\nvar isObject = require('../internals/is-object');\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function (it, S) {\n  if (!isObject(it)) return it;\n  var fn, val;\n  if (S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n","module.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (error) {\n    return true;\n  }\n};\n","var isObject = require('../internals/is-object');\n\nmodule.exports = function (it) {\n  if (!isObject(it)) {\n    throw TypeError(String(it) + ' is not an object');\n  } return it;\n};\n","module.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n","'use strict';\nvar toPrimitive = require('../internals/to-primitive');\nvar definePropertyModule = require('../internals/object-define-property');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = function (object, key, value) {\n  var propertyKey = toPrimitive(key);\n  if (propertyKey in object) definePropertyModule.f(object, propertyKey, createPropertyDescriptor(0, value));\n  else object[propertyKey] = value;\n};\n","var classof = require('../internals/classof-raw');\n\n// `IsArray` abstract operation\n// https://tc39.github.io/ecma262/#sec-isarray\nmodule.exports = Array.isArray || function isArray(arg) {\n  return classof(arg) == 'Array';\n};\n","// Thank's IE8 for his funny defineProperty\nmodule.exports = !require('../internals/fails')(function () {\n  return Object.defineProperty({}, 'a', { get: function () { return 7; } }).a != 7;\n});\n","// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nmodule.exports = typeof window == 'object' && window && window.Math == Math ? window\n  : typeof self == 'object' && self && self.Math == Math ? self\n  // eslint-disable-next-line no-new-func\n  : Function('return this')();\n","var isObject = require('../internals/is-object');\nvar document = require('../internals/global').document;\n// typeof document.createElement is 'object' in old IE\nvar exist = isObject(document) && isObject(document.createElement);\n\nmodule.exports = function (it) {\n  return exist ? document.createElement(it) : {};\n};\n","// Thank's IE8 for his funny defineProperty\nmodule.exports = !require('../internals/descriptors') && !require('../internals/fails')(function () {\n  return Object.defineProperty(require('../internals/document-create-element')('div'), 'a', {\n    get: function () { return 7; }\n  }).a != 7;\n});\n","var DESCRIPTORS = require('../internals/descriptors');\nvar IE8_DOM_DEFINE = require('../internals/ie8-dom-define');\nvar anObject = require('../internals/an-object');\nvar toPrimitive = require('../internals/to-primitive');\nvar nativeDefineProperty = Object.defineProperty;\n\nexports.f = DESCRIPTORS ? nativeDefineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return nativeDefineProperty(O, P, Attributes);\n  } catch (error) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n","var global = require('../internals/global');\nvar hide = require('../internals/hide');\n\nmodule.exports = function (key, value) {\n  try {\n    hide(global, key, value);\n  } catch (error) {\n    global[key] = value;\n  } return value;\n};\n","var id = 0;\nvar postfix = Math.random();\n\nmodule.exports = function (key) {\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + postfix).toString(36));\n};\n","var store = require('../internals/shared')('wks');\nvar uid = require('../internals/uid');\nvar Symbol = require('../internals/global').Symbol;\nvar NATIVE_SYMBOL = require('../internals/native-symbol');\n\nmodule.exports = function (name) {\n  return store[name] || (store[name] = NATIVE_SYMBOL && Symbol[name]\n    || (NATIVE_SYMBOL ? Symbol : uid)('Symbol.' + name));\n};\n","var isObject = require('../internals/is-object');\nvar isArray = require('../internals/is-array');\nvar SPECIES = require('../internals/well-known-symbol')('species');\n\n// `ArraySpeciesCreate` abstract operation\n// https://tc39.github.io/ecma262/#sec-arrayspeciescreate\nmodule.exports = function (originalArray, length) {\n  var C;\n  if (isArray(originalArray)) {\n    C = originalArray.constructor;\n    // cross-realm fallback\n    if (typeof C == 'function' && (C === Array || isArray(C.prototype))) C = undefined;\n    else if (isObject(C)) {\n      C = C[SPECIES];\n      if (C === null) C = undefined;\n    }\n  } return new (C === undefined ? Array : C)(length === 0 ? 0 : length);\n};\n","var fails = require('../internals/fails');\nvar SPECIES = require('../internals/well-known-symbol')('species');\n\nmodule.exports = function (METHOD_NAME) {\n  return !fails(function () {\n    var array = [];\n    var constructor = array.constructor = {};\n    constructor[SPECIES] = function () {\n      return { foo: 1 };\n    };\n    return array[METHOD_NAME](Boolean).foo !== 1;\n  });\n};\n","// toObject with fallback for non-array-like ES3 strings\nvar IndexedObject = require('../internals/indexed-object');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\nmodule.exports = function (it) {\n  return IndexedObject(requireObjectCoercible(it));\n};\n","var hasOwnProperty = {}.hasOwnProperty;\n\nmodule.exports = function (it, key) {\n  return hasOwnProperty.call(it, key);\n};\n","var definePropertyModule = require('../internals/object-define-property');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = require('../internals/descriptors') ? function (object, key, value) {\n  return definePropertyModule.f(object, key, createPropertyDescriptor(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n","var NATIVE_WEAK_MAP = require('../internals/native-weak-map');\nvar isObject = require('../internals/is-object');\nvar hide = require('../internals/hide');\nvar objectHas = require('../internals/has');\nvar sharedKey = require('../internals/shared-key');\nvar hiddenKeys = require('../internals/hidden-keys');\nvar WeakMap = require('../internals/global').WeakMap;\nvar set, get, has;\n\nvar enforce = function (it) {\n  return has(it) ? get(it) : set(it, {});\n};\n\nvar getterFor = function (TYPE) {\n  return function (it) {\n    var state;\n    if (!isObject(it) || (state = get(it)).type !== TYPE) {\n      throw TypeError('Incompatible receiver, ' + TYPE + ' required');\n    } return state;\n  };\n};\n\nif (NATIVE_WEAK_MAP) {\n  var store = new WeakMap();\n  var wmget = store.get;\n  var wmhas = store.has;\n  var wmset = store.set;\n  set = function (it, metadata) {\n    wmset.call(store, it, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return wmget.call(store, it) || {};\n  };\n  has = function (it) {\n    return wmhas.call(store, it);\n  };\n} else {\n  var STATE = sharedKey('state');\n  hiddenKeys[STATE] = true;\n  set = function (it, metadata) {\n    hide(it, STATE, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return objectHas(it, STATE) ? it[STATE] : {};\n  };\n  has = function (it) {\n    return objectHas(it, STATE);\n  };\n}\n\nmodule.exports = {\n  set: set,\n  get: get,\n  has: has,\n  enforce: enforce,\n  getterFor: getterFor\n};\n","var shared = require('../internals/shared')('keys');\nvar uid = require('../internals/uid');\n\nmodule.exports = function (key) {\n  return shared[key] || (shared[key] = uid(key));\n};\n","var global = require('../internals/global');\nvar setGlobal = require('../internals/set-global');\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || setGlobal(SHARED, {});\n\n(module.exports = function (key, value) {\n  return store[key] || (store[key] = value !== undefined ? value : {});\n})('versions', []).push({\n  version: '3.0.1',\n  mode: require('../internals/is-pure') ? 'pure' : 'global',\n  copyright: 'Â© 2019 Denis Pushkarev (zloirock.ru)'\n});\n","// Chrome 38 Symbol has incorrect toString conversion\nmodule.exports = !require('../internals/fails')(function () {\n  // eslint-disable-next-line no-undef\n  return !String(Symbol());\n});\n","'use strict';\nvar nativePropertyIsEnumerable = {}.propertyIsEnumerable;\nvar nativeGetOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// Nashorn ~ JDK8 bug\nvar NASHORN_BUG = nativeGetOwnPropertyDescriptor && !nativePropertyIsEnumerable.call({ 1: 2 }, 1);\n\nexports.f = NASHORN_BUG ? function propertyIsEnumerable(V) {\n  var descriptor = nativeGetOwnPropertyDescriptor(this, V);\n  return !!descriptor && descriptor.enumerable;\n} : nativePropertyIsEnumerable;\n","// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar fails = require('../internals/fails');\nvar classof = require('../internals/classof-raw');\nvar split = ''.split;\n\nmodule.exports = fails(function () {\n  // throws an error in rhino, see https://github.com/mozilla/rhino/issues/346\n  // eslint-disable-next-line no-prototype-builtins\n  return !Object('z').propertyIsEnumerable(0);\n}) ? function (it) {\n  return classof(it) == 'String' ? split.call(it, '') : Object(it);\n} : Object;\n","var DESCRIPTORS = require('../internals/descriptors');\nvar propertyIsEnumerableModule = require('../internals/object-property-is-enumerable');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar toPrimitive = require('../internals/to-primitive');\nvar has = require('../internals/has');\nvar IE8_DOM_DEFINE = require('../internals/ie8-dom-define');\nvar nativeGetOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\nexports.f = DESCRIPTORS ? nativeGetOwnPropertyDescriptor : function getOwnPropertyDescriptor(O, P) {\n  O = toIndexedObject(O);\n  P = toPrimitive(P, true);\n  if (IE8_DOM_DEFINE) try {\n    return nativeGetOwnPropertyDescriptor(O, P);\n  } catch (error) { /* empty */ }\n  if (has(O, P)) return createPropertyDescriptor(!propertyIsEnumerableModule.f.call(O, P), O[P]);\n};\n","module.exports = require('../internals/shared')('native-function-to-string', Function.toString);\n","var nativeFunctionToString = require('../internals/function-to-string');\nvar WeakMap = require('../internals/global').WeakMap;\n\nmodule.exports = typeof WeakMap === 'function' && /native code/.test(nativeFunctionToString.call(WeakMap));\n","module.exports = {};\n","var toInteger = require('../internals/to-integer');\nvar max = Math.max;\nvar min = Math.min;\n\n// Helper for a popular repeating case of the spec:\n// Let integer be ? ToInteger(index).\n// If integer < 0, let result be max((length + integer), 0); else let result be min(length, length).\nmodule.exports = function (index, length) {\n  var integer = toInteger(index);\n  return integer < 0 ? max(integer + length, 0) : min(integer, length);\n};\n","var toIndexedObject = require('../internals/to-indexed-object');\nvar toLength = require('../internals/to-length');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\n\n// `Array.prototype.{ indexOf, includes }` methods implementation\n// false -> Array#indexOf\n// https://tc39.github.io/ecma262/#sec-array.prototype.indexof\n// true  -> Array#includes\n// https://tc39.github.io/ecma262/#sec-array.prototype.includes\nmodule.exports = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIndexedObject($this);\n    var length = toLength(O.length);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) if (IS_INCLUDES || index in O) {\n      if (O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n","var has = require('../internals/has');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar arrayIndexOf = require('../internals/array-includes')(false);\nvar hiddenKeys = require('../internals/hidden-keys');\n\nmodule.exports = function (object, names) {\n  var O = toIndexedObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) !has(hiddenKeys, key) && has(O, key) && result.push(key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (has(O, key = names[i++])) {\n    ~arrayIndexOf(result, key) || result.push(key);\n  }\n  return result;\n};\n","var has = require('../internals/has');\nvar ownKeys = require('../internals/own-keys');\nvar getOwnPropertyDescriptorModule = require('../internals/object-get-own-property-descriptor');\nvar definePropertyModule = require('../internals/object-define-property');\n\nmodule.exports = function (target, source) {\n  var keys = ownKeys(source);\n  var defineProperty = definePropertyModule.f;\n  var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    if (!has(target, key)) defineProperty(target, key, getOwnPropertyDescriptor(source, key));\n  }\n};\n","var fails = require('../internals/fails');\nvar replacement = /#|\\.prototype\\./;\n\nvar isForced = function (feature, detection) {\n  var value = data[normalize(feature)];\n  return value == POLYFILL ? true\n    : value == NATIVE ? false\n    : typeof detection == 'function' ? fails(detection)\n    : !!detection;\n};\n\nvar normalize = isForced.normalize = function (string) {\n  return String(string).replace(replacement, '.').toLowerCase();\n};\n\nvar data = isForced.data = {};\nvar NATIVE = isForced.NATIVE = 'N';\nvar POLYFILL = isForced.POLYFILL = 'P';\n\nmodule.exports = isForced;\n","var global = require('../internals/global');\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar hide = require('../internals/hide');\nvar redefine = require('../internals/redefine');\nvar setGlobal = require('../internals/set-global');\nvar copyConstructorProperties = require('../internals/copy-constructor-properties');\nvar isForced = require('../internals/is-forced');\n\n/*\n  options.target      - name of the target object\n  options.global      - target is the global object\n  options.stat        - export as static methods of target\n  options.proto       - export as prototype methods of target\n  options.real        - real prototype method for the `pure` version\n  options.forced      - export even if the native feature is available\n  options.bind        - bind methods to the target, required for the `pure` version\n  options.wrap        - wrap constructors to preventing global pollution, required for the `pure` version\n  options.unsafe      - use the simple assignment of property instead of delete + defineProperty\n  options.sham        - add a flag to not completely full polyfills\n  options.enumerable  - export as enumerable property\n  options.noTargetGet - prevent calling a getter on target\n*/\nmodule.exports = function (options, source) {\n  var TARGET = options.target;\n  var GLOBAL = options.global;\n  var STATIC = options.stat;\n  var FORCED, target, key, targetProperty, sourceProperty, descriptor;\n  if (GLOBAL) {\n    target = global;\n  } else if (STATIC) {\n    target = global[TARGET] || setGlobal(TARGET, {});\n  } else {\n    target = (global[TARGET] || {}).prototype;\n  }\n  if (target) for (key in source) {\n    sourceProperty = source[key];\n    if (options.noTargetGet) {\n      descriptor = getOwnPropertyDescriptor(target, key);\n      targetProperty = descriptor && descriptor.value;\n    } else targetProperty = target[key];\n    FORCED = isForced(GLOBAL ? key : TARGET + (STATIC ? '.' : '#') + key, options.forced);\n    // contained in target\n    if (!FORCED && targetProperty !== undefined) {\n      if (typeof sourceProperty === typeof targetProperty) continue;\n      copyConstructorProperties(sourceProperty, targetProperty);\n    }\n    // add a flag to not completely full polyfills\n    if (options.sham || (targetProperty && targetProperty.sham)) {\n      hide(sourceProperty, 'sham', true);\n    }\n    // extend global\n    redefine(target, key, sourceProperty, options);\n  }\n};\n","'use strict';\nvar isArray = require('../internals/is-array');\nvar isObject = require('../internals/is-object');\nvar toObject = require('../internals/to-object');\nvar toLength = require('../internals/to-length');\nvar createProperty = require('../internals/create-property');\nvar arraySpeciesCreate = require('../internals/array-species-create');\nvar IS_CONCAT_SPREADABLE = require('../internals/well-known-symbol')('isConcatSpreadable');\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF;\nvar MAXIMUM_ALLOWED_INDEX_EXCEEDED = 'Maximum allowed index exceeded';\n\nvar IS_CONCAT_SPREADABLE_SUPPORT = !require('../internals/fails')(function () {\n  var array = [];\n  array[IS_CONCAT_SPREADABLE] = false;\n  return array.concat()[0] !== array;\n});\n\nvar SPECIES_SUPPORT = require('../internals/array-method-has-species-support')('concat');\n\nvar isConcatSpreadable = function (O) {\n  if (!isObject(O)) return false;\n  var spreadable = O[IS_CONCAT_SPREADABLE];\n  return spreadable !== undefined ? !!spreadable : isArray(O);\n};\n\nvar FORCED = !IS_CONCAT_SPREADABLE_SUPPORT || !SPECIES_SUPPORT;\n\n// `Array.prototype.concat` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.concat\n// with adding support of @@isConcatSpreadable and @@species\nrequire('../internals/export')({ target: 'Array', proto: true, forced: FORCED }, {\n  concat: function concat(arg) { // eslint-disable-line no-unused-vars\n    var O = toObject(this);\n    var A = arraySpeciesCreate(O, 0);\n    var n = 0;\n    var i, k, length, len, E;\n    for (i = -1, length = arguments.length; i < length; i++) {\n      E = i === -1 ? O : arguments[i];\n      if (isConcatSpreadable(E)) {\n        len = toLength(E.length);\n        if (n + len > MAX_SAFE_INTEGER) throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);\n        for (k = 0; k < len; k++, n++) if (k in E) createProperty(A, n, E[k]);\n      } else {\n        if (n >= MAX_SAFE_INTEGER) throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);\n        createProperty(A, n++, E);\n      }\n    }\n    A.length = n;\n    return A;\n  }\n});\n","var global = require('../internals/global');\nvar hide = require('../internals/hide');\nvar has = require('../internals/has');\nvar setGlobal = require('../internals/set-global');\nvar nativeFunctionToString = require('../internals/function-to-string');\nvar InternalStateModule = require('../internals/internal-state');\nvar getInternalState = InternalStateModule.get;\nvar enforceInternalState = InternalStateModule.enforce;\nvar TEMPLATE = String(nativeFunctionToString).split('toString');\n\nrequire('../internals/shared')('inspectSource', function (it) {\n  return nativeFunctionToString.call(it);\n});\n\n(module.exports = function (O, key, value, options) {\n  var unsafe = options ? !!options.unsafe : false;\n  var simple = options ? !!options.enumerable : false;\n  var noTargetGet = options ? !!options.noTargetGet : false;\n  if (typeof value == 'function') {\n    if (typeof key == 'string' && !has(value, 'name')) hide(value, 'name', key);\n    enforceInternalState(value).source = TEMPLATE.join(typeof key == 'string' ? key : '');\n  }\n  if (O === global) {\n    if (simple) O[key] = value;\n    else setGlobal(key, value);\n    return;\n  } else if (!unsafe) {\n    delete O[key];\n  } else if (!noTargetGet && O[key]) {\n    simple = true;\n  }\n  if (simple) O[key] = value;\n  else hide(O, key, value);\n// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative\n})(Function.prototype, 'toString', function toString() {\n  return typeof this == 'function' && getInternalState(this).source || nativeFunctionToString.call(this);\n});\n","// IE8- don't enum bug keys\nmodule.exports = [\n  'constructor',\n  'hasOwnProperty',\n  'isPrototypeOf',\n  'propertyIsEnumerable',\n  'toLocaleString',\n  'toString',\n  'valueOf'\n];\n","// 19.1.2.7 / 15.2.3.4 Object.getOwnPropertyNames(O)\nvar internalObjectKeys = require('../internals/object-keys-internal');\nvar hiddenKeys = require('../internals/enum-bug-keys').concat('length', 'prototype');\n\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n  return internalObjectKeys(O, hiddenKeys);\n};\n","exports.f = Object.getOwnPropertySymbols;\n","var getOwnPropertyNamesModule = require('../internals/object-get-own-property-names');\nvar getOwnPropertySymbolsModule = require('../internals/object-get-own-property-symbols');\nvar anObject = require('../internals/an-object');\nvar Reflect = require('../internals/global').Reflect;\n\n// all object keys, includes non-enumerable and symbols\nmodule.exports = Reflect && Reflect.ownKeys || function ownKeys(it) {\n  var keys = getOwnPropertyNamesModule.f(anObject(it));\n  var getOwnPropertySymbols = getOwnPropertySymbolsModule.f;\n  return getOwnPropertySymbols ? keys.concat(getOwnPropertySymbols(it)) : keys;\n};\n","module.exports = function (it) {\n  if (typeof it != 'function') {\n    throw TypeError(String(it) + ' is not a function');\n  } return it;\n};\n","var bind = require('../internals/bind-context');\nvar IndexedObject = require('../internals/indexed-object');\nvar toObject = require('../internals/to-object');\nvar toLength = require('../internals/to-length');\nvar arraySpeciesCreate = require('../internals/array-species-create');\n\n// `Array.prototype.{ forEach, map, filter, some, every, find, findIndex }` methods implementation\n// 0 -> Array#forEach\n// https://tc39.github.io/ecma262/#sec-array.prototype.foreach\n// 1 -> Array#map\n// https://tc39.github.io/ecma262/#sec-array.prototype.map\n// 2 -> Array#filter\n// https://tc39.github.io/ecma262/#sec-array.prototype.filter\n// 3 -> Array#some\n// https://tc39.github.io/ecma262/#sec-array.prototype.some\n// 4 -> Array#every\n// https://tc39.github.io/ecma262/#sec-array.prototype.every\n// 5 -> Array#find\n// https://tc39.github.io/ecma262/#sec-array.prototype.find\n// 6 -> Array#findIndex\n// https://tc39.github.io/ecma262/#sec-array.prototype.findIndex\nmodule.exports = function (TYPE, specificCreate) {\n  var IS_MAP = TYPE == 1;\n  var IS_FILTER = TYPE == 2;\n  var IS_SOME = TYPE == 3;\n  var IS_EVERY = TYPE == 4;\n  var IS_FIND_INDEX = TYPE == 6;\n  var NO_HOLES = TYPE == 5 || IS_FIND_INDEX;\n  var create = specificCreate || arraySpeciesCreate;\n  return function ($this, callbackfn, that) {\n    var O = toObject($this);\n    var self = IndexedObject(O);\n    var boundFunction = bind(callbackfn, that, 3);\n    var length = toLength(self.length);\n    var index = 0;\n    var target = IS_MAP ? create($this, length) : IS_FILTER ? create($this, 0) : undefined;\n    var value, result;\n    for (;length > index; index++) if (NO_HOLES || index in self) {\n      value = self[index];\n      result = boundFunction(value, index, O);\n      if (TYPE) {\n        if (IS_MAP) target[index] = result; // map\n        else if (result) switch (TYPE) {\n          case 3: return true;              // some\n          case 5: return value;             // find\n          case 6: return index;             // findIndex\n          case 2: target.push(value);       // filter\n        } else if (IS_EVERY) return false;  // every\n      }\n    }\n    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : target;\n  };\n};\n","var aFunction = require('../internals/a-function');\n\n// optional / simple context binding\nmodule.exports = function (fn, that, length) {\n  aFunction(fn);\n  if (that === undefined) return fn;\n  switch (length) {\n    case 0: return function () {\n      return fn.call(that);\n    };\n    case 1: return function (a) {\n      return fn.call(that, a);\n    };\n    case 2: return function (a, b) {\n      return fn.call(that, a, b);\n    };\n    case 3: return function (a, b, c) {\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n","'use strict';\nvar fails = require('../internals/fails');\n\nmodule.exports = function (METHOD_NAME, argument) {\n  var method = [][METHOD_NAME];\n  return !method || !fails(function () {\n    // eslint-disable-next-line no-useless-call,no-throw-literal\n    method.call(null, argument || function () { throw 1; }, 1);\n  });\n};\n","'use strict';\nvar internalEvery = require('../internals/array-methods')(4);\n\nvar SLOPPY_METHOD = require('../internals/sloppy-array-method')('every');\n\n// `Array.prototype.every` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.every\nrequire('../internals/export')({ target: 'Array', proto: true, forced: SLOPPY_METHOD }, {\n  every: function every(callbackfn /* , thisArg */) {\n    return internalEvery(this, callbackfn, arguments[1]);\n  }\n});\n","'use strict';\nvar internalFilter = require('../internals/array-methods')(2);\n\nvar SPECIES_SUPPORT = require('../internals/array-method-has-species-support')('filter');\n\n// `Array.prototype.filter` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.filter\n// with adding support of @@species\nrequire('../internals/export')({ target: 'Array', proto: true, forced: !SPECIES_SUPPORT }, {\n  filter: function filter(callbackfn /* , thisArg */) {\n    return internalFilter(this, callbackfn, arguments[1]);\n  }\n});\n","'use strict';\nvar nativeForEach = [].forEach;\nvar internalForEach = require('../internals/array-methods')(0);\n\nvar SLOPPY_METHOD = require('../internals/sloppy-array-method')('forEach');\n\n// `Array.prototype.forEach` method implementation\n// https://tc39.github.io/ecma262/#sec-array.prototype.foreach\nmodule.exports = SLOPPY_METHOD ? function forEach(callbackfn /* , thisArg */) {\n  return internalForEach(this, callbackfn, arguments[1]);\n} : nativeForEach;\n","'use strict';\nvar forEach = require('../internals/array-for-each');\n\n// `Array.prototype.forEach` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.foreach\nrequire('../internals/export')({ target: 'Array', proto: true, forced: [].forEach != forEach }, { forEach: forEach });\n","'use strict';\nvar internalIndexOf = require('../internals/array-includes')(false);\nvar nativeIndexOf = [].indexOf;\n\nvar NEGATIVE_ZERO = !!nativeIndexOf && 1 / [1].indexOf(1, -0) < 0;\nvar SLOPPY_METHOD = require('../internals/sloppy-array-method')('indexOf');\n\n// `Array.prototype.indexOf` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.indexof\nrequire('../internals/export')({ target: 'Array', proto: true, forced: NEGATIVE_ZERO || SLOPPY_METHOD }, {\n  indexOf: function indexOf(searchElement /* , fromIndex = 0 */) {\n    return NEGATIVE_ZERO\n      // convert -0 to +0\n      ? nativeIndexOf.apply(this, arguments) || 0\n      : internalIndexOf(this, searchElement, arguments[1]);\n  }\n});\n","// `Array.isArray` method\n// https://tc39.github.io/ecma262/#sec-array.isarray\nrequire('../internals/export')({ target: 'Array', stat: true }, { isArray: require('../internals/is-array') });\n","'use strict';\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar nativeJoin = [].join;\n\nvar ES3_STRINGS = require('../internals/indexed-object') != Object;\nvar SLOPPY_METHOD = require('../internals/sloppy-array-method')('join', ',');\n\n// `Array.prototype.join` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.join\nrequire('../internals/export')({ target: 'Array', proto: true, forced: ES3_STRINGS || SLOPPY_METHOD }, {\n  join: function join(separator) {\n    return nativeJoin.call(toIndexedObject(this), separator === undefined ? ',' : separator);\n  }\n});\n","'use strict';\nvar internalMap = require('../internals/array-methods')(1);\n\nvar SPECIES_SUPPORT = require('../internals/array-method-has-species-support')('map');\n\n// `Array.prototype.map` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.map\n// with adding support of @@species\nrequire('../internals/export')({ target: 'Array', proto: true, forced: !SPECIES_SUPPORT }, {\n  map: function map(callbackfn /* , thisArg */) {\n    return internalMap(this, callbackfn, arguments[1]);\n  }\n});\n","'use strict';\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar toInteger = require('../internals/to-integer');\nvar toLength = require('../internals/to-length');\nvar toObject = require('../internals/to-object');\nvar arraySpeciesCreate = require('../internals/array-species-create');\nvar createProperty = require('../internals/create-property');\nvar max = Math.max;\nvar min = Math.min;\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF;\nvar MAXIMUM_ALLOWED_LENGTH_EXCEEDED = 'Maximum allowed length exceeded';\n\nvar SPECIES_SUPPORT = require('../internals/array-method-has-species-support')('splice');\n\n// `Array.prototype.splice` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.splice\n// with adding support of @@species\nrequire('../internals/export')({ target: 'Array', proto: true, forced: !SPECIES_SUPPORT }, {\n  splice: function splice(start, deleteCount /* , ...items */) {\n    var O = toObject(this);\n    var len = toLength(O.length);\n    var actualStart = toAbsoluteIndex(start, len);\n    var argumentsLength = arguments.length;\n    var insertCount, actualDeleteCount, A, k, from, to;\n    if (argumentsLength === 0) {\n      insertCount = actualDeleteCount = 0;\n    } else if (argumentsLength === 1) {\n      insertCount = 0;\n      actualDeleteCount = len - actualStart;\n    } else {\n      insertCount = argumentsLength - 2;\n      actualDeleteCount = min(max(toInteger(deleteCount), 0), len - actualStart);\n    }\n    if (len + insertCount - actualDeleteCount > MAX_SAFE_INTEGER) {\n      throw TypeError(MAXIMUM_ALLOWED_LENGTH_EXCEEDED);\n    }\n    A = arraySpeciesCreate(O, actualDeleteCount);\n    for (k = 0; k < actualDeleteCount; k++) {\n      from = actualStart + k;\n      if (from in O) createProperty(A, k, O[from]);\n    }\n    A.length = actualDeleteCount;\n    if (insertCount < actualDeleteCount) {\n      for (k = actualStart; k < len - actualDeleteCount; k++) {\n        from = k + actualDeleteCount;\n        to = k + insertCount;\n        if (from in O) O[to] = O[from];\n        else delete O[to];\n      }\n      for (k = len; k > len - actualDeleteCount + insertCount; k--) delete O[k - 1];\n    } else if (insertCount > actualDeleteCount) {\n      for (k = len - actualDeleteCount; k > actualStart; k--) {\n        from = k + actualDeleteCount - 1;\n        to = k + insertCount - 1;\n        if (from in O) O[to] = O[from];\n        else delete O[to];\n      }\n    }\n    for (k = 0; k < insertCount; k++) {\n      O[k + actualStart] = arguments[k + 2];\n    }\n    O.length = len - actualDeleteCount + insertCount;\n    return A;\n  }\n});\n","'use strict';\nvar aFunction = require('../internals/a-function');\nvar isObject = require('../internals/is-object');\nvar arraySlice = [].slice;\nvar factories = {};\n\nvar construct = function (C, argsLength, args) {\n  if (!(argsLength in factories)) {\n    for (var list = [], i = 0; i < argsLength; i++) list[i] = 'a[' + i + ']';\n    // eslint-disable-next-line no-new-func\n    factories[argsLength] = Function('C,a', 'return new C(' + list.join(',') + ')');\n  } return factories[argsLength](C, args);\n};\n\n// `Function.prototype.bind` method implementation\n// https://tc39.github.io/ecma262/#sec-function.prototype.bind\nmodule.exports = Function.bind || function bind(that /* , ...args */) {\n  var fn = aFunction(this);\n  var partArgs = arraySlice.call(arguments, 1);\n  var boundFunction = function bound(/* args... */) {\n    var args = partArgs.concat(arraySlice.call(arguments));\n    return this instanceof boundFunction ? construct(fn, args.length, args) : fn.apply(that, args);\n  };\n  if (isObject(fn.prototype)) boundFunction.prototype = fn.prototype;\n  return boundFunction;\n};\n","// `Function.prototype.bind` method\n// https://tc39.github.io/ecma262/#sec-function.prototype.bind\nrequire('../internals/export')({ target: 'Function', proto: true }, {\n  bind: require('../internals/function-bind')\n});\n","var DESCRIPTORS = require('../internals/descriptors');\n\n// `Object.defineProperty` method\n// https://tc39.github.io/ecma262/#sec-object.defineproperty\nrequire('../internals/export')({ target: 'Object', stat: true, forced: !DESCRIPTORS, sham: !DESCRIPTORS }, {\n  defineProperty: require('../internals/object-define-property').f\n});\n","var toIndexedObject = require('../internals/to-indexed-object');\nvar nativeGetOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar DESCRIPTORS = require('../internals/descriptors');\nvar FAILS_ON_PRIMITIVES = require('../internals/fails')(function () { nativeGetOwnPropertyDescriptor(1); });\nvar FORCED = !DESCRIPTORS || FAILS_ON_PRIMITIVES;\n\n// `Object.getOwnPropertyDescriptor` method\n// https://tc39.github.io/ecma262/#sec-object.getownpropertydescriptor\nrequire('../internals/export')({ target: 'Object', stat: true, forced: FORCED, sham: !DESCRIPTORS }, {\n  getOwnPropertyDescriptor: function getOwnPropertyDescriptor(it, key) {\n    return nativeGetOwnPropertyDescriptor(toIndexedObject(it), key);\n  }\n});\n","// 19.1.2.14 / 15.2.3.14 Object.keys(O)\nvar internalObjectKeys = require('../internals/object-keys-internal');\nvar enumBugKeys = require('../internals/enum-bug-keys');\n\nmodule.exports = Object.keys || function keys(O) {\n  return internalObjectKeys(O, enumBugKeys);\n};\n","var toObject = require('../internals/to-object');\nvar nativeKeys = require('../internals/object-keys');\nvar FAILS_ON_PRIMITIVES = require('../internals/fails')(function () { nativeKeys(1); });\n\n// `Object.keys` method\n// https://tc39.github.io/ecma262/#sec-object.keys\nrequire('../internals/export')({ target: 'Object', stat: true, forced: FAILS_ON_PRIMITIVES }, {\n  keys: function keys(it) {\n    return nativeKeys(toObject(it));\n  }\n});\n","var DOMIterables = require('../internals/dom-iterables');\nvar forEach = require('../internals/array-for-each');\nvar hide = require('../internals/hide');\nvar global = require('../internals/global');\n\nfor (var COLLECTION_NAME in DOMIterables) {\n  var Collection = global[COLLECTION_NAME];\n  var CollectionPrototype = Collection && Collection.prototype;\n  // some Chrome versions have non-configurable methods on DOMTokenList\n  if (CollectionPrototype && CollectionPrototype.forEach !== forEach) try {\n    hide(CollectionPrototype, 'forEach', forEach);\n  } catch (error) {\n    CollectionPrototype.forEach = forEach;\n  }\n}\n","// iterable DOM collections\n// flag - `iterable` interface - 'entries', 'keys', 'values', 'forEach' methods\nmodule.exports = {\n  CSSRuleList: 0,\n  CSSStyleDeclaration: 0,\n  CSSValueList: 0,\n  ClientRectList: 0,\n  DOMRectList: 0,\n  DOMStringList: 0,\n  DOMTokenList: 1,\n  DataTransferItemList: 0,\n  FileList: 0,\n  HTMLAllCollection: 0,\n  HTMLCollection: 0,\n  HTMLFormElement: 0,\n  HTMLSelectElement: 0,\n  MediaList: 0,\n  MimeTypeArray: 0,\n  NamedNodeMap: 0,\n  NodeList: 1,\n  PaintRequestList: 0,\n  Plugin: 0,\n  PluginArray: 0,\n  SVGLengthList: 0,\n  SVGNumberList: 0,\n  SVGPathSegList: 0,\n  SVGPointList: 0,\n  SVGStringList: 0,\n  SVGTransformList: 0,\n  SourceBufferList: 0,\n  StyleSheetList: 0,\n  TextTrackCueList: 0,\n  TextTrackList: 0,\n  TouchList: 0\n};\n","(function() {\n  'use strict';\n\n  /**\n   * Here is the list of every allowed parameter when using Emitter#on:\n   * @type {Object}\n   */\n  var __allowedOptions = {\n    once: 'boolean',\n    scope: 'object'\n  };\n\n  /**\n   * Incremental id used to order event handlers.\n   */\n  var __order = 0;\n\n  /**\n   * A simple helper to shallowly merge two objects. The second one will \"win\"\n   * over the first one.\n   *\n   * @param  {object}  o1 First target object.\n   * @param  {object}  o2 Second target object.\n   * @return {object}     Returns the merged object.\n   */\n  function shallowMerge(o1, o2) {\n    var o = {},\n        k;\n\n    for (k in o1) o[k] = o1[k];\n    for (k in o2) o[k] = o2[k];\n\n    return o;\n  }\n\n  /**\n   * Is the given variable a plain JavaScript object?\n   *\n   * @param  {mixed}  v   Target.\n   * @return {boolean}    The boolean result.\n   */\n  function isPlainObject(v) {\n    return v &&\n           typeof v === 'object' &&\n           !Array.isArray(v) &&\n           !(v instanceof Function) &&\n           !(v instanceof RegExp);\n  }\n\n  /**\n   * Iterate over an object that may have ES6 Symbols.\n   *\n   * @param  {object}   object  Object on which to iterate.\n   * @param  {function} fn      Iterator function.\n   * @param  {object}   [scope] Optional scope.\n   */\n  function forIn(object, fn, scope) {\n    var symbols,\n        k,\n        i,\n        l;\n\n    for (k in object)\n      fn.call(scope || null, k, object[k]);\n\n    if (Object.getOwnPropertySymbols) {\n      symbols = Object.getOwnPropertySymbols(object);\n\n      for (i = 0, l = symbols.length; i < l; i++)\n        fn.call(scope || null, symbols[i], object[symbols[i]]);\n    }\n  }\n\n  /**\n   * The emitter's constructor. It initializes the handlers-per-events store and\n   * the global handlers store.\n   *\n   * Emitters are useful for non-DOM events communication. Read its methods\n   * documentation for more information about how it works.\n   *\n   * @return {Emitter}         The fresh new instance.\n   */\n  var Emitter = function() {\n    this._enabled = true;\n\n    // Dirty trick that will set the necessary properties to the emitter\n    this.unbindAll();\n  };\n\n  /**\n   * This method unbinds every handlers attached to every or any events. So,\n   * these functions will no more be executed when the related events are\n   * emitted. If the functions were not bound to the events, nothing will\n   * happen, and no error will be thrown.\n   *\n   * Usage:\n   * ******\n   * > myEmitter.unbindAll();\n   *\n   * @return {Emitter}      Returns this.\n   */\n  Emitter.prototype.unbindAll = function() {\n\n    this._handlers = {};\n    this._handlersAll = [];\n    this._handlersComplex = [];\n\n    return this;\n  };\n\n\n  /**\n   * This method binds one or more functions to the emitter, handled to one or a\n   * suite of events. So, these functions will be executed anytime one related\n   * event is emitted.\n   *\n   * It is also possible to bind a function to any emitted event by not\n   * specifying any event to bind the function to.\n   *\n   * Recognized options:\n   * *******************\n   *  - {?boolean} once   If true, the handlers will be unbound after the first\n   *                      execution. Default value: false.\n   *  - {?object}  scope  If a scope is given, then the listeners will be called\n   *                      with this scope as \"this\".\n   *\n   * Variant 1:\n   * **********\n   * > myEmitter.on('myEvent', function(e) { console.log(e); });\n   * > // Or:\n   * > myEmitter.on('myEvent', function(e) { console.log(e); }, { once: true });\n   *\n   * @param  {string}   event   The event to listen to.\n   * @param  {function} handler The function to bind.\n   * @param  {?object}  options Eventually some options.\n   * @return {Emitter}          Returns this.\n   *\n   * Variant 2:\n   * **********\n   * > myEmitter.on(\n   * >   ['myEvent1', 'myEvent2'],\n   * >   function(e) { console.log(e); }\n   * >);\n   * > // Or:\n   * > myEmitter.on(\n   * >   ['myEvent1', 'myEvent2'],\n   * >   function(e) { console.log(e); }\n   * >   { once: true }}\n   * >);\n   *\n   * @param  {array}    events  The events to listen to.\n   * @param  {function} handler The function to bind.\n   * @param  {?object}  options Eventually some options.\n   * @return {Emitter}          Returns this.\n   *\n   * Variant 3:\n   * **********\n   * > myEmitter.on({\n   * >   myEvent1: function(e) { console.log(e); },\n   * >   myEvent2: function(e) { console.log(e); }\n   * > });\n   * > // Or:\n   * > myEmitter.on({\n   * >   myEvent1: function(e) { console.log(e); },\n   * >   myEvent2: function(e) { console.log(e); }\n   * > }, { once: true });\n   *\n   * @param  {object}  bindings An object containing pairs event / function.\n   * @param  {?object}  options Eventually some options.\n   * @return {Emitter}          Returns this.\n   *\n   * Variant 4:\n   * **********\n   * > myEmitter.on(function(e) { console.log(e); });\n   * > // Or:\n   * > myEmitter.on(function(e) { console.log(e); }, { once: true});\n   *\n   * @param  {function} handler The function to bind to every events.\n   * @param  {?object}  options Eventually some options.\n   * @return {Emitter}          Returns this.\n   */\n  Emitter.prototype.on = function(a, b, c) {\n    var i,\n        l,\n        k,\n        event,\n        eArray,\n        handlersList,\n        bindingObject;\n\n    // Variant 3\n    if (isPlainObject(a)) {\n      forIn(a, function(name, fn) {\n        this.on(name, fn, b);\n      }, this);\n\n      return this;\n    }\n\n    // Variant 1, 2 and 4\n    if (typeof a === 'function') {\n      c = b;\n      b = a;\n      a = null;\n    }\n\n    eArray = [].concat(a);\n\n    for (i = 0, l = eArray.length; i < l; i++) {\n      event = eArray[i];\n\n      bindingObject = {\n        order: __order++,\n        fn: b\n      };\n\n      // Defining the list in which the handler should be inserted\n      if (typeof event === 'string' || typeof event === 'symbol') {\n        if (!this._handlers[event])\n          this._handlers[event] = [];\n        handlersList = this._handlers[event];\n        bindingObject.type = event;\n      }\n      else if (event instanceof RegExp) {\n        handlersList = this._handlersComplex;\n        bindingObject.pattern = event;\n      }\n      else if (event === null) {\n        handlersList = this._handlersAll;\n      }\n      else {\n        throw Error('Emitter.on: invalid event.');\n      }\n\n      // Appending needed properties\n      for (k in c || {})\n        if (__allowedOptions[k])\n          bindingObject[k] = c[k];\n\n      handlersList.push(bindingObject);\n    }\n\n    return this;\n  };\n\n\n  /**\n   * This method works exactly as the previous #on, but will add an options\n   * object if none is given, and set the option \"once\" to true.\n   *\n   * The polymorphism works exactly as with the #on method.\n   */\n  Emitter.prototype.once = function() {\n    var args = Array.prototype.slice.call(arguments),\n        li = args.length - 1;\n\n    if (isPlainObject(args[li]) && args.length > 1)\n      args[li] = shallowMerge(args[li], {once: true});\n    else\n      args.push({once: true});\n\n    return this.on.apply(this, args);\n  };\n\n\n  /**\n   * This method unbinds one or more functions from events of the emitter. So,\n   * these functions will no more be executed when the related events are\n   * emitted. If the functions were not bound to the events, nothing will\n   * happen, and no error will be thrown.\n   *\n   * Variant 1:\n   * **********\n   * > myEmitter.off('myEvent', myHandler);\n   *\n   * @param  {string}   event   The event to unbind the handler from.\n   * @param  {function} handler The function to unbind.\n   * @return {Emitter}          Returns this.\n   *\n   * Variant 2:\n   * **********\n   * > myEmitter.off(['myEvent1', 'myEvent2'], myHandler);\n   *\n   * @param  {array}    events  The events to unbind the handler from.\n   * @param  {function} handler The function to unbind.\n   * @return {Emitter}          Returns this.\n   *\n   * Variant 3:\n   * **********\n   * > myEmitter.off({\n   * >   myEvent1: myHandler1,\n   * >   myEvent2: myHandler2\n   * > });\n   *\n   * @param  {object} bindings An object containing pairs event / function.\n   * @return {Emitter}         Returns this.\n   *\n   * Variant 4:\n   * **********\n   * > myEmitter.off(myHandler);\n   *\n   * @param  {function} handler The function to unbind from every events.\n   * @return {Emitter}          Returns this.\n   *\n   * Variant 5:\n   * **********\n   * > myEmitter.off(event);\n   *\n   * @param  {string} event     The event we should unbind.\n   * @return {Emitter}          Returns this.\n   */\n  function filter(target, fn) {\n    target = target || [];\n\n    var a = [],\n        l,\n        i;\n\n    for (i = 0, l = target.length; i < l; i++)\n      if (target[i].fn !== fn)\n        a.push(target[i]);\n\n    return a;\n  }\n\n  Emitter.prototype.off = function(events, fn) {\n    var i,\n        n,\n        k,\n        event;\n\n    // Variant 4:\n    if (arguments.length === 1 && typeof events === 'function') {\n      fn = arguments[0];\n\n      // Handlers bound to events:\n      for (k in this._handlers) {\n        this._handlers[k] = filter(this._handlers[k], fn);\n\n        if (this._handlers[k].length === 0)\n          delete this._handlers[k];\n      }\n\n      // Generic Handlers\n      this._handlersAll = filter(this._handlersAll, fn);\n\n      // Complex handlers\n      this._handlersComplex = filter(this._handlersComplex, fn);\n    }\n\n    // Variant 5\n    else if (arguments.length === 1 &&\n             (typeof events === 'string' || typeof events === 'symbol')) {\n      delete this._handlers[events];\n    }\n\n    // Variant 1 and 2:\n    else if (arguments.length === 2) {\n      var eArray = [].concat(events);\n\n      for (i = 0, n = eArray.length; i < n; i++) {\n        event = eArray[i];\n\n        this._handlers[event] = filter(this._handlers[event], fn);\n\n        if ((this._handlers[event] || []).length === 0)\n          delete this._handlers[event];\n      }\n    }\n\n    // Variant 3\n    else if (isPlainObject(events)) {\n      forIn(events, this.off, this);\n    }\n\n    return this;\n  };\n\n  /**\n   * This method retrieve the listeners attached to a particular event.\n   *\n   * @param  {?string}    Name of the event.\n   * @return {array}      Array of handler functions.\n   */\n  Emitter.prototype.listeners = function(event) {\n    var handlers = this._handlersAll || [],\n        complex = false,\n        h,\n        i,\n        l;\n\n    if (!event)\n      throw Error('Emitter.listeners: no event provided.');\n\n    handlers = handlers.concat(this._handlers[event] || []);\n\n    for (i = 0, l = this._handlersComplex.length; i < l; i++) {\n      h = this._handlersComplex[i];\n\n      if (~event.search(h.pattern)) {\n        complex = true;\n        handlers.push(h);\n      }\n    }\n\n    // If we have any complex handlers, we need to sort\n    if (this._handlersAll.length || complex)\n      return handlers.sort(function(a, b) {\n        return a.order - b.order;\n      });\n    else\n      return handlers.slice(0);\n  };\n\n  /**\n   * This method emits the specified event(s), and executes every handlers bound\n   * to the event(s).\n   *\n   * Use cases:\n   * **********\n   * > myEmitter.emit('myEvent');\n   * > myEmitter.emit('myEvent', myData);\n   * > myEmitter.emit(['myEvent1', 'myEvent2']);\n   * > myEmitter.emit(['myEvent1', 'myEvent2'], myData);\n   * > myEmitter.emit({myEvent1: myData1, myEvent2: myData2});\n   *\n   * @param  {string|array} events The event(s) to emit.\n   * @param  {object?}      data   The data.\n   * @return {Emitter}             Returns this.\n   */\n  Emitter.prototype.emit = function(events, data) {\n\n    // Short exit if the emitter is disabled\n    if (!this._enabled)\n      return this;\n\n    // Object variant\n    if (isPlainObject(events)) {\n      forIn(events, this.emit, this);\n      return this;\n    }\n\n    var eArray = [].concat(events),\n        onces = [],\n        event,\n        parent,\n        handlers,\n        handler,\n        i,\n        j,\n        l,\n        m;\n\n    for (i = 0, l = eArray.length; i < l; i++) {\n      handlers = this.listeners(eArray[i]);\n\n      for (j = 0, m = handlers.length; j < m; j++) {\n        handler = handlers[j];\n        event = {\n          type: eArray[i],\n          target: this\n        };\n\n        if (arguments.length > 1)\n          event.data = data;\n\n        handler.fn.call('scope' in handler ? handler.scope : this, event);\n\n        if (handler.once)\n          onces.push(handler);\n      }\n\n      // Cleaning onces\n      for (j = onces.length - 1; j >= 0; j--) {\n        parent = onces[j].type ?\n          this._handlers[onces[j].type] :\n          onces[j].pattern ?\n            this._handlersComplex :\n            this._handlersAll;\n\n        parent.splice(parent.indexOf(onces[j]), 1);\n      }\n    }\n\n    return this;\n  };\n\n\n  /**\n   * This method will unbind all listeners and make it impossible to ever\n   * rebind any listener to any event.\n   */\n  Emitter.prototype.kill = function() {\n\n    this.unbindAll();\n    this._handlers = null;\n    this._handlersAll = null;\n    this._handlersComplex = null;\n    this._enabled = false;\n\n    // Nooping methods\n    this.unbindAll =\n    this.on =\n    this.once =\n    this.off =\n    this.emit =\n    this.listeners = Function.prototype;\n  };\n\n\n  /**\n   * This method disabled the emitter, which means its emit method will do\n   * nothing.\n   *\n   * @return {Emitter} Returns this.\n   */\n  Emitter.prototype.disable = function() {\n    this._enabled = false;\n\n    return this;\n  };\n\n\n  /**\n   * This method enables the emitter.\n   *\n   * @return {Emitter} Returns this.\n   */\n  Emitter.prototype.enable = function() {\n    this._enabled = true;\n\n    return this;\n  };\n\n\n  /**\n   * Version:\n   */\n  Emitter.version = '3.1.1';\n\n\n  // Export:\n  if (typeof exports !== 'undefined') {\n    if (typeof module !== 'undefined' && module.exports)\n      exports = module.exports = Emitter;\n    exports.Emitter = Emitter;\n  } else if (typeof define === 'function' && define.amd)\n    define('emmett', [], function() {\n      return Emitter;\n    });\n  else\n    this.Emitter = Emitter;\n}).call(this);\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; /**\n                                                                                                                                                                                                                                                                               * Baobab Type Checking\n                                                                                                                                                                                                                                                                               * =====================\n                                                                                                                                                                                                                                                                               *\n                                                                                                                                                                                                                                                                               * Helpers functions used throughout the library to perform some type\n                                                                                                                                                                                                                                                                               * tests at runtime.\n                                                                                                                                                                                                                                                                               *\n                                                                                                                                                                                                                                                                               */\n\n\nvar _monkey = require('./monkey');\n\nvar type = {};\n\n/**\n * Helpers\n * --------\n */\n\n/**\n * Checking whether the given variable is of any of the given types.\n *\n * @todo   Optimize this function by dropping `some`.\n *\n * @param  {mixed} target  - Variable to test.\n * @param  {array} allowed - Array of allowed types.\n * @return {boolean}\n */\nfunction anyOf(target, allowed) {\n  return allowed.some(function (t) {\n    return type[t](target);\n  });\n}\n\n/**\n * Simple types\n * -------------\n */\n\n/**\n * Checking whether the given variable is an array.\n *\n * @param  {mixed} target - Variable to test.\n * @return {boolean}\n */\ntype.array = function (target) {\n  return Array.isArray(target);\n};\n\n/**\n * Checking whether the given variable is an object.\n *\n * @param  {mixed} target - Variable to test.\n * @return {boolean}\n */\ntype.object = function (target) {\n  return target && (typeof target === 'undefined' ? 'undefined' : _typeof(target)) === 'object' && !Array.isArray(target) && !(target instanceof Date) && !(target instanceof RegExp) && !(typeof Map === 'function' && target instanceof Map) && !(typeof Set === 'function' && target instanceof Set);\n};\n\n/**\n * Checking whether the given variable is a string.\n *\n * @param  {mixed} target - Variable to test.\n * @return {boolean}\n */\ntype.string = function (target) {\n  return typeof target === 'string';\n};\n\n/**\n * Checking whether the given variable is a number.\n *\n * @param  {mixed} target - Variable to test.\n * @return {boolean}\n */\ntype.number = function (target) {\n  return typeof target === 'number';\n};\n\n/**\n * Checking whether the given variable is a function.\n *\n * @param  {mixed} target - Variable to test.\n * @return {boolean}\n */\ntype.function = function (target) {\n  return typeof target === 'function';\n};\n\n/**\n * Checking whether the given variable is a JavaScript primitive.\n *\n * @param  {mixed} target - Variable to test.\n * @return {boolean}\n */\ntype.primitive = function (target) {\n  return target !== Object(target);\n};\n\n/**\n * Complex types\n * --------------\n */\n\n/**\n * Checking whether the given variable is a valid splicer.\n *\n * @param  {mixed} target    - Variable to test.\n * @param  {array} [allowed] - Optional valid types in path.\n * @return {boolean}\n */\ntype.splicer = function (target) {\n  if (!type.array(target) || target.length < 1) return false;\n  if (target.length > 1 && isNaN(+target[1])) return false;\n\n  return anyOf(target[0], ['number', 'function', 'object']);\n};\n\n/**\n * Checking whether the given variable is a valid cursor path.\n *\n * @param  {mixed} target    - Variable to test.\n * @param  {array} [allowed] - Optional valid types in path.\n * @return {boolean}\n */\n\n// Order is important for performance reasons\nvar ALLOWED_FOR_PATH = ['string', 'number', 'function', 'object'];\n\ntype.path = function (target) {\n  if (!target && target !== 0 && target !== '') return false;\n\n  return [].concat(target).every(function (step) {\n    return anyOf(step, ALLOWED_FOR_PATH);\n  });\n};\n\n/**\n * Checking whether the given path is a dynamic one.\n *\n * @param  {mixed} path - The path to test.\n * @return {boolean}\n */\ntype.dynamicPath = function (path) {\n  return path.some(function (step) {\n    return type.function(step) || type.object(step);\n  });\n};\n\n/**\n * Retrieve any monkey subpath in the given path or null if the path never comes\n * across computed data.\n *\n * @param  {mixed} data - The data to test.\n * @param  {array} path - The path to test.\n * @return {boolean}\n */\ntype.monkeyPath = function (data, path) {\n  var subpath = [];\n\n  var c = data,\n      i = void 0,\n      l = void 0;\n\n  for (i = 0, l = path.length; i < l; i++) {\n    subpath.push(path[i]);\n\n    if ((typeof c === 'undefined' ? 'undefined' : _typeof(c)) !== 'object') return null;\n\n    c = c[path[i]];\n\n    if (c instanceof _monkey.Monkey) return subpath;\n  }\n\n  return null;\n};\n\n/**\n * Check if the given object property is a lazy getter used by a monkey.\n *\n * @param  {mixed}   o           - The target object.\n * @param  {string}  propertyKey - The property to test.\n * @return {boolean}\n */\ntype.lazyGetter = function (o, propertyKey) {\n  var descriptor = Object.getOwnPropertyDescriptor(o, propertyKey);\n\n  return descriptor && descriptor.get && descriptor.get.isLazyGetter === true;\n};\n\n/**\n * Returns the type of the given monkey definition or `null` if invalid.\n *\n * @param  {mixed} definition - The definition to check.\n * @return {string|null}\n */\ntype.monkeyDefinition = function (definition) {\n\n  if (type.object(definition)) {\n    if (!type.function(definition.get) || definition.cursors && (!type.object(definition.cursors) || !Object.keys(definition.cursors).every(function (k) {\n      return type.path(definition.cursors[k]);\n    }))) return null;\n\n    return 'object';\n  } else if (type.array(definition)) {\n    var offset = 1;\n\n    if (type.object(definition[definition.length - 1])) offset++;\n\n    if (!type.function(definition[definition.length - offset]) || !definition.slice(0, -offset).every(function (p) {\n      return type.path(p);\n    })) return null;\n\n    return 'array';\n  }\n\n  return null;\n};\n\n/**\n * Checking whether the given watcher definition is valid.\n *\n * @param  {mixed}   definition - The definition to check.\n * @return {boolean}\n */\ntype.watcherMapping = function (definition) {\n  return type.object(definition) && Object.keys(definition).every(function (k) {\n    return type.path(definition[k]);\n  });\n};\n\n/**\n * Checking whether the given string is a valid operation type.\n *\n * @param  {mixed} string - The string to test.\n * @return {boolean}\n */\n\n// Ordered by likeliness\nvar VALID_OPERATIONS = ['set', 'apply', 'push', 'unshift', 'concat', 'pop', 'shift', 'deepMerge', 'merge', 'splice', 'unset'];\n\ntype.operationType = function (string) {\n  return typeof string === 'string' && !!~VALID_OPERATIONS.indexOf(string);\n};\n\nexports.default = type;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.uniqid = exports.deepMerge = exports.shallowMerge = exports.deepFreeze = exports.freeze = exports.deepClone = exports.shallowClone = exports.Archive = undefined;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /* eslint eqeqeq: 0 */\n/* eslint no-use-before-define: 0 */\n/**\n * Baobab Helpers\n * ===============\n *\n * Miscellaneous helper functions.\n */\n\n\nexports.arrayFrom = arrayFrom;\nexports.before = before;\nexports.coercePath = coercePath;\nexports.getIn = getIn;\nexports.makeError = makeError;\nexports.hashPath = hashPath;\nexports.solveRelativePath = solveRelativePath;\nexports.solveUpdate = solveUpdate;\nexports.splice = splice;\n\nvar _monkey = require('./monkey');\n\nvar _type = require('./type');\n\nvar _type2 = _interopRequireDefault(_type);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar hasOwnProp = {}.hasOwnProperty;\n\n/**\n * Function returning the index of the first element of a list matching the\n * given predicate.\n *\n * @param  {array}     a  - The target array.\n * @param  {function}  fn - The predicate function.\n * @return {mixed}        - The index of the first matching item or -1.\n */\nfunction index(a, fn) {\n  var i = void 0,\n      l = void 0;\n  for (i = 0, l = a.length; i < l; i++) {\n    if (fn(a[i])) return i;\n  }\n  return -1;\n}\n\n/**\n * Efficient slice function used to clone arrays or parts of them.\n *\n * @param  {array} array - The array to slice.\n * @return {array}       - The sliced array.\n */\nfunction slice(array) {\n  var newArray = new Array(array.length);\n\n  var i = void 0,\n      l = void 0;\n\n  for (i = 0, l = array.length; i < l; i++) {\n    newArray[i] = array[i];\n  }return newArray;\n}\n\n/**\n * Archive abstraction\n *\n * @constructor\n * @param {integer} size - Maximum number of records to store.\n */\n\nvar Archive = exports.Archive = function () {\n  function Archive(size) {\n    _classCallCheck(this, Archive);\n\n    this.size = size;\n    this.records = [];\n  }\n\n  /**\n   * Method retrieving the records.\n   *\n   * @return {array} - The records.\n   */\n\n\n  _createClass(Archive, [{\n    key: 'get',\n    value: function get() {\n      return this.records;\n    }\n\n    /**\n     * Method adding a record to the archive\n     *\n     * @param {object}  record - The record to store.\n     * @return {Archive}       - The archive itself for chaining purposes.\n     */\n\n  }, {\n    key: 'add',\n    value: function add(record) {\n      this.records.unshift(record);\n\n      // If the number of records is exceeded, we truncate the records\n      if (this.records.length > this.size) this.records.length = this.size;\n\n      return this;\n    }\n\n    /**\n     * Method clearing the records.\n     *\n     * @return {Archive} - The archive itself for chaining purposes.\n     */\n\n  }, {\n    key: 'clear',\n    value: function clear() {\n      this.records = [];\n      return this;\n    }\n\n    /**\n     * Method to go back in time.\n     *\n     * @param {integer} steps - Number of steps we should go back by.\n     * @return {number}       - The last record.\n     */\n\n  }, {\n    key: 'back',\n    value: function back(steps) {\n      var record = this.records[steps - 1];\n\n      if (record) this.records = this.records.slice(steps);\n      return record;\n    }\n  }]);\n\n  return Archive;\n}();\n\n/**\n * Function creating a real array from what should be an array but is not.\n * I'm looking at you nasty `arguments`...\n *\n * @param  {mixed} culprit - The culprit to convert.\n * @return {array}         - The real array.\n */\n\n\nfunction arrayFrom(culprit) {\n  return slice(culprit);\n}\n\n/**\n * Function decorating one function with another that will be called before the\n * decorated one.\n *\n * @param  {function} decorator - The decorating function.\n * @param  {function} fn        - The function to decorate.\n * @return {function}           - The decorated function.\n */\nfunction before(decorator, fn) {\n  return function () {\n    decorator.apply(null, arguments);\n    fn.apply(null, arguments);\n  };\n}\n\n/**\n * Function cloning the given regular expression. Supports `y` and `u` flags\n * already.\n *\n * @param  {RegExp} re - The target regular expression.\n * @return {RegExp}    - The cloned regular expression.\n */\nfunction cloneRegexp(re) {\n  var pattern = re.source;\n\n  var flags = '';\n\n  if (re.global) flags += 'g';\n  if (re.multiline) flags += 'm';\n  if (re.ignoreCase) flags += 'i';\n  if (re.sticky) flags += 'y';\n  if (re.unicode) flags += 'u';\n\n  return new RegExp(pattern, flags);\n}\n\n/**\n * Function cloning the given variable.\n *\n * @todo: implement a faster way to clone an array.\n *\n * @param  {boolean} deep - Should we deep clone the variable.\n * @param  {mixed}   item - The variable to clone\n * @return {mixed}        - The cloned variable.\n */\nfunction cloner(deep, item) {\n  if (!item || (typeof item === 'undefined' ? 'undefined' : _typeof(item)) !== 'object' || item instanceof Error || item instanceof _monkey.MonkeyDefinition || item instanceof _monkey.Monkey || 'ArrayBuffer' in global && item instanceof ArrayBuffer) return item;\n\n  // Array\n  if (_type2.default.array(item)) {\n    if (deep) {\n      var a = new Array(item.length);\n\n      for (var i = 0, l = item.length; i < l; i++) {\n        a[i] = cloner(true, item[i]);\n      }return a;\n    }\n\n    return slice(item);\n  }\n\n  // Date\n  if (item instanceof Date) return new Date(item.getTime());\n\n  // RegExp\n  if (item instanceof RegExp) return cloneRegexp(item);\n\n  // Object\n  if (_type2.default.object(item)) {\n    var o = {};\n\n    // NOTE: could be possible to erase computed properties through `null`.\n    var props = Object.getOwnPropertyNames(item);\n    for (var _i = 0, _l = props.length; _i < _l; _i++) {\n      var name = props[_i];\n      var k = Object.getOwnPropertyDescriptor(item, name);\n      if (k.enumerable === true) {\n        if (k.get && k.get.isLazyGetter) {\n          Object.defineProperty(o, name, {\n            get: k.get,\n            enumerable: true,\n            configurable: true\n          });\n        } else {\n          o[name] = deep ? cloner(true, item[name]) : item[name];\n        }\n      } else if (k.enumerable === false) {\n        Object.defineProperty(o, name, {\n          value: deep ? cloner(true, k.value) : k.value,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        });\n      }\n    }\n    return o;\n  }\n\n  return item;\n}\n\n/**\n * Exporting shallow and deep cloning functions.\n */\nvar shallowClone = cloner.bind(null, false),\n    deepClone = cloner.bind(null, true);\n\nexports.shallowClone = shallowClone;\nexports.deepClone = deepClone;\n\n/**\n * Coerce the given variable into a full-fledged path.\n *\n * @param  {mixed} target - The variable to coerce.\n * @return {array}        - The array path.\n */\n\nfunction coercePath(target) {\n  if (target || target === 0 || target === '') return target;\n  return [];\n}\n\n/**\n * Function comparing an object's properties to a given descriptive\n * object.\n *\n * @param  {object} object      - The object to compare.\n * @param  {object} description - The description's mapping.\n * @return {boolean}            - Whether the object matches the description.\n */\nfunction compare(object, description) {\n  var ok = true,\n      k = void 0;\n\n  // If we reached here via a recursive call, object may be undefined because\n  // not all items in a collection will have the same deep nesting structure.\n  if (!object) return false;\n\n  for (k in description) {\n    if (_type2.default.object(description[k])) {\n      ok = ok && compare(object[k], description[k]);\n    } else if (_type2.default.array(description[k])) {\n      ok = ok && !!~description[k].indexOf(object[k]);\n    } else {\n      if (object[k] !== description[k]) return false;\n    }\n  }\n\n  return ok;\n}\n\n/**\n * Function freezing the given variable if possible.\n *\n * @param  {boolean} deep - Should we recursively freeze the given objects?\n * @param  {object}  o    - The variable to freeze.\n * @return {object}    - The merged object.\n */\nfunction freezer(deep, o) {\n  if ((typeof o === 'undefined' ? 'undefined' : _typeof(o)) !== 'object' || o === null || o instanceof _monkey.Monkey) return;\n\n  Object.freeze(o);\n\n  if (!deep) return;\n\n  if (Array.isArray(o)) {\n\n    // Iterating through the elements\n    var i = void 0,\n        l = void 0;\n\n    for (i = 0, l = o.length; i < l; i++) {\n      deepFreeze(o[i]);\n    }\n  } else {\n    var p = void 0,\n        k = void 0;\n\n    for (k in o) {\n      if (_type2.default.lazyGetter(o, k)) continue;\n\n      p = o[k];\n\n      if (!p || !hasOwnProp.call(o, k) || (typeof p === 'undefined' ? 'undefined' : _typeof(p)) !== 'object' || Object.isFrozen(p)) continue;\n\n      deepFreeze(p);\n    }\n  }\n}\n\nvar freeze = freezer.bind(null, false),\n    deepFreeze = freezer.bind(null, true);\n\nexports.freeze = freeze;\nexports.deepFreeze = deepFreeze;\n\n/**\n * Function retrieving nested data within the given object and according to\n * the given path.\n *\n * @todo: work if dynamic path hit objects also.\n * @todo: memoized perfgetters.\n *\n * @param  {object}  object - The object we need to get data from.\n * @param  {array}   path   - The path to follow.\n * @return {object}  result            - The result.\n * @return {mixed}   result.data       - The data at path, or `undefined`.\n * @return {array}   result.solvedPath - The solved path or `null`.\n * @return {boolean} result.exists     - Does the path exists in the tree?\n */\n\nvar NOT_FOUND_OBJECT = { data: undefined, solvedPath: null, exists: false };\n\nfunction getIn(object, path) {\n  if (!path) return NOT_FOUND_OBJECT;\n\n  var solvedPath = [];\n\n  var exists = true,\n      c = object,\n      idx = void 0,\n      i = void 0,\n      l = void 0;\n\n  for (i = 0, l = path.length; i < l; i++) {\n    if (!c) return {\n      data: undefined,\n      solvedPath: solvedPath.concat(path.slice(i)),\n      exists: false\n    };\n\n    if (typeof path[i] === 'function') {\n      if (!_type2.default.array(c)) return NOT_FOUND_OBJECT;\n\n      idx = index(c, path[i]);\n      if (!~idx) return NOT_FOUND_OBJECT;\n\n      solvedPath.push(idx);\n      c = c[idx];\n    } else if (_typeof(path[i]) === 'object') {\n      if (!_type2.default.array(c)) return NOT_FOUND_OBJECT;\n\n      idx = index(c, function (e) {\n        return compare(e, path[i]);\n      });\n      if (!~idx) return NOT_FOUND_OBJECT;\n\n      solvedPath.push(idx);\n      c = c[idx];\n    } else {\n      solvedPath.push(path[i]);\n      exists = (typeof c === 'undefined' ? 'undefined' : _typeof(c)) === 'object' && path[i] in c;\n      c = c[path[i]];\n    }\n  }\n\n  return { data: c, solvedPath: solvedPath, exists: exists };\n}\n\n/**\n * Little helper returning a JavaScript error carrying some data with it.\n *\n * @param  {string} message - The error message.\n * @param  {object} [data]  - Optional data to assign to the error.\n * @return {Error}          - The created error.\n */\nfunction makeError(message, data) {\n  var err = new Error(message);\n\n  for (var k in data) {\n    err[k] = data[k];\n  }return err;\n}\n\n/**\n * Function taking n objects to merge them together.\n * Note 1): the latter object will take precedence over the first one.\n * Note 2): the first object will be mutated to allow for perf scenarios.\n * Note 3): this function will consider monkeys as leaves.\n *\n * @param  {boolean}   deep    - Whether the merge should be deep or not.\n * @param  {...object} objects - Objects to merge.\n * @return {object}            - The merged object.\n */\nfunction merger(deep) {\n  for (var _len = arguments.length, objects = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    objects[_key - 1] = arguments[_key];\n  }\n\n  var o = objects[0];\n\n  var t = void 0,\n      i = void 0,\n      l = void 0,\n      k = void 0;\n\n  for (i = 1, l = objects.length; i < l; i++) {\n    t = objects[i];\n\n    for (k in t) {\n      if (deep && _type2.default.object(t[k]) && !(t[k] instanceof _monkey.Monkey)) {\n        o[k] = merger(true, o[k] || {}, t[k]);\n      } else {\n        o[k] = t[k];\n      }\n    }\n  }\n\n  return o;\n}\n\n/**\n * Exporting both `shallowMerge` and `deepMerge` functions.\n */\nvar shallowMerge = merger.bind(null, false),\n    deepMerge = merger.bind(null, true);\n\nexports.shallowMerge = shallowMerge;\nexports.deepMerge = deepMerge;\n\n/**\n * Function returning a string hash from a non-dynamic path expressed as an\n * array.\n *\n * @param  {array}  path - The path to hash.\n * @return {string} string - The resultant hash.\n */\n\nfunction hashPath(path) {\n  return 'Î»' + path.map(function (step) {\n    if (_type2.default.function(step) || _type2.default.object(step)) return '#' + uniqid() + '#';\n\n    return step;\n  }).join('Î»');\n}\n\n/**\n * Solving a potentially relative path.\n *\n * @param  {array} base - The base path from which to solve the path.\n * @param  {array} to   - The subpath to reach.\n * @param  {array}      - The solved absolute path.\n */\nfunction solveRelativePath(base, to) {\n  var solvedPath = [];\n\n  // Coercing to array\n  to = [].concat(to);\n\n  for (var i = 0, l = to.length; i < l; i++) {\n    var step = to[i];\n\n    if (step === '.') {\n      if (!i) solvedPath = base.slice(0);\n    } else if (step === '..') {\n      solvedPath = (!i ? base : solvedPath).slice(0, -1);\n    } else {\n      solvedPath.push(step);\n    }\n  }\n\n  return solvedPath;\n}\n\n/**\n * Function determining whether some paths in the tree were affected by some\n * updates that occurred at the given paths. This helper is mainly used at\n * cursor level to determine whether the cursor is concerned by the updates\n * fired at tree level.\n *\n * NOTES: 1) If performance become an issue, the following threefold loop\n *           can be simplified to a complex twofold one.\n *        2) A regex version could also work but I am not confident it would\n *           be faster.\n *        3) Another solution would be to keep a register of cursors like with\n *           the monkeys and update along this tree.\n *\n * @param  {array} affectedPaths - The paths that were updated.\n * @param  {array} comparedPaths - The paths that we are actually interested in.\n * @return {boolean}             - Is the update relevant to the compared\n *                                 paths?\n */\nfunction solveUpdate(affectedPaths, comparedPaths) {\n  var i = void 0,\n      j = void 0,\n      k = void 0,\n      l = void 0,\n      m = void 0,\n      n = void 0,\n      p = void 0,\n      c = void 0,\n      s = void 0;\n\n  // Looping through possible paths\n  for (i = 0, l = affectedPaths.length; i < l; i++) {\n    p = affectedPaths[i];\n\n    if (!p.length) return true;\n\n    // Looping through logged paths\n    for (j = 0, m = comparedPaths.length; j < m; j++) {\n      c = comparedPaths[j];\n\n      if (!c || !c.length) return true;\n\n      // Looping through steps\n      for (k = 0, n = c.length; k < n; k++) {\n        s = c[k];\n\n        // If path is not relevant, we break\n        // NOTE: the '!=' instead of '!==' is required here!\n        if (s != p[k]) break;\n\n        // If we reached last item and we are relevant\n        if (k + 1 === n || k + 1 === p.length) return true;\n      }\n    }\n  }\n\n  return false;\n}\n\n/**\n * Non-mutative version of the splice array method.\n *\n * @param  {array}    array        - The array to splice.\n * @param  {integer}  startIndex   - The start index.\n * @param  {integer}  nb           - Number of elements to remove.\n * @param  {...mixed} elements     - Elements to append after splicing.\n * @return {array}                 - The spliced array.\n */\nfunction splice(array, startIndex, nb) {\n  for (var _len2 = arguments.length, elements = Array(_len2 > 3 ? _len2 - 3 : 0), _key2 = 3; _key2 < _len2; _key2++) {\n    elements[_key2 - 3] = arguments[_key2];\n  }\n\n  if (nb === undefined && arguments.length === 2) nb = array.length - startIndex;else if (nb === null || nb === undefined) nb = 0;else if (isNaN(+nb)) throw new Error('argument nb ' + nb + ' can not be parsed into a number!');\n  nb = Math.max(0, nb);\n\n  // Solving startIndex\n  if (_type2.default.function(startIndex)) startIndex = index(array, startIndex);\n  if (_type2.default.object(startIndex)) startIndex = index(array, function (e) {\n    return compare(e, startIndex);\n  });\n\n  // Positive index\n  if (startIndex >= 0) return array.slice(0, startIndex).concat(elements).concat(array.slice(startIndex + nb));\n\n  // Negative index\n  return array.slice(0, array.length + startIndex).concat(elements).concat(array.slice(array.length + startIndex + nb));\n}\n\n/**\n * Function returning a unique incremental id each time it is called.\n *\n * @return {integer} - The latest unique id.\n */\nvar uniqid = function () {\n  var i = 0;\n\n  return function () {\n    return i++;\n  };\n}();\n\nexports.uniqid = uniqid;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = update;\n\nvar _type = require('./type');\n\nvar _type2 = _interopRequireDefault(_type);\n\nvar _helpers = require('./helpers');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } } /**\n                                                                                                                                                                                                     * Baobab Update\n                                                                                                                                                                                                     * ==============\n                                                                                                                                                                                                     *\n                                                                                                                                                                                                     * The tree's update scheme.\n                                                                                                                                                                                                     */\n\n\nfunction err(operation, expectedTarget, path) {\n  return (0, _helpers.makeError)('Baobab.update: cannot apply the \"' + operation + '\" on ' + ('a non ' + expectedTarget + ' (path: /' + path.join('/') + ').'), { path: path });\n}\n\n/**\n * Function aiming at applying a single update operation on the given tree's\n * data.\n *\n * @param  {mixed}  data      - The tree's data.\n * @param  {path}   path      - Path of the update.\n * @param  {object} operation - The operation to apply.\n * @param  {object} [opts]    - Optional options.\n * @return {mixed}            - Both the new tree's data and the updated node.\n */\nfunction update(data, path, operation) {\n  var opts = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  var operationType = operation.type,\n      value = operation.value,\n      _operation$options = operation.options,\n      operationOptions = _operation$options === undefined ? {} : _operation$options;\n\n  // Dummy root, so we can shift and alter the root\n\n  var dummy = { root: data },\n      dummyPath = ['root'].concat(_toConsumableArray(path)),\n      currentPath = [];\n\n  // Walking the path\n  var p = dummy,\n      i = void 0,\n      l = void 0,\n      s = void 0;\n\n  for (i = 0, l = dummyPath.length; i < l; i++) {\n\n    // Current item's reference is therefore p[s]\n    // The reason why we don't create a variable here for convenience\n    // is because we actually need to mutate the reference.\n    s = dummyPath[i];\n\n    // Updating the path\n    if (i > 0) currentPath.push(s);\n\n    // If we reached the end of the path, we apply the operation\n    if (i === l - 1) {\n\n      /**\n       * Set\n       */\n      if (operationType === 'set') {\n\n        // Purity check\n        if (opts.pure && p[s] === value) return { node: p[s] };\n\n        if (_type2.default.lazyGetter(p, s)) {\n          Object.defineProperty(p, s, {\n            value: value,\n            enumerable: true,\n            configurable: true\n          });\n        } else if (opts.persistent && !operationOptions.mutableLeaf) {\n          p[s] = (0, _helpers.shallowClone)(value);\n        } else {\n          p[s] = value;\n        }\n      }\n\n      /**\n       * Monkey\n       */\n      else if (operationType === 'monkey') {\n          Object.defineProperty(p, s, {\n            get: value,\n            enumerable: true,\n            configurable: true\n          });\n        }\n\n        /**\n         * Apply\n         */\n        else if (operationType === 'apply') {\n            var result = value(p[s]);\n\n            // Purity check\n            if (opts.pure && p[s] === result) return { node: p[s] };\n\n            if (_type2.default.lazyGetter(p, s)) {\n              Object.defineProperty(p, s, {\n                value: result,\n                enumerable: true,\n                configurable: true\n              });\n            } else if (opts.persistent) {\n              p[s] = (0, _helpers.shallowClone)(result);\n            } else {\n              p[s] = result;\n            }\n          }\n\n          /**\n           * Push\n           */\n          else if (operationType === 'push') {\n              if (!_type2.default.array(p[s])) throw err('push', 'array', currentPath);\n\n              if (opts.persistent) p[s] = p[s].concat([value]);else p[s].push(value);\n            }\n\n            /**\n             * Unshift\n             */\n            else if (operationType === 'unshift') {\n                if (!_type2.default.array(p[s])) throw err('unshift', 'array', currentPath);\n\n                if (opts.persistent) p[s] = [value].concat(p[s]);else p[s].unshift(value);\n              }\n\n              /**\n               * Concat\n               */\n              else if (operationType === 'concat') {\n                  if (!_type2.default.array(p[s])) throw err('concat', 'array', currentPath);\n\n                  if (opts.persistent) p[s] = p[s].concat(value);else p[s].push.apply(p[s], value);\n                }\n\n                /**\n                 * Splice\n                 */\n                else if (operationType === 'splice') {\n                    if (!_type2.default.array(p[s])) throw err('splice', 'array', currentPath);\n\n                    if (opts.persistent) p[s] = _helpers.splice.apply(null, [p[s]].concat(value));else p[s].splice.apply(p[s], value);\n                  }\n\n                  /**\n                   * Pop\n                   */\n                  else if (operationType === 'pop') {\n                      if (!_type2.default.array(p[s])) throw err('pop', 'array', currentPath);\n\n                      if (opts.persistent) p[s] = (0, _helpers.splice)(p[s], -1, 1);else p[s].pop();\n                    }\n\n                    /**\n                     * Shift\n                     */\n                    else if (operationType === 'shift') {\n                        if (!_type2.default.array(p[s])) throw err('shift', 'array', currentPath);\n\n                        if (opts.persistent) p[s] = (0, _helpers.splice)(p[s], 0, 1);else p[s].shift();\n                      }\n\n                      /**\n                       * Unset\n                       */\n                      else if (operationType === 'unset') {\n                          if (_type2.default.object(p)) delete p[s];else if (_type2.default.array(p)) p.splice(s, 1);\n                        }\n\n                        /**\n                         * Merge\n                         */\n                        else if (operationType === 'merge') {\n                            if (!_type2.default.object(p[s])) throw err('merge', 'object', currentPath);\n\n                            if (opts.persistent) p[s] = (0, _helpers.shallowMerge)({}, p[s], value);else p[s] = (0, _helpers.shallowMerge)(p[s], value);\n                          }\n\n                          /**\n                           * Deep merge\n                           */\n                          else if (operationType === 'deepMerge') {\n                              if (!_type2.default.object(p[s])) throw err('deepMerge', 'object', currentPath);\n\n                              if (opts.persistent) p[s] = (0, _helpers.deepMerge)({}, p[s], value);else p[s] = (0, _helpers.deepMerge)(p[s], value);\n                            }\n\n      // Deep freezing the resulting value\n      if (opts.immutable && !operationOptions.mutableLeaf) (0, _helpers.deepFreeze)(p);\n\n      break;\n    }\n\n    // If we reached a leaf, we override by setting an empty object\n    else if (_type2.default.primitive(p[s])) {\n        p[s] = {};\n      }\n\n      // Else, we shift the reference and continue the path\n      else if (opts.persistent) {\n          p[s] = (0, _helpers.shallowClone)(p[s]);\n        }\n\n    // Should we freeze the current step before continuing?\n    if (opts.immutable && l > 0) (0, _helpers.freeze)(p);\n\n    p = p[s];\n  }\n\n  // If we are updating a dynamic node, we need not return the affected node\n  if (_type2.default.lazyGetter(p, s)) return { data: dummy.root };\n\n  // Returning new data object\n  return { data: dummy.root, node: p[s] };\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Monkey = exports.MonkeyDefinition = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _type = require('./type');\n\nvar _type2 = _interopRequireDefault(_type);\n\nvar _update2 = require('./update');\n\nvar _update3 = _interopRequireDefault(_update2);\n\nvar _helpers = require('./helpers');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } } /**\n                                                                                                                                                           * Baobab Monkeys\n                                                                                                                                                           * ===============\n                                                                                                                                                           *\n                                                                                                                                                           * Exposing both handy monkey definitions and the underlying working class.\n                                                                                                                                                           */\n\n\n/**\n * Monkey Definition class\n * Note: The only reason why this is a class is to be able to spot it within\n * otherwise ordinary data.\n *\n * @constructor\n * @param {array|object} definition - The formal definition of the monkey.\n */\nvar MonkeyDefinition = exports.MonkeyDefinition = function MonkeyDefinition(definition) {\n  var _this = this;\n\n  _classCallCheck(this, MonkeyDefinition);\n\n  var monkeyType = _type2.default.monkeyDefinition(definition);\n\n  if (!monkeyType) throw (0, _helpers.makeError)('Baobab.monkey: invalid definition.', { definition: definition });\n\n  this.type = monkeyType;\n\n  if (this.type === 'object') {\n    this.getter = definition.get;\n    this.projection = definition.cursors || {};\n    this.paths = Object.keys(this.projection).map(function (k) {\n      return _this.projection[k];\n    });\n    this.options = definition.options || {};\n  } else {\n    var offset = 1,\n        options = {};\n\n    if (_type2.default.object(definition[definition.length - 1])) {\n      offset++;\n      options = definition[definition.length - 1];\n    }\n\n    this.getter = definition[definition.length - offset];\n    this.projection = definition.slice(0, -offset);\n    this.paths = this.projection;\n    this.options = options;\n  }\n\n  // Coercing paths for convenience\n  this.paths = this.paths.map(function (p) {\n    return [].concat(p);\n  });\n\n  // Does the definition contain dynamic paths\n  this.hasDynamicPaths = this.paths.some(_type2.default.dynamicPath);\n};\n\n/**\n * Monkey core class\n *\n * @constructor\n * @param {Baobab}           tree       - The bound tree.\n * @param {MonkeyDefinition} definition - A definition instance.\n */\n\n\nvar Monkey = exports.Monkey = function () {\n  function Monkey(tree, pathInTree, definition) {\n    var _this2 = this;\n\n    _classCallCheck(this, Monkey);\n\n    // Properties\n    this.tree = tree;\n    this.path = pathInTree;\n    this.definition = definition;\n\n    // Adapting the definition's paths & projection to this monkey's case\n    var projection = definition.projection,\n        relative = _helpers.solveRelativePath.bind(null, pathInTree.slice(0, -1));\n\n    if (definition.type === 'object') {\n      this.projection = Object.keys(projection).reduce(function (acc, k) {\n        acc[k] = relative(projection[k]);\n        return acc;\n      }, {});\n      this.depPaths = Object.keys(this.projection).map(function (k) {\n        return _this2.projection[k];\n      });\n    } else {\n      this.projection = projection.map(relative);\n      this.depPaths = this.projection;\n    }\n\n    // Internal state\n    this.state = {\n      killed: false\n    };\n\n    /**\n     * Listener on the tree's `write` event.\n     *\n     * When the tree writes, this listener will check whether the updated paths\n     * are of any use to the monkey and, if so, will update the tree's node\n     * where the monkey sits.\n     */\n    this.writeListener = function (_ref) {\n      var path = _ref.data.path;\n\n      if (_this2.state.killed) return;\n\n      // Is the monkey affected by the current write event?\n      var concerned = (0, _helpers.solveUpdate)([path], _this2.relatedPaths());\n\n      if (concerned) _this2.update();\n    };\n\n    /**\n     * Listener on the tree's `monkey` event.\n     *\n     * When another monkey updates, this listener will check whether the\n     * updated paths are of any use to the monkey and, if so, will update the\n     * tree's node where the monkey sits.\n     */\n    this.recursiveListener = function (_ref2) {\n      var _ref2$data = _ref2.data,\n          monkey = _ref2$data.monkey,\n          path = _ref2$data.path;\n\n      if (_this2.state.killed) return;\n\n      // Breaking if this is the same monkey\n      if (_this2 === monkey) return;\n\n      // Is the monkey affected by the current monkey event?\n      var concerned = (0, _helpers.solveUpdate)([path], _this2.relatedPaths(false));\n\n      if (concerned) _this2.update();\n    };\n\n    // Binding listeners\n    this.tree.on('write', this.writeListener);\n    this.tree.on('_monkey', this.recursiveListener);\n\n    // Updating relevant node\n    this.update();\n  }\n\n  /**\n   * Method returning solved paths related to the monkey.\n   *\n   * @param  {boolean} recursive - Should we compute recursive paths?\n   * @return {array}             - An array of related paths.\n   */\n\n\n  _createClass(Monkey, [{\n    key: 'relatedPaths',\n    value: function relatedPaths() {\n      var _this3 = this;\n\n      var recursive = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n      var paths = void 0;\n\n      if (this.definition.hasDynamicPaths) paths = this.depPaths.map(function (p) {\n        return (0, _helpers.getIn)(_this3.tree._data, p).solvedPath;\n      });else paths = this.depPaths;\n\n      var isRecursive = recursive && this.depPaths.some(function (p) {\n        return !!_type2.default.monkeyPath(_this3.tree._monkeys, p);\n      });\n\n      if (!isRecursive) return paths;\n\n      return paths.reduce(function (accumulatedPaths, path) {\n        var monkeyPath = _type2.default.monkeyPath(_this3.tree._monkeys, path);\n\n        if (!monkeyPath) return accumulatedPaths.concat([path]);\n\n        // Solving recursive path\n        var relatedMonkey = (0, _helpers.getIn)(_this3.tree._monkeys, monkeyPath).data;\n\n        return accumulatedPaths.concat(relatedMonkey.relatedPaths());\n      }, []);\n    }\n\n    /**\n     * Method used to update the tree's internal data with a lazy getter holding\n     * the computed data.\n     *\n     * @return {Monkey} - Returns itself for chaining purposes.\n     */\n\n  }, {\n    key: 'update',\n    value: function update() {\n      var _this4 = this;\n\n      var deps = this.tree.project(this.projection);\n\n      var lazyGetter = function (tree, def, data) {\n        var cache = null,\n            alreadyComputed = false;\n\n        return function () {\n\n          if (!alreadyComputed) {\n            cache = def.getter.apply(tree, def.type === 'object' ? [data] : data);\n\n            if (tree.options.immutable && def.options.immutable !== false) (0, _helpers.deepFreeze)(cache);\n\n            // update tree affected paths\n            var hash = (0, _helpers.hashPath)(_this4.path);\n            tree._affectedPathsIndex[hash] = true;\n\n            alreadyComputed = true;\n          }\n\n          return cache;\n        };\n      }(this.tree, this.definition, deps);\n\n      lazyGetter.isLazyGetter = true;\n\n      // Should we write the lazy getter in the tree or solve it right now?\n      if (this.tree.options.lazyMonkeys) {\n        this.tree._data = (0, _update3.default)(this.tree._data, this.path, {\n          type: 'monkey',\n          value: lazyGetter\n        }, this.tree.options).data;\n      } else {\n        var result = (0, _update3.default)(this.tree._data, this.path, {\n          type: 'set',\n          value: lazyGetter(),\n          options: {\n            mutableLeaf: !this.definition.options.immutable\n          }\n        }, this.tree.options);\n\n        if ('data' in result) this.tree._data = result.data;\n      }\n\n      // Notifying the monkey's update so we can handle recursivity\n      this.tree.emit('_monkey', { monkey: this, path: this.path });\n\n      return this;\n    }\n\n    /**\n     * Method releasing the monkey from memory.\n     */\n\n  }, {\n    key: 'release',\n    value: function release() {\n\n      // Unbinding events\n      this.tree.off('write', this.writeListener);\n      this.tree.off('_monkey', this.recursiveListener);\n      this.state.killed = true;\n\n      // Deleting properties\n      // NOTE: not deleting this.definition because some strange things happen\n      // in the _refreshMonkeys method. See #372.\n      delete this.projection;\n      delete this.depPaths;\n      delete this.tree;\n    }\n  }]);\n\n  return Monkey;\n}();","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _emmett = require('emmett');\n\nvar _emmett2 = _interopRequireDefault(_emmett);\n\nvar _monkey = require('./monkey');\n\nvar _type = require('./type');\n\nvar _type2 = _interopRequireDefault(_type);\n\nvar _helpers = require('./helpers');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Baobab Cursors\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * ===============\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Cursors created by selecting some data within a Baobab tree.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\n\n/**\n * Traversal helper function for dynamic cursors. Will throw a legible error\n * if traversal is not possible.\n *\n * @param {string} method     - The method name, to create a correct error msg.\n * @param {array}  solvedPath - The cursor's solved path.\n */\nfunction checkPossibilityOfDynamicTraversal(method, solvedPath) {\n  if (!solvedPath) throw (0, _helpers.makeError)('Baobab.Cursor.' + method + ': ' + ('cannot use ' + method + ' on an unresolved dynamic path.'), { path: solvedPath });\n}\n\n/**\n * Cursor class\n *\n * @constructor\n * @param {Baobab} tree   - The cursor's root.\n * @param {array}  path   - The cursor's path in the tree.\n * @param {string} hash   - The path's hash computed ahead by the tree.\n */\n\nvar Cursor = function (_Emitter) {\n  _inherits(Cursor, _Emitter);\n\n  function Cursor(tree, path, hash) {\n    _classCallCheck(this, Cursor);\n\n    // If no path were to be provided, we fallback to an empty path (root)\n    var _this = _possibleConstructorReturn(this, (Cursor.__proto__ || Object.getPrototypeOf(Cursor)).call(this));\n\n    path = path || [];\n\n    // Privates\n    _this._identity = '[object Cursor]';\n    _this._archive = null;\n\n    // Properties\n    _this.tree = tree;\n    _this.path = path;\n    _this.hash = hash;\n\n    // State\n    _this.state = {\n      killed: false,\n      recording: false,\n      undoing: false\n    };\n\n    // Checking whether the given path is dynamic or not\n    _this._dynamicPath = _type2.default.dynamicPath(_this.path);\n\n    // Checking whether the given path will meet a monkey\n    _this._monkeyPath = _type2.default.monkeyPath(_this.tree._monkeys, _this.path);\n\n    if (!_this._dynamicPath) _this.solvedPath = _this.path;else _this.solvedPath = (0, _helpers.getIn)(_this.tree._data, _this.path).solvedPath;\n\n    /**\n     * Listener bound to the tree's writes so that cursors with dynamic paths\n     * may update their solved path correctly.\n     *\n     * @param {object} event - The event fired by the tree.\n     */\n    _this._writeHandler = function (_ref) {\n      var data = _ref.data;\n\n      if (_this.state.killed || !(0, _helpers.solveUpdate)([data.path], _this._getComparedPaths())) return;\n\n      _this.solvedPath = (0, _helpers.getIn)(_this.tree._data, _this.path).solvedPath;\n    };\n\n    /**\n     * Function in charge of actually trigger the cursor's updates and\n     * deal with the archived records.\n     *\n     * @note: probably should wrap the current solvedPath in closure to avoid\n     * for tricky cases where it would fail.\n     *\n     * @param {mixed} previousData - the tree's previous data.\n     */\n    var fireUpdate = function fireUpdate(previousData) {\n      var self = _this;\n\n      var eventData = {\n        get previousData() {\n          return (0, _helpers.getIn)(previousData, self.solvedPath).data;\n        },\n        get currentData() {\n          return self.get();\n        }\n      };\n\n      if (_this.state.recording && !_this.state.undoing) _this.archive.add(eventData.previousData);\n\n      _this.state.undoing = false;\n\n      return _this.emit('update', eventData);\n    };\n\n    /**\n     * Listener bound to the tree's updates and determining whether the\n     * cursor is affected and should react accordingly.\n     *\n     * Note that this listener is lazily bound to the tree to be sure\n     * one wouldn't leak listeners when only creating cursors for convenience\n     * and not to listen to updates specifically.\n     *\n     * @param {object} event - The event fired by the tree.\n     */\n    _this._updateHandler = function (event) {\n      if (_this.state.killed) return;\n\n      var _event$data = event.data,\n          paths = _event$data.paths,\n          previousData = _event$data.previousData,\n          update = fireUpdate.bind(_this, previousData),\n          comparedPaths = _this._getComparedPaths();\n\n      if ((0, _helpers.solveUpdate)(paths, comparedPaths)) return update();\n    };\n\n    // Lazy binding\n    var bound = false;\n    _this._lazyBind = function () {\n      if (bound) return;\n\n      bound = true;\n\n      if (_this._dynamicPath) _this.tree.on('write', _this._writeHandler);\n\n      return _this.tree.on('update', _this._updateHandler);\n    };\n\n    // If the path is dynamic, we actually need to listen to the tree\n    if (_this._dynamicPath) {\n      _this._lazyBind();\n    } else {\n\n      // Overriding the emitter `on` and `once` methods\n      _this.on = (0, _helpers.before)(_this._lazyBind, _this.on.bind(_this));\n      _this.once = (0, _helpers.before)(_this._lazyBind, _this.once.bind(_this));\n    }\n    return _this;\n  }\n\n  /**\n   * Internal helpers\n   * -----------------\n   */\n\n  /**\n   * Method returning the paths of the tree watched over by the cursor and that\n   * should be taken into account when solving a potential update.\n   *\n   * @return {array} - Array of paths to compare with a given update.\n   */\n\n\n  _createClass(Cursor, [{\n    key: '_getComparedPaths',\n    value: function _getComparedPaths() {\n\n      // Checking whether we should keep track of some dependencies\n      var additionalPaths = this._monkeyPath ? (0, _helpers.getIn)(this.tree._monkeys, this._monkeyPath).data.relatedPaths() : [];\n\n      return [this.solvedPath].concat(additionalPaths);\n    }\n\n    /**\n     * Predicates\n     * -----------\n     */\n\n    /**\n     * Method returning whether the cursor is at root level.\n     *\n     * @return {boolean} - Is the cursor the root?\n     */\n\n  }, {\n    key: 'isRoot',\n    value: function isRoot() {\n      return !this.path.length;\n    }\n\n    /**\n     * Method returning whether the cursor is at leaf level.\n     *\n     * @return {boolean} - Is the cursor a leaf?\n     */\n\n  }, {\n    key: 'isLeaf',\n    value: function isLeaf() {\n      return _type2.default.primitive(this._get().data);\n    }\n\n    /**\n     * Method returning whether the cursor is at branch level.\n     *\n     * @return {boolean} - Is the cursor a branch?\n     */\n\n  }, {\n    key: 'isBranch',\n    value: function isBranch() {\n      return !this.isRoot() && !this.isLeaf();\n    }\n\n    /**\n     * Traversal Methods\n     * ------------------\n     */\n\n    /**\n     * Method returning the root cursor.\n     *\n     * @return {Baobab} - The root cursor.\n     */\n\n  }, {\n    key: 'root',\n    value: function root() {\n      return this.tree.select();\n    }\n\n    /**\n     * Method selecting a subpath as a new cursor.\n     *\n     * Arity (1):\n     * @param  {path} path    - The path to select.\n     *\n     * Arity (*):\n     * @param  {...step} path - The path to select.\n     *\n     * @return {Cursor}       - The created cursor.\n     */\n\n  }, {\n    key: 'select',\n    value: function select(path) {\n      if (arguments.length > 1) path = (0, _helpers.arrayFrom)(arguments);\n\n      return this.tree.select(this.path.concat(path));\n    }\n\n    /**\n     * Method returning the parent node of the cursor or else `null` if the\n     * cursor is already at root level.\n     *\n     * @return {Baobab} - The parent cursor.\n     */\n\n  }, {\n    key: 'up',\n    value: function up() {\n      if (!this.isRoot()) return this.tree.select(this.path.slice(0, -1));\n\n      return null;\n    }\n\n    /**\n     * Method returning the child node of the cursor.\n     *\n     * @return {Baobab} - The child cursor.\n     */\n\n  }, {\n    key: 'down',\n    value: function down() {\n      checkPossibilityOfDynamicTraversal('down', this.solvedPath);\n\n      if (!(this._get().data instanceof Array)) throw Error('Baobab.Cursor.down: cannot go down on a non-list type.');\n\n      return this.tree.select(this.solvedPath.concat(0));\n    }\n\n    /**\n     * Method returning the left sibling node of the cursor if this one is\n     * pointing at a list. Returns `null` if this cursor is already leftmost.\n     *\n     * @return {Baobab} - The left sibling cursor.\n     */\n\n  }, {\n    key: 'left',\n    value: function left() {\n      checkPossibilityOfDynamicTraversal('left', this.solvedPath);\n\n      var last = +this.solvedPath[this.solvedPath.length - 1];\n\n      if (isNaN(last)) throw Error('Baobab.Cursor.left: cannot go left on a non-list type.');\n\n      return last ? this.tree.select(this.solvedPath.slice(0, -1).concat(last - 1)) : null;\n    }\n\n    /**\n     * Method returning the right sibling node of the cursor if this one is\n     * pointing at a list. Returns `null` if this cursor is already rightmost.\n     *\n     * @return {Baobab} - The right sibling cursor.\n     */\n\n  }, {\n    key: 'right',\n    value: function right() {\n      checkPossibilityOfDynamicTraversal('right', this.solvedPath);\n\n      var last = +this.solvedPath[this.solvedPath.length - 1];\n\n      if (isNaN(last)) throw Error('Baobab.Cursor.right: cannot go right on a non-list type.');\n\n      if (last + 1 === this.up()._get().data.length) return null;\n\n      return this.tree.select(this.solvedPath.slice(0, -1).concat(last + 1));\n    }\n\n    /**\n     * Method returning the leftmost sibling node of the cursor if this one is\n     * pointing at a list.\n     *\n     * @return {Baobab} - The leftmost sibling cursor.\n     */\n\n  }, {\n    key: 'leftmost',\n    value: function leftmost() {\n      checkPossibilityOfDynamicTraversal('leftmost', this.solvedPath);\n\n      var last = +this.solvedPath[this.solvedPath.length - 1];\n\n      if (isNaN(last)) throw Error('Baobab.Cursor.leftmost: cannot go left on a non-list type.');\n\n      return this.tree.select(this.solvedPath.slice(0, -1).concat(0));\n    }\n\n    /**\n     * Method returning the rightmost sibling node of the cursor if this one is\n     * pointing at a list.\n     *\n     * @return {Baobab} - The rightmost sibling cursor.\n     */\n\n  }, {\n    key: 'rightmost',\n    value: function rightmost() {\n      checkPossibilityOfDynamicTraversal('rightmost', this.solvedPath);\n\n      var last = +this.solvedPath[this.solvedPath.length - 1];\n\n      if (isNaN(last)) throw Error('Baobab.Cursor.rightmost: cannot go right on a non-list type.');\n\n      var list = this.up()._get().data;\n\n      return this.tree.select(this.solvedPath.slice(0, -1).concat(list.length - 1));\n    }\n\n    /**\n     * Method mapping the children nodes of the cursor.\n     *\n     * @param  {function} fn      - The function to map.\n     * @param  {object}   [scope] - An optional scope.\n     * @return {array}            - The resultant array.\n     */\n\n  }, {\n    key: 'map',\n    value: function map(fn, scope) {\n      checkPossibilityOfDynamicTraversal('map', this.solvedPath);\n\n      var array = this._get().data,\n          l = arguments.length;\n\n      if (!_type2.default.array(array)) throw Error('baobab.Cursor.map: cannot map a non-list type.');\n\n      return array.map(function (item, i) {\n        return fn.call(l > 1 ? scope : this, this.select(i), i, array);\n      }, this);\n    }\n\n    /**\n     * Getter Methods\n     * ---------------\n     */\n\n    /**\n     * Internal get method. Basically contains the main body of the `get` method\n     * without the event emitting. This is sometimes needed not to fire useless\n     * events.\n     *\n     * @param  {path}   [path=[]]       - Path to get in the tree.\n     * @return {object} info            - The resultant information.\n     * @return {mixed}  info.data       - Data at path.\n     * @return {array}  info.solvedPath - The path solved when getting.\n     */\n\n  }, {\n    key: '_get',\n    value: function _get() {\n      var path = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n\n      if (!_type2.default.path(path)) throw (0, _helpers.makeError)('Baobab.Cursor.getters: invalid path.', { path: path });\n\n      if (!this.solvedPath) return { data: undefined, solvedPath: null, exists: false };\n\n      return (0, _helpers.getIn)(this.tree._data, this.solvedPath.concat(path));\n    }\n\n    /**\n     * Method used to check whether a certain path exists in the tree starting\n     * from the current cursor.\n     *\n     * Arity (1):\n     * @param  {path}   path           - Path to check in the tree.\n     *\n     * Arity (2):\n     * @param {..step}  path           - Path to check in the tree.\n     *\n     * @return {boolean}               - Does the given path exists?\n     */\n\n  }, {\n    key: 'exists',\n    value: function exists(path) {\n      path = (0, _helpers.coercePath)(path);\n\n      if (arguments.length > 1) path = (0, _helpers.arrayFrom)(arguments);\n\n      return this._get(path).exists;\n    }\n\n    /**\n     * Method used to get data from the tree. Will fire a `get` event from the\n     * tree so that the user may sometimes react upon it to fetch data, for\n     * instance.\n     *\n     * Arity (1):\n     * @param  {path}   path           - Path to get in the tree.\n     *\n     * Arity (2):\n     * @param  {..step} path           - Path to get in the tree.\n     *\n     * @return {mixed}                 - Data at path.\n     */\n\n  }, {\n    key: 'get',\n    value: function get(path) {\n      path = (0, _helpers.coercePath)(path);\n\n      if (arguments.length > 1) path = (0, _helpers.arrayFrom)(arguments);\n\n      var _get2 = this._get(path),\n          data = _get2.data,\n          solvedPath = _get2.solvedPath;\n\n      // Emitting the event\n\n\n      this.tree.emit('get', { data: data, solvedPath: solvedPath, path: this.path.concat(path) });\n\n      return data;\n    }\n\n    /**\n     * Method used to shallow clone data from the tree.\n     *\n     * Arity (1):\n     * @param  {path}   path           - Path to get in the tree.\n     *\n     * Arity (2):\n     * @param  {..step} path           - Path to get in the tree.\n     *\n     * @return {mixed}                 - Cloned data at path.\n     */\n\n  }, {\n    key: 'clone',\n    value: function clone() {\n      var data = this.get.apply(this, arguments);\n\n      return (0, _helpers.shallowClone)(data);\n    }\n\n    /**\n     * Method used to deep clone data from the tree.\n     *\n     * Arity (1):\n     * @param  {path}   path           - Path to get in the tree.\n     *\n     * Arity (2):\n     * @param  {..step} path           - Path to get in the tree.\n     *\n     * @return {mixed}                 - Cloned data at path.\n     */\n\n  }, {\n    key: 'deepClone',\n    value: function deepClone() {\n      var data = this.get.apply(this, arguments);\n\n      return (0, _helpers.deepClone)(data);\n    }\n\n    /**\n     * Method used to return raw data from the tree, by carefully avoiding\n     * computed one.\n     *\n     * @todo: should be more performant as the cloning should happen as well as\n     * when dropping computed data.\n     *\n     * Arity (1):\n     * @param  {path}   path           - Path to serialize in the tree.\n     *\n     * Arity (2):\n     * @param  {..step} path           - Path to serialize in the tree.\n     *\n     * @return {mixed}                 - The retrieved raw data.\n     */\n\n  }, {\n    key: 'serialize',\n    value: function serialize(path) {\n      path = (0, _helpers.coercePath)(path);\n\n      if (arguments.length > 1) path = (0, _helpers.arrayFrom)(arguments);\n\n      if (!_type2.default.path(path)) throw (0, _helpers.makeError)('Baobab.Cursor.getters: invalid path.', { path: path });\n\n      if (!this.solvedPath) return undefined;\n\n      var fullPath = this.solvedPath.concat(path);\n\n      var data = (0, _helpers.deepClone)((0, _helpers.getIn)(this.tree._data, fullPath).data),\n          monkeys = (0, _helpers.getIn)(this.tree._monkeys, fullPath).data;\n\n      var dropComputedData = function dropComputedData(d, m) {\n        if (!_type2.default.object(m) || !_type2.default.object(d)) return;\n\n        for (var k in m) {\n          if (m[k] instanceof _monkey.Monkey) delete d[k];else dropComputedData(d[k], m[k]);\n        }\n      };\n\n      dropComputedData(data, monkeys);\n      return data;\n    }\n\n    /**\n     * Method used to project some of the data at cursor onto a map or a list.\n     *\n     * @param  {object|array} projection - The projection's formal definition.\n     * @return {object|array}            - The resultant map/list.\n     */\n\n  }, {\n    key: 'project',\n    value: function project(projection) {\n      if (_type2.default.object(projection)) {\n        var data = {};\n\n        for (var k in projection) {\n          data[k] = this.get(projection[k]);\n        }return data;\n      } else if (_type2.default.array(projection)) {\n        var _data = [];\n\n        for (var i = 0, l = projection.length; i < l; i++) {\n          _data.push(this.get(projection[i]));\n        }return _data;\n      }\n\n      throw (0, _helpers.makeError)('Baobab.Cursor.project: wrong projection.', { projection: projection });\n    }\n\n    /**\n     * History Methods\n     * ----------------\n     */\n\n    /**\n     * Methods starting to record the cursor's successive states.\n     *\n     * @param  {integer} [maxRecords] - Maximum records to keep in memory. Note\n     *                                  that if no number is provided, the cursor\n     *                                  will keep everything.\n     * @return {Cursor}               - The cursor instance for chaining purposes.\n     */\n\n  }, {\n    key: 'startRecording',\n    value: function startRecording(maxRecords) {\n      maxRecords = maxRecords || Infinity;\n\n      if (maxRecords < 1) throw (0, _helpers.makeError)('Baobab.Cursor.startRecording: invalid max records.', {\n        value: maxRecords\n      });\n\n      this.state.recording = true;\n\n      if (this.archive) return this;\n\n      // Lazy binding\n      this._lazyBind();\n\n      this.archive = new _helpers.Archive(maxRecords);\n      return this;\n    }\n\n    /**\n     * Methods stopping to record the cursor's successive states.\n     *\n     * @return {Cursor} - The cursor instance for chaining purposes.\n     */\n\n  }, {\n    key: 'stopRecording',\n    value: function stopRecording() {\n      this.state.recording = false;\n      return this;\n    }\n\n    /**\n     * Methods undoing n steps of the cursor's recorded states.\n     *\n     * @param  {integer} [steps=1] - The number of steps to rollback.\n     * @return {Cursor}            - The cursor instance for chaining purposes.\n     */\n\n  }, {\n    key: 'undo',\n    value: function undo() {\n      var steps = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n\n      if (!this.state.recording) throw new Error('Baobab.Cursor.undo: cursor is not recording.');\n\n      var record = this.archive.back(steps);\n\n      if (!record) throw Error('Baobab.Cursor.undo: cannot find a relevant record.');\n\n      this.state.undoing = true;\n      this.set(record);\n\n      return this;\n    }\n\n    /**\n     * Methods returning whether the cursor has a recorded history.\n     *\n     * @return {boolean} - `true` if the cursor has a recorded history?\n     */\n\n  }, {\n    key: 'hasHistory',\n    value: function hasHistory() {\n      return !!(this.archive && this.archive.get().length);\n    }\n\n    /**\n     * Methods returning the cursor's history.\n     *\n     * @return {array} - The cursor's history.\n     */\n\n  }, {\n    key: 'getHistory',\n    value: function getHistory() {\n      return this.archive ? this.archive.get() : [];\n    }\n\n    /**\n     * Methods clearing the cursor's history.\n     *\n     * @return {Cursor} - The cursor instance for chaining purposes.\n     */\n\n  }, {\n    key: 'clearHistory',\n    value: function clearHistory() {\n      if (this.archive) this.archive.clear();\n      return this;\n    }\n\n    /**\n     * Releasing\n     * ----------\n     */\n\n    /**\n     * Methods releasing the cursor from memory.\n     */\n\n  }, {\n    key: 'release',\n    value: function release() {\n\n      // Removing listeners on parent\n      if (this._dynamicPath) this.tree.off('write', this._writeHandler);\n\n      this.tree.off('update', this._updateHandler);\n\n      // Unsubscribe from the parent\n      if (this.hash) delete this.tree._cursors[this.hash];\n\n      // Dereferencing\n      delete this.tree;\n      delete this.path;\n      delete this.solvedPath;\n      delete this.archive;\n\n      // Killing emitter\n      this.kill();\n      this.state.killed = true;\n    }\n\n    /**\n     * Output\n     * -------\n     */\n\n    /**\n     * Overriding the `toJSON` method for convenient use with JSON.stringify.\n     *\n     * @return {mixed} - Data at cursor.\n     */\n\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      return this.serialize();\n    }\n\n    /**\n     * Overriding the `toString` method for debugging purposes.\n     *\n     * @return {string} - The cursor's identity.\n     */\n\n  }, {\n    key: 'toString',\n    value: function toString() {\n      return this._identity;\n    }\n  }]);\n\n  return Cursor;\n}(_emmett2.default);\n\n/**\n * Method used to allow iterating over cursors containing list-type data.\n *\n * e.g. for(let i of cursor) { ... }\n *\n * @returns {object} -  Each item sequentially.\n */\n\n\nexports.default = Cursor;\nif (typeof Symbol === 'function' && typeof Symbol.iterator !== 'undefined') {\n  Cursor.prototype[Symbol.iterator] = function () {\n    var array = this._get().data;\n\n    if (!_type2.default.array(array)) throw Error('baobab.Cursor.@@iterate: cannot iterate a non-list type.');\n\n    var i = 0;\n\n    var cursor = this,\n        length = array.length;\n\n    return {\n      next: function next() {\n        if (i < length) {\n          return {\n            value: cursor.select(i++)\n          };\n        }\n\n        return {\n          done: true\n        };\n      }\n    };\n  };\n}\n\n/**\n * Setter Methods\n * ---------------\n *\n * Those methods are dynamically assigned to the class for DRY reasons.\n */\n\n// Not using a Set so that ES5 consumers don't pay a bundle size price\nvar INTRANSITIVE_SETTERS = {\n  unset: true,\n  pop: true,\n  shift: true\n};\n\n/**\n * Function creating a setter method for the Cursor class.\n *\n * @param {string}   name          - the method's name.\n * @param {function} [typeChecker] - a function checking that the given value is\n *                                   valid for the given operation.\n */\nfunction makeSetter(name, typeChecker) {\n\n  /**\n   * Binding a setter method to the Cursor class and having the following\n   * definition.\n   *\n   * Note: this is not really possible to make those setters variadic because\n   * it would create an impossible polymorphism with path.\n   *\n   * @todo: perform value validation elsewhere so that tree.update can\n   * beneficiate from it.\n   *\n   * Arity (1):\n   * @param  {mixed} value - New value to set at cursor's path.\n   *\n   * Arity (2):\n   * @param  {path}  path  - Subpath to update starting from cursor's.\n   * @param  {mixed} value - New value to set.\n   *\n   * @return {mixed}       - Data at path.\n   */\n  Cursor.prototype[name] = function (path, value) {\n\n    // We should warn the user if he applies to many arguments to the function\n    if (arguments.length > 2) throw (0, _helpers.makeError)('Baobab.Cursor.' + name + ': too many arguments.');\n\n    // Handling arities\n    if (arguments.length === 1 && !INTRANSITIVE_SETTERS[name]) {\n      value = path;\n      path = [];\n    }\n\n    // Coerce path\n    path = (0, _helpers.coercePath)(path);\n\n    // Checking the path's validity\n    if (!_type2.default.path(path)) throw (0, _helpers.makeError)('Baobab.Cursor.' + name + ': invalid path.', { path: path });\n\n    // Checking the value's validity\n    if (typeChecker && !typeChecker(value)) throw (0, _helpers.makeError)('Baobab.Cursor.' + name + ': invalid value.', { path: path, value: value });\n\n    // Checking the solvability of the cursor's dynamic path\n    if (!this.solvedPath) throw (0, _helpers.makeError)('Baobab.Cursor.' + name + ': the dynamic path of the cursor cannot be solved.', { path: this.path });\n\n    var fullPath = this.solvedPath.concat(path);\n\n    // Filing the update to the tree\n    return this.tree.update(fullPath, {\n      type: name,\n      value: value\n    });\n  };\n}\n\n/**\n * Making the necessary setters.\n */\nmakeSetter('set');\nmakeSetter('unset');\nmakeSetter('apply', _type2.default.function);\nmakeSetter('push');\nmakeSetter('concat', _type2.default.array);\nmakeSetter('unshift');\nmakeSetter('pop');\nmakeSetter('shift');\nmakeSetter('splice', _type2.default.splicer);\nmakeSetter('merge', _type2.default.object);\nmakeSetter('deepMerge', _type2.default.object);","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _emmett = require('emmett');\n\nvar _emmett2 = _interopRequireDefault(_emmett);\n\nvar _cursor = require('./cursor');\n\nvar _cursor2 = _interopRequireDefault(_cursor);\n\nvar _type = require('./type');\n\nvar _type2 = _interopRequireDefault(_type);\n\nvar _helpers = require('./helpers');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Baobab Watchers\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * ================\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Abstraction used to listen and retrieve data from multiple parts of a\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Baobab tree at once.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\n\n/**\n * Watcher class.\n *\n * @constructor\n * @param {Baobab} tree     - The watched tree.\n * @param {object} mapping  - A mapping of the paths to watch in the tree.\n */\nvar Watcher = function (_Emitter) {\n  _inherits(Watcher, _Emitter);\n\n  function Watcher(tree, mapping) {\n    _classCallCheck(this, Watcher);\n\n    // Properties\n    var _this = _possibleConstructorReturn(this, (Watcher.__proto__ || Object.getPrototypeOf(Watcher)).call(this));\n\n    _this.tree = tree;\n    _this.mapping = null;\n\n    _this.state = {\n      killed: false\n    };\n\n    // Initializing\n    _this.refresh(mapping);\n\n    // Listening\n    _this.handler = function (e) {\n      if (_this.state.killed) return;\n\n      var watchedPaths = _this.getWatchedPaths();\n\n      if ((0, _helpers.solveUpdate)(e.data.paths, watchedPaths)) return _this.emit('update');\n    };\n\n    _this.tree.on('update', _this.handler);\n    return _this;\n  }\n\n  /**\n   * Method used to get the current watched paths.\n   *\n   * @return {array} - The array of watched paths.\n   */\n\n\n  _createClass(Watcher, [{\n    key: 'getWatchedPaths',\n    value: function getWatchedPaths() {\n      var _this2 = this;\n\n      var rawPaths = Object.keys(this.mapping).map(function (k) {\n        var v = _this2.mapping[k];\n\n        // Watcher mappings can accept a cursor\n        if (v instanceof _cursor2.default) return v.solvedPath;\n\n        return _this2.mapping[k];\n      });\n\n      return rawPaths.reduce(function (cp, p) {\n\n        // Handling path polymorphisms\n        p = [].concat(p);\n\n        // Dynamic path?\n        if (_type2.default.dynamicPath(p)) p = (0, _helpers.getIn)(_this2.tree._data, p).solvedPath;\n\n        if (!p) return cp;\n\n        // Facet path?\n        var monkeyPath = _type2.default.monkeyPath(_this2.tree._monkeys, p);\n\n        if (monkeyPath) return cp.concat((0, _helpers.getIn)(_this2.tree._monkeys, monkeyPath).data.relatedPaths());\n\n        return cp.concat([p]);\n      }, []);\n    }\n\n    /**\n     * Method used to return a map of the watcher's cursors.\n     *\n     * @return {object} - TMap of relevant cursors.\n     */\n\n  }, {\n    key: 'getCursors',\n    value: function getCursors() {\n      var _this3 = this;\n\n      var cursors = {};\n\n      Object.keys(this.mapping).forEach(function (k) {\n        var path = _this3.mapping[k];\n\n        if (path instanceof _cursor2.default) cursors[k] = path;else cursors[k] = _this3.tree.select(path);\n      });\n\n      return cursors;\n    }\n\n    /**\n     * Method used to refresh the watcher's mapping.\n     *\n     * @param  {object}  mapping  - The new mapping to apply.\n     * @return {Watcher}          - Itself for chaining purposes.\n     */\n\n  }, {\n    key: 'refresh',\n    value: function refresh(mapping) {\n\n      if (!_type2.default.watcherMapping(mapping)) throw (0, _helpers.makeError)('Baobab.watch: invalid mapping.', { mapping: mapping });\n\n      this.mapping = mapping;\n\n      // Creating the get method\n      var projection = {};\n\n      for (var k in mapping) {\n        projection[k] = mapping[k] instanceof _cursor2.default ? mapping[k].path : mapping[k];\n      }this.get = this.tree.project.bind(this.tree, projection);\n    }\n\n    /**\n     * Methods releasing the watcher from memory.\n     */\n\n  }, {\n    key: 'release',\n    value: function release() {\n\n      this.tree.off('update', this.handler);\n      this.state.killed = true;\n      this.kill();\n    }\n  }]);\n\n  return Watcher;\n}(_emmett2.default);\n\nexports.default = Watcher;","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isNaN(val) === false) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^((?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  if (ms >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (ms >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (ms >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (ms >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  return plural(ms, d, 'day') ||\n    plural(ms, h, 'hour') ||\n    plural(ms, m, 'minute') ||\n    plural(ms, s, 'second') ||\n    ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, n, name) {\n  if (ms < n) {\n    return;\n  }\n  if (ms < n * 1.5) {\n    return Math.floor(ms / n) + ' ' + name;\n  }\n  return Math.ceil(ms / n) + ' ' + name + 's';\n}\n","'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _emmett = require('emmett');\n\nvar _emmett2 = _interopRequireDefault(_emmett);\n\nvar _cursor = require('./cursor');\n\nvar _cursor2 = _interopRequireDefault(_cursor);\n\nvar _monkey = require('./monkey');\n\nvar _watcher = require('./watcher');\n\nvar _watcher2 = _interopRequireDefault(_watcher);\n\nvar _type = require('./type');\n\nvar _type2 = _interopRequireDefault(_type);\n\nvar _update2 = require('./update');\n\nvar _update3 = _interopRequireDefault(_update2);\n\nvar _helpers = require('./helpers');\n\nvar helpers = _interopRequireWildcard(_helpers);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Baobab Data Structure\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * ======================\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * A handy data tree with cursors.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\n\nvar arrayFrom = helpers.arrayFrom,\n    coercePath = helpers.coercePath,\n    deepFreeze = helpers.deepFreeze,\n    getIn = helpers.getIn,\n    makeError = helpers.makeError,\n    deepClone = helpers.deepClone,\n    deepMerge = helpers.deepMerge,\n    shallowClone = helpers.shallowClone,\n    shallowMerge = helpers.shallowMerge,\n    hashPath = helpers.hashPath;\n\n/**\n * Baobab defaults\n */\n\nvar DEFAULTS = {\n\n  // Should the tree handle its transactions on its own?\n  autoCommit: true,\n\n  // Should the transactions be handled asynchronously?\n  asynchronous: true,\n\n  // Should the tree's data be immutable?\n  immutable: true,\n\n  // Should the monkeys be lazy?\n  lazyMonkeys: true,\n\n  // Should we evaluate monkeys?\n  monkeyBusiness: true,\n\n  // Should the tree be persistent?\n  persistent: true,\n\n  // Should the tree's update be pure?\n  pure: true,\n\n  // Validation specifications\n  validate: null,\n\n  // Validation behavior 'rollback' or 'notify'\n  validationBehavior: 'rollback'\n};\n\n/**\n * Baobab class\n *\n * @constructor\n * @param {object|array} [initialData={}]    - Initial data passed to the tree.\n * @param {object}       [opts]              - Optional options.\n * @param {boolean}      [opts.autoCommit]   - Should the tree auto-commit?\n * @param {boolean}      [opts.asynchronous] - Should the tree's transactions\n *                                             handled asynchronously?\n * @param {boolean}      [opts.immutable]    - Should the tree be immutable?\n * @param {boolean}      [opts.persistent]   - Should the tree be persistent?\n * @param {boolean}      [opts.pure]         - Should the tree be pure?\n * @param {function}     [opts.validate]     - Validation function.\n * @param {string}       [opts.validationBehaviour] - \"rollback\" or \"notify\".\n */\n\nvar Baobab = function (_Emitter) {\n  _inherits(Baobab, _Emitter);\n\n  function Baobab(initialData, opts) {\n    _classCallCheck(this, Baobab);\n\n    // Setting initialData to an empty object if no data is provided by use\n    var _this = _possibleConstructorReturn(this, (Baobab.__proto__ || Object.getPrototypeOf(Baobab)).call(this));\n\n    if (arguments.length < 1) initialData = {};\n\n    // Checking whether given initial data is valid\n    if (!_type2.default.object(initialData) && !_type2.default.array(initialData)) throw makeError('Baobab: invalid data.', { data: initialData });\n\n    // Merging given options with defaults\n    _this.options = shallowMerge({}, DEFAULTS, opts);\n\n    // Disabling immutability & persistence if persistence if disabled\n    if (!_this.options.persistent) {\n      _this.options.immutable = false;\n      _this.options.pure = false;\n    }\n\n    // Privates\n    _this._identity = '[object Baobab]';\n    _this._cursors = {};\n    _this._future = null;\n    _this._transaction = [];\n    _this._affectedPathsIndex = {};\n    _this._monkeys = {};\n    _this._previousData = null;\n    _this._data = initialData;\n\n    // Properties\n    _this.root = new _cursor2.default(_this, [], 'Î»');\n    delete _this.root.release;\n\n    // Does the user want an immutable tree?\n    if (_this.options.immutable) deepFreeze(_this._data);\n\n    // Bootstrapping root cursor's getters and setters\n    var bootstrap = function bootstrap(name) {\n      _this[name] = function () {\n        var r = this.root[name].apply(this.root, arguments);\n        return r instanceof _cursor2.default ? this : r;\n      };\n    };\n\n    ['apply', 'clone', 'concat', 'deepClone', 'deepMerge', 'exists', 'get', 'push', 'merge', 'pop', 'project', 'serialize', 'set', 'shift', 'splice', 'unset', 'unshift'].forEach(bootstrap);\n\n    // Registering the initial monkeys\n    if (_this.options.monkeyBusiness) {\n      _this._refreshMonkeys();\n    }\n\n    // Initial validation\n    var validationError = _this.validate();\n\n    if (validationError) throw Error('Baobab: invalid data.', { error: validationError });\n    return _this;\n  }\n\n  /**\n   * Internal method used to refresh the tree's monkey register on every\n   * update.\n   * Note 1) For the time being, placing monkeys beneath array nodes is not\n   * allowed for performance reasons.\n   *\n   * @param  {mixed}   node      - The starting node.\n   * @param  {array}   path      - The starting node's path.\n   * @param  {string}  operation - The operation that lead to a refreshment.\n   * @return {Baobab}            - The tree instance for chaining purposes.\n   */\n\n\n  _createClass(Baobab, [{\n    key: '_refreshMonkeys',\n    value: function _refreshMonkeys(node, path, operation) {\n      var _this2 = this;\n\n      var clean = function clean(data) {\n        var p = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n        if (data instanceof _monkey.Monkey) {\n          data.release();\n          (0, _update3.default)(_this2._monkeys, p, { type: 'unset' }, {\n            immutable: false,\n            persistent: false,\n            pure: false\n          });\n\n          return;\n        }\n\n        if (_type2.default.object(data)) {\n          for (var k in data) {\n            clean(data[k], p.concat(k));\n          }\n        }\n      };\n\n      var walk = function walk(data) {\n        var p = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n\n        // Should we sit a monkey in the tree?\n        if (data instanceof _monkey.MonkeyDefinition || data instanceof _monkey.Monkey) {\n          var monkeyInstance = new _monkey.Monkey(_this2, p, data instanceof _monkey.Monkey ? data.definition : data);\n\n          (0, _update3.default)(_this2._monkeys, p, { type: 'set', value: monkeyInstance }, {\n            immutable: false,\n            persistent: false,\n            pure: false\n          });\n\n          return;\n        }\n\n        // Object iteration\n        if (_type2.default.object(data)) {\n          for (var k in data) {\n            walk(data[k], p.concat(k));\n          }\n        }\n      };\n\n      // Walking the whole tree\n      if (!arguments.length) {\n        walk(this._data);\n      } else {\n        var monkeysNode = getIn(this._monkeys, path).data;\n\n        // Is this required that we clean some already existing monkeys?\n        if (monkeysNode) clean(monkeysNode, path);\n\n        // Let's walk the tree only from the updated point\n        if (operation !== 'unset') {\n          walk(node, path);\n        }\n      }\n\n      return this;\n    }\n\n    /**\n     * Method used to validate the tree's data.\n     *\n     * @return {boolean} - Is the tree valid?\n     */\n\n  }, {\n    key: 'validate',\n    value: function validate(affectedPaths) {\n      var _options = this.options,\n          validate = _options.validate,\n          behavior = _options.validationBehavior;\n\n\n      if (typeof validate !== 'function') return null;\n\n      var error = validate.call(this, this._previousData, this._data, affectedPaths || [[]]);\n\n      if (error instanceof Error) {\n\n        if (behavior === 'rollback') {\n          this._data = this._previousData;\n          this._affectedPathsIndex = {};\n          this._transaction = [];\n          this._previousData = this._data;\n        }\n\n        this.emit('invalid', { error: error });\n\n        return error;\n      }\n\n      return null;\n    }\n\n    /**\n     * Method used to select data within the tree by creating a cursor. Cursors\n     * are kept as singletons by the tree for performance and hygiene reasons.\n     *\n     * Arity (1):\n     * @param {path}    path - Path to select in the tree.\n     *\n     * Arity (*):\n     * @param {...step} path - Path to select in the tree.\n     *\n     * @return {Cursor}      - The resultant cursor.\n     */\n\n  }, {\n    key: 'select',\n    value: function select(path) {\n\n      // If no path is given, we simply return the root\n      path = path || [];\n\n      // Variadic\n      if (arguments.length > 1) path = arrayFrom(arguments);\n\n      // Checking that given path is valid\n      if (!_type2.default.path(path)) throw makeError('Baobab.select: invalid path.', { path: path });\n\n      // Casting to array\n      path = [].concat(path);\n\n      // Computing hash (done here because it would be too late to do it in the\n      // cursor's constructor since we need to hit the cursors' index first).\n      var hash = hashPath(path);\n\n      // Creating a new cursor or returning the already existing one for the\n      // requested path.\n      var cursor = this._cursors[hash];\n\n      if (!cursor) {\n        cursor = new _cursor2.default(this, path, hash);\n        this._cursors[hash] = cursor;\n      }\n\n      // Emitting an event to notify that a part of the tree was selected\n      this.emit('select', { path: path, cursor: cursor });\n      return cursor;\n    }\n\n    /**\n     * Method used to update the tree. Updates are simply expressed by a path,\n     * dynamic or not, and an operation.\n     *\n     * This is where path solving should happen and not in the cursor.\n     *\n     * @param  {path}   path      - The path where we'll apply the operation.\n     * @param  {object} operation - The operation to apply.\n     * @return {mixed} - Return the result of the update.\n     */\n\n  }, {\n    key: 'update',\n    value: function update(path, operation) {\n      var _this3 = this;\n\n      // Coercing path\n      path = coercePath(path);\n\n      if (!_type2.default.operationType(operation.type)) throw makeError('Baobab.update: unknown operation type \"' + operation.type + '\".', { operation: operation });\n\n      // Solving the given path\n\n      var _getIn = getIn(this._data, path),\n          solvedPath = _getIn.solvedPath,\n          exists = _getIn.exists;\n\n      // If we couldn't solve the path, we throw\n\n\n      if (!solvedPath) throw makeError('Baobab.update: could not solve the given path.', {\n        path: solvedPath\n      });\n\n      // Read-only path?\n      var monkeyPath = _type2.default.monkeyPath(this._monkeys, solvedPath);\n      if (monkeyPath && solvedPath.length > monkeyPath.length) throw makeError('Baobab.update: attempting to update a read-only path.', {\n        path: solvedPath\n      });\n\n      // We don't unset irrelevant paths\n      if (operation.type === 'unset' && !exists) return;\n\n      // If we merge data, we need to acknowledge monkeys\n      var realOperation = operation;\n      if (/merge/i.test(operation.type)) {\n        var monkeysNode = getIn(this._monkeys, solvedPath).data;\n\n        if (_type2.default.object(monkeysNode)) {\n\n          // Cloning the operation not to create weird behavior for the user\n          realOperation = shallowClone(realOperation);\n\n          // Fetching the existing node in the current data\n          var currentNode = getIn(this._data, solvedPath).data;\n\n          if (/deep/i.test(realOperation.type)) realOperation.value = deepMerge({}, deepMerge({}, currentNode, deepClone(monkeysNode)), realOperation.value);else realOperation.value = shallowMerge({}, deepMerge({}, currentNode, deepClone(monkeysNode)), realOperation.value);\n        }\n      }\n\n      // Stashing previous data if this is the frame's first update\n      if (!this._transaction.length) this._previousData = this._data;\n\n      // Applying the operation\n      var result = (0, _update3.default)(this._data, solvedPath, realOperation, this.options);\n\n      var data = result.data,\n          node = result.node;\n\n      // If because of purity, the update was moot, we stop here\n\n      if (!('data' in result)) return node;\n\n      // If the operation is push, the affected path is slightly different\n      var affectedPath = solvedPath.concat(operation.type === 'push' ? node.length - 1 : []);\n\n      var hash = hashPath(affectedPath);\n\n      // Updating data and transaction\n      this._data = data;\n      this._affectedPathsIndex[hash] = true;\n      this._transaction.push(shallowMerge({}, operation, { path: affectedPath }));\n\n      // Updating the monkeys\n      if (this.options.monkeyBusiness) {\n        this._refreshMonkeys(node, solvedPath, operation.type);\n      }\n\n      // Emitting a `write` event\n      this.emit('write', { path: affectedPath });\n\n      // Should we let the user commit?\n      if (!this.options.autoCommit) return node;\n\n      // Should we update asynchronously?\n      if (!this.options.asynchronous) {\n        this.commit();\n        return node;\n      }\n\n      // Updating asynchronously\n      if (!this._future) this._future = setTimeout(function () {\n        return _this3.commit();\n      }, 0);\n\n      // Finally returning the affected node\n      return node;\n    }\n\n    /**\n     * Method committing the updates of the tree and firing the tree's events.\n     *\n     * @return {Baobab} - The tree instance for chaining purposes.\n     */\n\n  }, {\n    key: 'commit',\n    value: function commit() {\n\n      // Do not fire update if the transaction is empty\n      if (!this._transaction.length) return this;\n\n      // Clearing timeout if one was defined\n      if (this._future) this._future = clearTimeout(this._future);\n\n      var affectedPaths = Object.keys(this._affectedPathsIndex).map(function (h) {\n        return h !== 'Î»' ? h.split('Î»').slice(1) : [];\n      });\n\n      // Is the tree still valid?\n      var validationError = this.validate(affectedPaths);\n\n      if (validationError) return this;\n\n      // Caching to keep original references before we change them\n      var transaction = this._transaction,\n          previousData = this._previousData;\n\n      this._affectedPathsIndex = {};\n      this._transaction = [];\n      this._previousData = this._data;\n\n      // Emitting update event\n      this.emit('update', {\n        paths: affectedPaths,\n        currentData: this._data,\n        transaction: transaction,\n        previousData: previousData\n      });\n\n      return this;\n    }\n\n    /**\n     * Method returning a monkey at the given path or else `null`.\n     *\n     * @param  {path}        path - Path of the monkey to retrieve.\n     * @return {Monkey|null}      - The Monkey instance of `null`.\n     */\n\n  }, {\n    key: 'getMonkey',\n    value: function getMonkey(path) {\n      path = coercePath(path);\n\n      var monkey = getIn(this._monkeys, [].concat(path)).data;\n\n      if (monkey instanceof _monkey.Monkey) return monkey;\n\n      return null;\n    }\n\n    /**\n     * Method used to watch a collection of paths within the tree. Very useful\n     * to bind UI components and such to the tree.\n     *\n     * @param  {object} mapping - Mapping of paths to listen.\n     * @return {Cursor}         - The created watcher.\n     */\n\n  }, {\n    key: 'watch',\n    value: function watch(mapping) {\n      return new _watcher2.default(this, mapping);\n    }\n\n    /**\n     * Method releasing the tree and its attached data from memory.\n     */\n\n  }, {\n    key: 'release',\n    value: function release() {\n      var k = void 0;\n\n      this.emit('release');\n\n      delete this.root;\n\n      delete this._data;\n      delete this._previousData;\n      delete this._transaction;\n      delete this._affectedPathsIndex;\n      delete this._monkeys;\n\n      // Releasing cursors\n      for (k in this._cursors) {\n        this._cursors[k].release();\n      }delete this._cursors;\n\n      // Killing event emitter\n      this.kill();\n    }\n\n    /**\n     * Overriding the `toJSON` method for convenient use with JSON.stringify.\n     *\n     * @return {mixed} - Data at cursor.\n     */\n\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      return this.serialize();\n    }\n\n    /**\n     * Overriding the `toString` method for debugging purposes.\n     *\n     * @return {string} - The baobab's identity.\n     */\n\n  }, {\n    key: 'toString',\n    value: function toString() {\n      return this._identity;\n    }\n  }]);\n\n  return Baobab;\n}(_emmett2.default);\n\n/**\n * Monkey helper.\n */\n\n\nBaobab.monkey = function () {\n  for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  if (!args.length) throw new Error('Baobab.monkey: missing definition.');\n\n  if (args.length === 1 && typeof args[0] !== 'function') return new _monkey.MonkeyDefinition(args[0]);\n\n  return new _monkey.MonkeyDefinition(args);\n};\nBaobab.dynamicNode = Baobab.monkey;\n\n/**\n * Exposing some internals for convenience\n */\nBaobab.Cursor = _cursor2.default;\nBaobab.MonkeyDefinition = _monkey.MonkeyDefinition;\nBaobab.Monkey = _monkey.Monkey;\nBaobab.type = _type2.default;\nBaobab.helpers = helpers;\n\n/**\n * Version.\n */\nBaobab.VERSION = '2.5.2';\n\n/**\n * Exporting.\n */\nmodule.exports = Baobab;","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = createDebug.debug = createDebug['default'] = createDebug;\nexports.coerce = coerce;\nexports.disable = disable;\nexports.enable = enable;\nexports.enabled = enabled;\nexports.humanize = require('ms');\n\n/**\n * The currently active debug mode names, and names to skip.\n */\n\nexports.names = [];\nexports.skips = [];\n\n/**\n * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n *\n * Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n */\n\nexports.formatters = {};\n\n/**\n * Previous log timestamp.\n */\n\nvar prevTime;\n\n/**\n * Select a color.\n * @param {String} namespace\n * @return {Number}\n * @api private\n */\n\nfunction selectColor(namespace) {\n  var hash = 0, i;\n\n  for (i in namespace) {\n    hash  = ((hash << 5) - hash) + namespace.charCodeAt(i);\n    hash |= 0; // Convert to 32bit integer\n  }\n\n  return exports.colors[Math.abs(hash) % exports.colors.length];\n}\n\n/**\n * Create a debugger with the given `namespace`.\n *\n * @param {String} namespace\n * @return {Function}\n * @api public\n */\n\nfunction createDebug(namespace) {\n\n  function debug() {\n    // disabled?\n    if (!debug.enabled) return;\n\n    var self = debug;\n\n    // set `diff` timestamp\n    var curr = +new Date();\n    var ms = curr - (prevTime || curr);\n    self.diff = ms;\n    self.prev = prevTime;\n    self.curr = curr;\n    prevTime = curr;\n\n    // turn the `arguments` into a proper Array\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n\n    args[0] = exports.coerce(args[0]);\n\n    if ('string' !== typeof args[0]) {\n      // anything else let's inspect with %O\n      args.unshift('%O');\n    }\n\n    // apply any `formatters` transformations\n    var index = 0;\n    args[0] = args[0].replace(/%([a-zA-Z%])/g, function(match, format) {\n      // if we encounter an escaped % then don't increase the array index\n      if (match === '%%') return match;\n      index++;\n      var formatter = exports.formatters[format];\n      if ('function' === typeof formatter) {\n        var val = args[index];\n        match = formatter.call(self, val);\n\n        // now we need to remove `args[index]` since it's inlined in the `format`\n        args.splice(index, 1);\n        index--;\n      }\n      return match;\n    });\n\n    // apply env-specific formatting (colors, etc.)\n    exports.formatArgs.call(self, args);\n\n    var logFn = debug.log || exports.log || console.log.bind(console);\n    logFn.apply(self, args);\n  }\n\n  debug.namespace = namespace;\n  debug.enabled = exports.enabled(namespace);\n  debug.useColors = exports.useColors();\n  debug.color = selectColor(namespace);\n\n  // env-specific initialization logic for debug instances\n  if ('function' === typeof exports.init) {\n    exports.init(debug);\n  }\n\n  return debug;\n}\n\n/**\n * Enables a debug mode by namespaces. This can include modes\n * separated by a colon and wildcards.\n *\n * @param {String} namespaces\n * @api public\n */\n\nfunction enable(namespaces) {\n  exports.save(namespaces);\n\n  exports.names = [];\n  exports.skips = [];\n\n  var split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n  var len = split.length;\n\n  for (var i = 0; i < len; i++) {\n    if (!split[i]) continue; // ignore empty strings\n    namespaces = split[i].replace(/\\*/g, '.*?');\n    if (namespaces[0] === '-') {\n      exports.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n    } else {\n      exports.names.push(new RegExp('^' + namespaces + '$'));\n    }\n  }\n}\n\n/**\n * Disable debug output.\n *\n * @api public\n */\n\nfunction disable() {\n  exports.enable('');\n}\n\n/**\n * Returns true if the given mode name is enabled, false otherwise.\n *\n * @param {String} name\n * @return {Boolean}\n * @api public\n */\n\nfunction enabled(name) {\n  var i, len;\n  for (i = 0, len = exports.skips.length; i < len; i++) {\n    if (exports.skips[i].test(name)) {\n      return false;\n    }\n  }\n  for (i = 0, len = exports.names.length; i < len; i++) {\n    if (exports.names[i].test(name)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Coerce `val`.\n *\n * @param {Mixed} val\n * @return {Mixed}\n * @api private\n */\n\nfunction coerce(val) {\n  if (val instanceof Error) return val.stack || val.message;\n  return val;\n}\n","/**\n * This is the web browser implementation of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = require('./debug');\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = 'undefined' != typeof chrome\n               && 'undefined' != typeof chrome.storage\n                  ? chrome.storage.local\n                  : localstorage();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n  'lightseagreen',\n  'forestgreen',\n  'goldenrod',\n  'dodgerblue',\n  'darkorchid',\n  'crimson'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\nfunction useColors() {\n  // NB: In an Electron preload script, document will be defined but not fully\n  // initialized. Since we know we're in Chrome, we'll just detect this case\n  // explicitly\n  if (typeof window !== 'undefined' && window.process && window.process.type === 'renderer') {\n    return true;\n  }\n\n  // is webkit? http://stackoverflow.com/a/16459606/376773\n  // document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n  return (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n    // is firebug? http://stackoverflow.com/a/398120/376773\n    (typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n    // is firefox >= v31?\n    // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n    // double check webkit in userAgent just in case we are in a worker\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nexports.formatters.j = function(v) {\n  try {\n    return JSON.stringify(v);\n  } catch (err) {\n    return '[UnexpectedJSONParseError]: ' + err.message;\n  }\n};\n\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n  var useColors = this.useColors;\n\n  args[0] = (useColors ? '%c' : '')\n    + this.namespace\n    + (useColors ? ' %c' : ' ')\n    + args[0]\n    + (useColors ? '%c ' : ' ')\n    + '+' + exports.humanize(this.diff);\n\n  if (!useColors) return;\n\n  var c = 'color: ' + this.color;\n  args.splice(1, 0, c, 'color: inherit')\n\n  // the final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n  var index = 0;\n  var lastC = 0;\n  args[0].replace(/%[a-zA-Z%]/g, function(match) {\n    if ('%%' === match) return;\n    index++;\n    if ('%c' === match) {\n      // we only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n\n  args.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.log()` when available.\n * No-op when `console.log` is not a \"function\".\n *\n * @api public\n */\n\nfunction log() {\n  // this hackery is required for IE8/9, where\n  // the `console.log` function doesn't have 'apply'\n  return 'object' === typeof console\n    && console.log\n    && Function.prototype.apply.call(console.log, console, arguments);\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\nfunction save(namespaces) {\n  try {\n    if (null == namespaces) {\n      exports.storage.removeItem('debug');\n    } else {\n      exports.storage.debug = namespaces;\n    }\n  } catch(e) {}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\nfunction load() {\n  var r;\n  try {\n    r = exports.storage.debug;\n  } catch(e) {}\n\n  // If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n  if (!r && typeof process !== 'undefined' && 'env' in process) {\n    r = process.env.DEBUG;\n  }\n\n  return r;\n}\n\n/**\n * Enable namespaces listed in `localStorage.debug` initially.\n */\n\nexports.enable(load());\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n  try {\n    return window.localStorage;\n  } catch (e) {}\n}\n","/**\n * Copyright 2014, Yahoo! Inc.\n * Copyrights licensed under the New BSD License. See the accompanying LICENSE file for terms.\n */\n'use strict';\nvar debug = require('debug')('Dispatchr:Action');\n\nfunction Action(name, payload) {\n    this.name = name;\n    this.payload = payload;\n    this._handlers = null;\n    this._isExecuting = false;\n    this._isCompleted = null;\n}\n\n/**\n * Gets a name from a store\n * @method getStoreName\n * @param {String|Object} store The store name or class from which to extract\n *      the name\n * @returns {String}\n */\nAction.prototype.getStoreName = function getStoreName(store) {\n    if ('string' === typeof store) {\n        return store;\n    }\n    return store.storeName;\n};\n\n/**\n * Executes all handlers for the action\n * @method execute\n * @param {Function[]} handlers A mapping of store names to handler function\n * @throws {Error} if action has already been executed\n */\nAction.prototype.execute = function execute(handlers) {\n    if (this._isExecuting) {\n        throw new Error('Action is already dispatched');\n    }\n    var self = this;\n    this._handlers = handlers;\n    this._isExecuting = true;\n    this._isCompleted = {};\n    Object.keys(handlers).forEach(function handlersEach(storeName) {\n        self._callHandler(storeName);\n    });\n};\n\n/**\n * Calls an individual store's handler function\n * @method _callHandler\n * @param {String} storeName\n * @private\n * @throws {Error} if handler does not exist for storeName\n */\nAction.prototype._callHandler = function callHandler(storeName) {\n    var self = this,\n        handlerFn = self._handlers[storeName];\n    if (!handlerFn) {\n        throw new Error(storeName + ' does not have a handler for action ' + self.name);\n    }\n    if (self._isCompleted[storeName]) {\n        return;\n    }\n    self._isCompleted[storeName] = false;\n    debug('executing handler for ' + storeName);\n    handlerFn(self.payload, self.name);\n    self._isCompleted[storeName] = true;\n};\n\n/**\n * Waits until all stores have finished handling an action and then calls\n * the callback\n * @method waitFor\n * @param {String|String[]|Constructor|Constructor[]} stores An array of stores as strings or constructors to wait for\n * @param {Function} callback Called after all stores have completed handling their actions\n * @throws {Error} if the action is not being executed\n */\nAction.prototype.waitFor = function waitFor(stores, callback) {\n    var self = this;\n    if (!self._isExecuting) {\n        throw new Error('waitFor called even though there is no action being executed!');\n    }\n    if (!Array.isArray(stores)) {\n        stores = [stores];\n    }\n\n    debug('waiting on ' + stores.join(', '));\n    stores.forEach(function storesEach(storeName) {\n        storeName = self.getStoreName(storeName);\n        if (self._handlers[storeName]) {\n            self._callHandler(storeName);\n        }\n    });\n\n    callback();\n};\n\nmodule.exports = Action;\n","/**\n * Copyright 2014, Yahoo! Inc.\n * Copyrights licensed under the New BSD License. See the accompanying LICENSE file for terms.\n */\n'use strict';\n\nvar Action = require('./Action');\nvar DEFAULT = 'default';\nvar debug = require('debug')('Dispatchr:DispatcherContext');\n\n/**\n * @class Dispatcher\n * @param {Object} context The context to be used for store instances\n * @constructor\n */\nfunction DispatcherContext (dispatcher, context) {\n    this.dispatcher = dispatcher;\n    this.storeInstances = {};\n    this.currentAction = null;\n    this.dispatcherInterface = {\n        getContext: function getContext() { return context; },\n        getStore: this.getStore.bind(this),\n        waitFor: this.waitFor.bind(this)\n    };\n}\n\n/**\n * Returns a single store instance and creates one if it doesn't already exist\n * @method getStore\n * @param {String} name The name of the instance\n * @returns {Object} The store instance\n * @throws {Error} if store is not registered\n */\nDispatcherContext.prototype.getStore = function getStore(name) {\n    var storeName = this.dispatcher.getStoreName(name);\n    if (!this.storeInstances[storeName]) {\n        var Store = this.dispatcher.stores[storeName];\n        if (!Store) {\n            throw new Error('Store ' + storeName + ' was not registered.');\n        }\n        this.storeInstances[storeName] = new (this.dispatcher.stores[storeName])(this.dispatcherInterface);\n    }\n    return this.storeInstances[storeName];\n};\n\n/**\n * Dispatches a new action or queues it up if one is already in progress\n * @method dispatch\n * @param {String} actionName Name of the action to be dispatched\n * @param {Object} payload Parameters to describe the action\n * @throws {Error} if store has handler registered that does not exist\n */\nDispatcherContext.prototype.dispatch = function dispatch(actionName, payload) {\n    if (!actionName) {\n        throw new Error('actionName parameter `' + actionName + '` is invalid.');\n    }\n    if (this.currentAction) {\n        throw new Error('Cannot call dispatch while another dispatch is executing. Attempted to execute \\'' + actionName + '\\' but \\'' + this.currentAction.name + '\\' is already executing.');\n    }\n    var actionHandlers = this.dispatcher.handlers[actionName] || [],\n        defaultHandlers = this.dispatcher.handlers[DEFAULT] || [];\n    if (!actionHandlers.length && !defaultHandlers.length) {\n        debug(actionName + ' does not have any registered handlers');\n        return;\n    }\n    debug('dispatching ' + actionName, payload);\n    this.currentAction = new Action(actionName, payload);\n    var self = this,\n        allHandlers = actionHandlers.concat(defaultHandlers),\n        handlerFns = {};\n\n    try {\n        allHandlers.forEach(function actionHandlersEach(store) {\n            if (handlerFns[store.name]) {\n                // Don't call the default if the store has an explicit action handler\n                return;\n            }\n            var storeInstance = self.getStore(store.name);\n            if ('function' === typeof store.handler) {\n                handlerFns[store.name] = store.handler.bind(storeInstance);\n            } else {\n                if (!storeInstance[store.handler]) {\n                    throw new Error(store.name + ' does not have a method called ' + store.handler);\n                }\n                handlerFns[store.name] = storeInstance[store.handler].bind(storeInstance);\n            }\n        });\n        this.currentAction.execute(handlerFns);\n    } catch (e) {\n        throw e;\n    } finally {\n        debug('finished ' + actionName);\n        this.currentAction = null;\n    }\n};\n\n/**\n * Returns a raw data object representation of the current state of the\n * dispatcher and all store instances. If the store implements a shouldDehdyrate\n * function, then it will be called and only dehydrate if the method returns `true`\n * @method dehydrate\n * @returns {Object} dehydrated dispatcher data\n */\nDispatcherContext.prototype.dehydrate = function dehydrate() {\n    var self = this,\n        stores = {};\n    Object.keys(self.storeInstances).forEach(function storeInstancesEach(storeName) {\n        var store = self.storeInstances[storeName];\n        if (!store.dehydrate || (store.shouldDehydrate && !store.shouldDehydrate())) {\n            return;\n        }\n        stores[storeName] = store.dehydrate();\n    });\n    return {\n        stores: stores\n    };\n};\n\n/**\n * Takes a raw data object and rehydrates the dispatcher and store instances\n * @method rehydrate\n * @param {Object} dispatcherState raw state typically retrieved from `dehydrate`\n *      method\n */\nDispatcherContext.prototype.rehydrate = function rehydrate(dispatcherState) {\n    var self = this;\n    if (dispatcherState.stores) {\n        Object.keys(dispatcherState.stores).forEach(function storeStateEach(storeName) {\n            var state = dispatcherState.stores[storeName],\n                store = self.getStore(storeName);\n            if (store.rehydrate) {\n                store.rehydrate(state);\n            }\n        });\n    }\n};\n\n/**\n * Waits until all stores have finished handling an action and then calls\n * the callback\n * @method waitFor\n * @param {String|String[]} stores An array of stores as strings to wait for\n * @param {Function} callback Called after all stores have completed handling their actions\n * @throws {Error} if there is no action dispatching\n */\nDispatcherContext.prototype.waitFor = function waitFor(stores, callback) {\n    if (!this.currentAction) {\n        throw new Error('waitFor called even though there is no action dispatching');\n    }\n    this.currentAction.waitFor(stores, callback);\n};\n\nmodule.exports = DispatcherContext;\n","/**\n * Copyright 2014, Yahoo! Inc.\n * Copyrights licensed under the New BSD License. See the accompanying LICENSE file for terms.\n */\n'use strict';\n\nvar Action = require('./Action');\nvar DEFAULT = 'default';\nvar DispatcherContext = require('./DispatcherContext');\n\n/**\n * @class Dispatcher\n * @param {Object} options Dispatcher options\n * @param {Array} options.stores Array of stores to register\n * @constructor\n */\nfunction Dispatcher (options) {\n    options = options || {};\n    options.stores = options.stores || [];\n    this.stores = {};\n    this.handlers = {};\n    this.handlers[DEFAULT] = [];\n    this.hasWarnedAboutNameProperty = false;\n    options.stores.forEach(function (store) {\n        this.registerStore(store);\n    }, this);\n\n}\n\nDispatcher.prototype.createContext = function createContext(context) {\n    return new DispatcherContext(this, context);\n};\n\n/**\n * Registers a store so that it can handle actions.\n * @method registerStore\n * @static\n * @param {Object} store A store class to be registered. The store should have a static\n *      `name` property so that it can be loaded later.\n * @throws {Error} if store is invalid\n * @throws {Error} if store is already registered\n */\nDispatcher.prototype.registerStore = function registerStore(store) {\n    if ('function' !== typeof store) {\n        throw new Error('registerStore requires a constructor as first parameter');\n    }\n    var storeName = this.getStoreName(store);\n    if (!storeName) {\n        throw new Error('Store is required to have a `storeName` property.');\n    }\n    if (this.stores[storeName]) {\n        if (this.stores[storeName] === store) {\n            // Store is already registered, nothing to do\n            return;\n        }\n        throw new Error('Store with name `' + storeName + '` has already been registered.');\n    }\n    this.stores[storeName] = store;\n    if (store.handlers) {\n        Object.keys(store.handlers).forEach(function storeHandlersEach(action) {\n            var handler = store.handlers[action];\n            this._registerHandler(action, storeName, handler);\n        }, this);\n    }\n};\n\n/**\n * Method to discover if a storeName has been registered\n * @method isRegistered\n * @static\n * @param {Object|String} store The store to check\n * @returns {boolean}\n */\nDispatcher.prototype.isRegistered = function isRegistered(store) {\n    var storeName = this.getStoreName(store),\n        storeInstance = this.stores[storeName];\n\n    if (!storeInstance) {\n        return false;\n    }\n\n    if ('function' === typeof store) {\n        if (store !== storeInstance) {\n            return false;\n        }\n    }\n    return true;\n};\n\n/**\n * Gets a name from a store\n * @method getStoreName\n * @static\n * @param {String|Object} store The store name or class from which to extract\n *      the name\n * @returns {String}\n */\nDispatcher.prototype.getStoreName = function getStoreName(store) {\n    if ('string' === typeof store) {\n        return store;\n    }\n    if (store.storeName) {\n        return store.storeName;\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n        if (store.name && !this.hasWarnedAboutNameProperty) {\n            console.warn('A store has been registered that relies on the ' +\n                'constructor\\'s name property. This name may change when you ' +\n                'minify your stores during build time and could break string ' +\n                'references to your store. It is advised that you add a ' +\n                'static `storeName` property to your store to ensure the ' +\n                'store name does not change during your build.');\n            this.hasWarnedAboutNameProperty = true;\n        }\n    }\n    return store.name;\n};\n\n/**\n * Adds a handler function to be called for the given action\n * @method registerHandler\n * @private\n * @static\n * @param {String} action Name of the action\n * @param {String} name Name of the store that handles the action\n * @param {String|Function} handler The function or name of the method that handles the action\n * @returns {number}\n */\nDispatcher.prototype._registerHandler = function registerHandler(action, name, handler) {\n    this.handlers[action] = this.handlers[action] || [];\n    this.handlers[action].push({\n        name: this.getStoreName(name),\n        handler: handler\n    });\n    return this.handlers.length - 1;\n};\n\nmodule.exports = {\n    createDispatcher: function (options) {\n        return new Dispatcher(options);\n    }\n};\n","import Baobab from 'baobab'\nimport dispatchr from 'dispatchr'\nimport angular from 'angular'\n\nconst angularModule = angular.module\nlet registeredStores = []\nlet autoInjectStores = false\nlet useEvalAsync = true\n\n// A function that creates stores\nfunction createStore(name, spec = {}, immutableDefaults, flux) {\n  // Constructor of a yahoo dispatchr store\n  const Store = function(dispatcher) {\n    this.dispatcher = dispatcher\n\n    // Check if store exists when waiting for it\n    this.waitFor = function(stores, cb) {\n      stores = Array.isArray(stores) ? stores : [stores]\n      if (!flux.areStoresRegistered(stores)) {\n        throw new Error(\n          'Waiting for stores that are not injected into Angular yet, ' +\n            stores.join(', ') +\n            '. Be sure to inject stores before waiting for them'\n        )\n      }\n      this.dispatcher.waitFor(stores, cb.bind(this))\n    }\n\n    if (!this.initialize) {\n      throw new Error(\n        'Store ' +\n          name +\n          ' does not have an initialize method which is is necessary to set the initial state'\n      )\n    }\n\n    this.initialize()\n  }\n\n  // Add constructor properties, as required by Yahoo Dispatchr\n  Store.handlers = spec.handlers\n  Store.storeName = name\n\n  // Instantiates immutable state and saves it to private variable that can be used for setting listeners\n  Store.prototype.immutable = function(initialState, options = {}) {\n    if (this.__tree) {\n      this.__tree.set(initialState)\n    } else {\n      this.__tree = new Baobab(\n        initialState,\n        angular.extend({}, immutableDefaults, options)\n      )\n    }\n    return this.__tree\n  }\n\n  Store.prototype.monkey = Baobab.monkey\n\n  // Attach store definition to the prototype\n  Object.keys(spec).forEach(function(key) {\n    Store.prototype[key] = spec[key]\n  })\n\n  return Store\n}\n\n// Flux Service is a wrapper for the Yahoo Dispatchr\nconst FluxService = function(immutableDefaults, $rootScope) {\n  this.stores = []\n  this.dispatcherInstance = dispatchr.createDispatcher()\n  this.dispatcher = this.dispatcherInstance.createContext()\n\n  this.dispatch = function() {\n    if (registeredStores.length) {\n      console.warn(\n        'There are still stores not injected: ' +\n          registeredStores.join(',') +\n          '. Make sure to manually inject all stores before running any dispatches or set autoInjectStores to true.'\n      ) // eslint-disable-line no-console\n    }\n    this.dispatcher.dispatch.apply(this.dispatcher, arguments)\n  }\n\n  this.createStore = function(name, spec) {\n    const store = createStore(name, spec, immutableDefaults, this)\n    let storeInstance\n\n    // Create the exports object\n    store.exports = {}\n\n    this.dispatcherInstance.registerStore(store)\n    this.stores.push(store)\n\n    // Add cloning to exports\n\n    if (!spec.exports) {\n      throw new Error(\n        'You have to add an exports object to your store: ' + name\n      )\n    }\n\n    storeInstance = this.dispatcher.getStore(store)\n    Object.keys(spec.exports).forEach(function(key) {\n      // Create a getter\n      const descriptor = Object.getOwnPropertyDescriptor(spec.exports, key)\n      if (descriptor.get) {\n        Object.defineProperty(store.exports, key, {\n          enumerable: descriptor.enumerable,\n          configurable: descriptor.configurable,\n          get: () => descriptor.get.apply(storeInstance),\n        })\n      } else {\n        store.exports[key] = function() {\n          return spec.exports[key].apply(storeInstance, arguments)\n        }\n        spec.exports[key] = spec.exports[key].bind(storeInstance)\n      }\n    })\n\n    return store.exports\n  }\n\n  this.listenTo = function(storeExport, mapping, callback) {\n    return listenToStore($rootScope, this, storeExport, mapping, callback)\n  }\n\n  this.getStore = function(storeExport) {\n    const store = this.stores.filter(s => s.exports === storeExport)[0]\n    return this.dispatcher.getStore(store)\n  }\n\n  this.areStoresRegistered = function(stores) {\n    const storeNames = this.stores.map(store => store.storeName)\n    return stores.every(storeName => storeNames.indexOf(storeName) > -1)\n  }\n\n  this.reset = function() {\n    this.dispatcherInstance.stores = {}\n    this.dispatcherInstance.handlers = {}\n    this.stores = []\n    registeredStores = []\n  }\n\n  // Expose Baobab in case user wants access to it for use outside a store\n  this.Baobab = Baobab\n}\n\n// Wrap \"angular.module\" to attach store method to module instance\nangular.module = function() {\n  // Call the module as normaly and grab the instance\n  const moduleInstance = angularModule.apply(angular, arguments)\n\n  // Attach store method to instance\n  moduleInstance.store = function(storeName, storeDefinition) {\n    // Add to stores array\n    registeredStores.push(storeName)\n\n    // Create a new store\n    this.factory(storeName, [\n      '$injector',\n      'flux',\n      function($injector, flux) {\n        const storeConfig = $injector.invoke(storeDefinition)\n        registeredStores.splice(registeredStores.indexOf(storeName), 1)\n        return flux.createStore(storeName, storeConfig)\n      },\n    ])\n\n    return this\n  }\n\n  return moduleInstance\n}\n\nangular\n  .module('flux', [])\n  .provider('flux', function FluxProvider() {\n    let immutableDefaults = {}\n\n    // Defaults that are passed on to Baobab: https://github.com/Yomguithereal/baobab#options\n    this.setImmutableDefaults = function(defaults) {\n      immutableDefaults = defaults\n    }\n\n    this.autoInjectStores = function(val) {\n      autoInjectStores = val\n    }\n\n    this.useEvalAsync = function(val) {\n      useEvalAsync = val\n    }\n\n    this.$get = [\n      '$rootScope',\n      $rootScope => new FluxService(immutableDefaults, $rootScope),\n    ]\n  })\n  .run([\n    '$rootScope',\n    '$injector',\n    'flux',\n    function($rootScope, $injector, flux) {\n      if (angular.mock) {\n        // Forced to false during testing to avoid needing to flush to test $listenTo interaction\n        useEvalAsync = false\n        flux.reset()\n      }\n\n      if (!angular.mock && autoInjectStores) {\n        $injector.invoke(registeredStores.concat(angular.noop))\n      }\n\n      // Extend scopes with $listenTo\n      $rootScope.constructor.prototype.$listenTo = function(\n        storeExport,\n        mapping,\n        callback\n      ) {\n        const unsubscribe = listenToStore(\n          this,\n          flux,\n          storeExport,\n          mapping,\n          callback\n        )\n\n        if (!callback) {\n          callback = mapping\n        }\n\n        // Call the callback so that state gets the initial sync with the view-model variables. evalAsync is specifically\n        // not used here because state should be available to angular as it is initializing. Otherwise state can be\n        // undefined while the first digest cycle is running.\n        callback({})\n\n        // Remove the listeners on the store when scope is destroyed (GC)\n        this.$on('$destroy', unsubscribe)\n      }\n    },\n  ])\n\nfunction listenToStore($scope, flux, storeExport, mapping, callback) {\n  let cursor, originalCallback\n  const store = flux.getStore(storeExport)\n\n  if (!store.__tree) {\n    throw new Error(\n      'Store ' +\n        storeExport.storeName +\n        ' has not defined state with this.immutable() which is required in order to use $listenTo'\n    )\n  }\n\n  if (!callback) {\n    callback = mapping\n    mapping = undefined\n  }\n\n  cursor = mapping ? store.__tree.select(mapping) : store.__tree\n\n  originalCallback = callback\n  if (useEvalAsync) {\n    callback = e => {\n      $scope.$evalAsync(() => originalCallback(e))\n    }\n  }\n\n  cursor.on('update', callback)\n\n  return () => cursor.off('update', callback)\n}\n\nexport default 'flux'\n"],"names":["it","toString","call","slice","undefined","TypeError","argument","Object","requireObjectCoercible","isNaN","floor","ceil","min","toInteger","S","isObject","fn","val","valueOf","exec","error","String","bitmap","value","enumerable","configurable","writable","object","key","propertyKey","toPrimitive","definePropertyModule","f","createPropertyDescriptor","Array","isArray","arg","classof","Math","require$$0","defineProperty","get","a","window","self","Function","document","exist","createElement","require$$1","require$$2","nativeDefineProperty","DESCRIPTORS","O","P","Attributes","anObject","IE8_DOM_DEFINE","hide","global","concat","id","postfix","name","store","NATIVE_SYMBOL","Symbol","uid","originalArray","length","C","constructor","prototype","SPECIES","METHOD_NAME","fails","array","foo","Boolean","IndexedObject","hasOwnProperty","set","has","SHARED","setGlobal","module","push","version","mode","copyright","random","nativePropertyIsEnumerable","propertyIsEnumerable","nativeGetOwnPropertyDescriptor","getOwnPropertyDescriptor","1","V","descriptor","this","split","toIndexedObject","propertyIsEnumerableModule","WeakMap","test","nativeFunctionToString","shared","NATIVE_WEAK_MAP","wmget","wmhas","wmset","metadata","STATE","hiddenKeys","objectHas","index","integer","max","IS_INCLUDES","$this","el","fromIndex","toLength","toAbsoluteIndex","names","i","result","arrayIndexOf","target","source","keys","ownKeys","getOwnPropertyDescriptorModule","isForced","feature","detection","data","normalize","POLYFILL","NATIVE","options","targetProperty","sourceProperty","TARGET","GLOBAL","STATIC","stat","noTargetGet","forced","copyConstructorProperties","sham","redefine","isConcatSpreadable","spreadable","IS_CONCAT_SPREADABLE","enforce","getterFor","TYPE","state","type","getInternalState","InternalStateModule","enforceInternalState","TEMPLATE","unsafe","simple","join","getOwnPropertyNames","internalObjectKeys","getOwnPropertySymbols","Reflect","getOwnPropertyNamesModule","getOwnPropertySymbolsModule","replacement","string","replace","toLowerCase","MAX_SAFE_INTEGER","MAXIMUM_ALLOWED_INDEX_EXCEEDED","IS_CONCAT_SPREADABLE_SUPPORT","SPECIES_SUPPORT","proto","k","len","E","toObject","A","arraySpeciesCreate","n","arguments","createProperty","specificCreate","IS_MAP","IS_FILTER","IS_SOME","IS_EVERY","IS_FIND_INDEX","NO_HOLES","create","callbackfn","that","boundFunction","aFunction","b","c","apply","bind","method","internalEvery","every","internalFilter","filter","nativeForEach","forEach","internalForEach","internalIndexOf","nativeIndexOf","indexOf","NEGATIVE_ZERO","SLOPPY_METHOD","searchElement","nativeJoin","ES3_STRINGS","separator","internalMap","map","splice","start","deleteCount","insertCount","actualDeleteCount","from","to","actualStart","argumentsLength","arraySlice","factories","partArgs","args","argsLength","list","construct","FAILS_ON_PRIMITIVES","enumBugKeys","nativeKeys","COLLECTION_NAME","CSSRuleList","CSSStyleDeclaration","CSSValueList","ClientRectList","DOMRectList","DOMStringList","DOMTokenList","DataTransferItemList","FileList","HTMLAllCollection","HTMLCollection","HTMLFormElement","HTMLSelectElement","MediaList","MimeTypeArray","NamedNodeMap","NodeList","PaintRequestList","Plugin","PluginArray","SVGLengthList","SVGNumberList","SVGPathSegList","SVGPointList","SVGStringList","SVGTransformList","SourceBufferList","StyleSheetList","TextTrackCueList","TextTrackList","TouchList","Collection","CollectionPrototype","__allowedOptions","once","scope","__order","isPlainObject","v","RegExp","forIn","symbols","l","Emitter","_enabled","unbindAll","_handlers","_handlersAll","_handlersComplex","on","event","eArray","handlersList","bindingObject","order","pattern","Error","li","o1","o2","o","shallowMerge","off","events","listeners","h","handlers","complex","search","sort","emit","parent","handler","j","m","onces","kill","disable","enable","exports","_typeof","iterator","obj","anyOf","allowed","some","t","Date","Map","Set","number","function","primitive","splicer","ALLOWED_FOR_PATH","path","step","dynamicPath","monkeyPath","subpath","_monkey","Monkey","lazyGetter","isLazyGetter","monkeyDefinition","definition","cursors","offset","p","watcherMapping","VALID_OPERATIONS","operationType","_createClass","Constructor","protoProps","staticProps","defineProperties","props","culprit","decorator","NOT_FOUND_OBJECT","solvedPath","exists","idx","_type2","default","e","compare","message","err","uniqid","base","affectedPaths","comparedPaths","startIndex","nb","_len2","elements","_key2","_type","__esModule","hasOwnProp","newArray","Archive","records","record","unshift","size","steps","instance","_classCallCheck","cloner","deep","item","MonkeyDefinition","ArrayBuffer","getTime","re","flags","multiline","ignoreCase","sticky","unicode","cloneRegexp","_i","_l","shallowClone","deepClone","description","ok","freezer","freeze","deepFreeze","isFrozen","merger","_len","objects","_key","deepMerge","operation","opts","_operation$options","operationOptions","dummy","root","dummyPath","arr","arr2","_toConsumableArray","currentPath","s","pure","node","persistent","mutableLeaf","_helpers","pop","shift","immutable","expectedTarget","makeError","_interopRequireDefault","_update3","_update2","_this","monkeyType","getter","projection","paths","hasDynamicPaths","_this3","recursive","depPaths","getIn","tree","_data","_monkeys","reduce","accumulatedPaths","relatedMonkey","relatedPaths","def","cache","alreadyComputed","_this4","deps","project","hash","hashPath","_affectedPathsIndex","lazyMonkeys","monkey","writeListener","recursiveListener","killed","pathInTree","_this2","relative","solveRelativePath","acc","_ref","solveUpdate","update","_ref2","_ref2$data","_emmett2","_emmett","checkPossibilityOfDynamicTraversal","Cursor","subClass","superClass","setPrototypeOf","__proto__","_inherits","additionalPaths","_monkeyPath","_get","isRoot","isLeaf","select","arrayFrom","last","up","coercePath","_get2","fullPath","dropComputedData","d","maxRecords","Infinity","recording","archive","_lazyBind","back","undoing","clear","_dynamicPath","_writeHandler","_updateHandler","_cursors","serialize","_identity","ReferenceError","_possibleConstructorReturn","getPrototypeOf","_archive","_getComparedPaths","bound","_event$data","previousData","eventData","currentData","add","before","cursor","next","done","INTRANSITIVE_SETTERS","unset","makeSetter","typeChecker","_cursor2","_cursor","Watcher","mapping","cp","refresh","watchedPaths","getWatchedPaths","str","match","parseFloat","parse","long","ms","plural","fmtLong","round","fmtShort","JSON","stringify","_watcher2","_watcher","helpers","newObj","_interopRequireWildcard","DEFAULTS","autoCommit","asynchronous","monkeyBusiness","validate","validationBehavior","Baobab","walk","monkeyInstance","monkeysNode","clean","release","_options","behavior","_previousData","_transaction","_getIn","realOperation","currentNode","affectedPath","_refreshMonkeys","_future","setTimeout","commit","clearTimeout","transaction","initialData","r","validationError","dynamicNode","VERSION","prevTime","createDebug","namespace","debug","enabled","curr","diff","prev","coerce","format","formatter","formatters","formatArgs","log","console","useColors","color","charCodeAt","colors","abs","selectColor","init","stack","namespaces","save","skips","substr","load","storage","process","env","DEBUG","humanize","lastC","removeItem","documentElement","style","WebkitAppearance","firebug","exception","table","navigator","userAgent","parseInt","$1","chrome","local","localStorage","localstorage","Action","payload","_isExecuting","_isCompleted","getStoreName","storeName","execute","_callHandler","handlerFn","waitFor","stores","callback","DispatcherContext","dispatcher","context","storeInstances","currentAction","dispatcherInterface","getContext","getStore","dispatch","actionName","actionHandlers","defaultHandlers","allHandlers","handlerFns","storeInstance","dehydrate","shouldDehydrate","rehydrate","dispatcherState","Dispatcher","hasWarnedAboutNameProperty","registerStore","createContext","action","_registerHandler","isRegistered","NODE_ENV","warn","createDispatcher","angularModule","angular","registeredStores","autoInjectStores","useEvalAsync","FluxService","immutableDefaults","$rootScope","dispatcherInstance","dispatchr","createStore","spec","flux","Store","cb","areStoresRegistered","initialize","initialState","__tree","extend","listenTo","storeExport","listenToStore","storeNames","reset","$scope","originalCallback","$evalAsync","moduleInstance","storeDefinition","factory","$injector","storeConfig","invoke","provider","setImmutableDefaults","defaults","$get","run","mock","noop","$listenTo","unsubscribe","$on"],"mappings":"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"}